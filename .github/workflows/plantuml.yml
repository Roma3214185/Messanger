# name: Generate Architecture Diagrams

# on:
#   push:
#     branches: [ main ]
#   pull_request:
#     branches: [ main ]

# jobs:
#   plantuml:
#     runs-on: ubuntu-latest

#     steps:
#       # Step 1: Checkout repository
#       - name: Checkout repository
#         uses: actions/checkout@v4

#       # Step 2: Debug - List all PlantUML diagrams
#       - name: List all PlantUML files
#         run: |
#           echo "Checking PlantUML files in docs/architecture..."
#           find docs/architecture -type f -name "*.puml" -print || echo "No .puml files found!"

#       # Step 3: Generate PlantUML diagrams as SVG inside docs/architecture
#       - name: Generate PlantUML diagrams
#         run: |
#           mkdir -p docs/architecture
#           # Process each .puml file
#           find docs/architecture -type f -name "*.puml" | while read file; do
#             # Compute relative path inside docs/architecture
#             relpath="${file#docs/architecture/}"
#             outdir="docs/architecture/$(dirname "$relpath")"
#             mkdir -p "$outdir"
#             docker run --rm -v "${{ github.workspace }}:/work" plantuml/plantuml:1.2025.10 \
#               -tsvg "/work/$file" -o "/work/$outdir"
#           done

#       # Step 4: Verify generated SVG files
#       - name: Verify generated SVG files
#         run: |
#           echo "Generated SVG files:"
#           find docs/architecture -type f -name "*.svg"
