[11-01 19:53:02] [info] [] Logger initialized for service 'MessageService'
[11-01 19:53:02] [info] [SQLiteDatabase::initializeSchema] Database schema initialized successfully
[11-01 19:53:02] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message
[11-01 19:53:02] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_status
[11-01 19:53:02] [info] [Server::run] [Message server is started on port '8082'
[11-01 20:03:35] [info] [] Logger initialized for service 'MessageService'
[11-01 20:03:35] [info] [SQLiteDatabase::initializeSchema] Database schema initialized successfully
[11-01 20:03:36] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message
[11-01 20:03:36] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_status
[11-01 20:03:36] [info] [Server::run] [Message server is started on port '8082'
[11-01 20:03:36] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[11-01 20:03:36] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[11-01 20:03:36] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessageStatus' bound to exchange 'app.events' with key 'save_message_status'
[11-01 20:03:36] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message_status' in queue 'QueueSaveMessageStatus'
[11-01 20:03:36] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessage' bound to exchange 'app.events' with key 'save_message'
[11-01 20:03:36] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message' in queue 'QueueSaveMessage'
[11-01 20:25:39] [info] [] Logger initialized for service 'MessageService'
[11-01 20:25:39] [info] [SQLiteDatabase::initializeSchema] Database schema initialized successfully
[11-01 20:25:39] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message
[11-01 20:25:39] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_status
[11-01 20:25:39] [info] [Server::run] [Message server is started on port '8082'
[11-01 20:25:39] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[11-01 20:25:39] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[11-01 20:25:39] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessage' bound to exchange 'app.events' with key 'save_message'
[11-01 20:25:39] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message' in queue 'QueueSaveMessage'
[11-01 20:25:39] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessageStatus' bound to exchange 'app.events' with key 'save_message_status'
[11-01 20:25:39] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message_status' in queue 'QueueSaveMessageStatus'
[11-01 20:34:31] [info] [] Logger initialized for service 'MessageService'
[11-01 20:34:31] [info] [SQLiteDatabase::initializeSchema] Database schema initialized successfully
[11-01 20:34:31] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message
[11-01 20:34:31] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_status
[11-01 20:34:31] [info] [Server::run] [Message server is started on port '8082'
[11-01 20:34:31] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[11-01 20:34:31] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[11-01 20:34:31] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessage' bound to exchange 'app.events' with key 'save_message'
[11-01 20:34:31] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessageStatus' bound to exchange 'app.events' with key 'save_message_status'
[11-01 20:34:31] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message_status' in queue 'QueueSaveMessageStatus'
[11-01 20:34:31] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message' in queue 'QueueSaveMessage'
[11-01 20:44:19] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[11-01 20:44:19] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-548589266:params=-1176851807'
[11-01 20:44:19] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[11-01 20:44:19] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[11-01 20:44:19] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20'
[11-01 20:44:19] [info] [] SqlExecutor::execute took 0.009 s
[11-01 20:44:19] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20 succeed
[11-01 20:44:19] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-548589266:params=-1176851807 - [] for 860325 seconds
[11-01 20:44:19] [info] [SelectQuery<Message>::execute] Results has 0 size
[11-01 20:44:19] [info] [] Send responce code 200 and body []
[11-01 20:44:19] [info] [] Server::handleGetMessagesFromChat took 0.052 s
[11-01 20:50:56] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[11-01 20:50:56] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[11-01 20:50:56] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-548589266:params=-1176851807'
[11-01 20:50:56] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-548589266:params=-1176851807'
[11-01 20:50:56] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '0'
[11-01 20:50:56] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '0'
[11-01 20:50:56] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-548589266:params=-1176851807
[11-01 20:50:56] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-548589266:params=-1176851807
[11-01 20:50:56] [info] [] Send responce code 200 and body []
[11-01 20:50:56] [info] [] Send responce code 200 and body []
[11-01 20:50:56] [info] [] Server::handleGetMessagesFromChat took 0.023 s
[11-01 20:50:56] [info] [] Server::handleGetMessagesFromChat took 0.023 s
[11-01 20:51:00] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"chat_id":7416185797688197120,"event":"save_message","id":0,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}
[11-01 20:51:00] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message
[11-01 20:51:00] [info] [Controller::subscribeToSaveMessage] Getted event in subscribeToSaveMessage: save_message and payload {"chat_id":7416185797688197120,"event":"save_message","id":0,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}
[11-01 20:51:00] [info] [Controller::handleSaveMessage] Get message to save with id 0 and text j
[11-01 20:51:00] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages (id, sender_id, chat_id, text, timestamp, local_id) VALUES (?, ?, ?, ?, ?, ?); 
[11-01 20:51:00] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":true,"message_id":0,"read_at":1768157460,"receiver_id":7416184085095137280}
[11-01 20:51:00] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 20:51:00] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":true,"message_id":0,"read_at":1768157460,"receiver_id":7416184085095137280}
[11-01 20:51:00] [error] [GenericRepository::save] checkInvariants failed for entity {"is_read":true,"message_id":0,"read_at":1768157460,"receiver_id":7416184085095137280}
[11-01 20:51:00] [error] [Controller::handleSaveMessageStatus] Error saving message_status id 0
[11-01 20:51:00] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages (id, sender_id, chat_id, text, timestamp, local_id) VALUES (?, ?, ?, ?, ?, ?); 
[11-01 20:51:00] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages (id, sender_id, chat_id, text, timestamp, local_id) VALUES (?, ?, ?, ?, ?, ?); '
[11-01 20:51:00] [info] [] SqlExecutor::execute took 0.011 s
[11-01 20:51:00] [info] [GenericRepository::save] Save succeed for json: {"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}
[11-01 20:51:00] [info] [RedisCache::set] Set entity_cache:messages:7416189909339258880 - {"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460} for 704989 seconds
[11-01 20:51:00] [info] [RabbitMQClient::publish] Publish: app.events | message_saved
[11-01 20:51:00] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 20:51:00] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}' to exchange 'app.events' with key 'direct'
[11-01 20:51:00] [info] [RabbitMQClient::publish] [rabbit] Published message '{"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}' to exchange 'app.events' with key 'direct'
[11-01 20:51:00] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":false,"message_id":7416189909339258880,"read_at":0,"receiver_id":7416183787446353920}
[11-01 20:51:00] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 20:51:00] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":false,"message_id":7416189909339258880,"read_at":0,"receiver_id":7416183787446353920}
[11-01 20:51:00] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 20:51:00] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 20:51:00] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[11-01 20:51:00] [info] [] SqlExecutor::execute took 0.001 s
[11-01 20:51:00] [info] [GenericRepository::save] Save succeed for json: {"is_read":false,"message_id":7416189909339258880,"read_at":0,"receiver_id":7416183787446353920}
[11-01 20:51:00] [info] [RedisCache::set] Set entity_cache:messages_status:7416189909339258880 - {"is_read":false,"message_id":7416189909339258880,"read_at":0,"receiver_id":7416183787446353920} for 622238 seconds
[11-01 20:51:00] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[11-01 20:51:00] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 20:51:00] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":false,"message_id":7416189909339258880,"read_at":0,"receiver_id":7416184085095137280}
[11-01 20:51:00] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 20:51:00] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":false,"message_id":7416189909339258880,"read_at":0,"receiver_id":7416184085095137280}
[11-01 20:51:00] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 20:51:00] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 20:51:00] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":false,"message_id":7416189909339258880,"read_at":0,"receiver_id":7416183787446353920}' to exchange 'app.events' with key 'direct'
[11-01 20:51:00] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[11-01 20:51:00] [info] [] SqlExecutor::execute took 0.001 s
[11-01 20:51:00] [info] [GenericRepository::save] Save succeed for json: {"is_read":false,"message_id":7416189909339258880,"read_at":0,"receiver_id":7416184085095137280}
[11-01 20:51:00] [info] [RedisCache::set] Set entity_cache:messages_status:7416189909339258880 - {"is_read":false,"message_id":7416189909339258880,"read_at":0,"receiver_id":7416184085095137280} for 300 seconds
[11-01 20:51:00] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[11-01 20:51:00] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 20:51:00] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":false,"message_id":7416189909339258880,"read_at":0,"receiver_id":7416183787446353920}' to exchange 'app.events' with key 'direct'
[11-01 20:51:00] [info] [Controller::getMessageById] getMessageById 7416189909339258880
[11-01 20:51:00] [info] [GenericRepository::findOne] Id in dindOne 7416189909339258880
[11-01 20:51:00] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":false,"message_id":7416189909339258880,"read_at":0,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 20:51:00] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-490747869:params=-1718783843'
[11-01 20:51:00] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages WHERE id = ? LIMIT 1
[11-01 20:51:00] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages WHERE id = ? LIMIT 1
[11-01 20:51:00] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages WHERE id = ? LIMIT 1'
[11-01 20:51:00] [info] [] SqlExecutor::execute took 0.001 s
[11-01 20:51:00] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages WHERE id = ? LIMIT 1 succeed
[11-01 20:51:00] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}
[11-01 20:51:00] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":false,"message_id":7416189909339258880,"read_at":0,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 20:51:00] [info] [Controller::getMessageById] getMessageById 7416189909339258880
[11-01 20:51:00] [info] [GenericRepository::findOne] Id in dindOne 7416189909339258880
[11-01 20:51:00] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-490747869:params=-1718783843 - [{"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}] for 405464 seconds
[11-01 20:51:00] [info] [SelectQuery<Message>::execute] Results has 1 size
[11-01 20:51:00] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}
[11-01 20:51:00] [info] [] Server::handleGetMessage took 0.004 s
[11-01 20:51:00] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-490747869:params=-1718783843'
[11-01 20:51:00] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[11-01 20:51:00] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-490747869:params=-1718783843
[11-01 20:51:00] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}
[11-01 20:51:00] [info] [] Server::handleGetMessage took 0.001 s
[11-01 20:51:00] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":true,"message_id":7416189909339258880,"read_at":1768157460,"receiver_id":7416184085095137280}
[11-01 20:51:00] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 20:51:00] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":true,"message_id":7416189909339258880,"read_at":1768157460,"receiver_id":7416184085095137280}
[11-01 20:51:00] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 20:51:00] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 20:51:00] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[11-01 20:51:00] [info] [] SqlExecutor::execute took 0.001 s
[11-01 20:51:00] [info] [GenericRepository::save] Save succeed for json: {"is_read":true,"message_id":7416189909339258880,"read_at":1768157460,"receiver_id":7416184085095137280}
[11-01 20:51:00] [info] [RedisCache::set] Set entity_cache:messages_status:7416189909339258880 - {"is_read":true,"message_id":7416189909339258880,"read_at":1768157460,"receiver_id":7416184085095137280} for 167437 seconds
[11-01 20:51:00] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[11-01 20:51:00] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 20:51:00] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":true,"message_id":7416189909339258880,"read_at":1768157460,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 20:51:00] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":true,"message_id":7416189909339258880,"read_at":1768157460,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 20:51:00] [info] [Controller::getMessageById] getMessageById 7416189909339258880
[11-01 20:51:00] [info] [GenericRepository::findOne] Id in dindOne 7416189909339258880
[11-01 20:51:00] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-490747869:params=-1718783843'
[11-01 20:51:00] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[11-01 20:51:00] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-490747869:params=-1718783843
[11-01 20:51:00] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}
[11-01 20:51:00] [info] [] Server::handleGetMessage took 0.001 s
[11-01 20:51:04] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"chat_id":7416185797688197120,"event":"save_message","id":0,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464}
[11-01 20:51:04] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message
[11-01 20:51:04] [info] [Controller::subscribeToSaveMessage] Getted event in subscribeToSaveMessage: save_message and payload {"chat_id":7416185797688197120,"event":"save_message","id":0,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464}
[11-01 20:51:04] [info] [Controller::handleSaveMessage] Get message to save with id 0 and text jo
[11-01 20:51:04] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages (id, sender_id, chat_id, text, timestamp, local_id) VALUES (?, ?, ?, ?, ?, ?); 
[11-01 20:51:04] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages (id, sender_id, chat_id, text, timestamp, local_id) VALUES (?, ?, ?, ?, ?, ?); 
[11-01 20:51:04] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages (id, sender_id, chat_id, text, timestamp, local_id) VALUES (?, ?, ?, ?, ?, ?); '
[11-01 20:51:04] [info] [] SqlExecutor::execute took 0.002 s
[11-01 20:51:04] [info] [GenericRepository::save] Save succeed for json: {"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464}
[11-01 20:51:04] [info] [RedisCache::set] Set entity_cache:messages:7416189927567704064 - {"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464} for 772800 seconds
[11-01 20:51:04] [info] [RabbitMQClient::publish] Publish: app.events | message_saved
[11-01 20:51:04] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 20:51:04] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464}' to exchange 'app.events' with key 'direct'
[11-01 20:51:04] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":true,"message_id":0,"read_at":1768157464,"receiver_id":7416184085095137280}
[11-01 20:51:04] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 20:51:04] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":true,"message_id":0,"read_at":1768157464,"receiver_id":7416184085095137280}
[11-01 20:51:04] [error] [GenericRepository::save] checkInvariants failed for entity {"is_read":true,"message_id":0,"read_at":1768157464,"receiver_id":7416184085095137280}
[11-01 20:51:04] [error] [Controller::handleSaveMessageStatus] Error saving message_status id 0
[11-01 20:51:04] [info] [RabbitMQClient::publish] [rabbit] Published message '{"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464}' to exchange 'app.events' with key 'direct'
[11-01 20:51:04] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":false,"message_id":7416189927567704064,"read_at":0,"receiver_id":7416183787446353920}
[11-01 20:51:04] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 20:51:04] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":false,"message_id":7416189927567704064,"read_at":0,"receiver_id":7416183787446353920}
[11-01 20:51:04] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 20:51:04] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 20:51:04] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[11-01 20:51:04] [info] [] SqlExecutor::execute took 0.001 s
[11-01 20:51:04] [info] [GenericRepository::save] Save succeed for json: {"is_read":false,"message_id":7416189927567704064,"read_at":0,"receiver_id":7416183787446353920}
[11-01 20:51:04] [info] [RedisCache::set] Set entity_cache:messages_status:7416189927567704064 - {"is_read":false,"message_id":7416189927567704064,"read_at":0,"receiver_id":7416183787446353920} for 888847 seconds
[11-01 20:51:04] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[11-01 20:51:04] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 20:51:04] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":false,"message_id":7416189927567704064,"read_at":0,"receiver_id":7416183787446353920}' to exchange 'app.events' with key 'direct'
[11-01 20:51:04] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":false,"message_id":7416189927567704064,"read_at":0,"receiver_id":7416184085095137280}
[11-01 20:51:04] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 20:51:04] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":false,"message_id":7416189927567704064,"read_at":0,"receiver_id":7416184085095137280}
[11-01 20:51:04] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 20:51:04] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 20:51:04] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":false,"message_id":7416189927567704064,"read_at":0,"receiver_id":7416183787446353920}' to exchange 'app.events' with key 'direct'
[11-01 20:51:04] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[11-01 20:51:04] [info] [] SqlExecutor::execute took 0.001 s
[11-01 20:51:04] [info] [GenericRepository::save] Save succeed for json: {"is_read":false,"message_id":7416189927567704064,"read_at":0,"receiver_id":7416184085095137280}
[11-01 20:51:04] [info] [RedisCache::set] Set entity_cache:messages_status:7416189927567704064 - {"is_read":false,"message_id":7416189927567704064,"read_at":0,"receiver_id":7416184085095137280} for 300 seconds
[11-01 20:51:04] [info] [Controller::getMessageById] getMessageById 7416189927567704064
[11-01 20:51:04] [info] [GenericRepository::findOne] Id in dindOne 7416189927567704064
[11-01 20:51:04] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[11-01 20:51:04] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 20:51:04] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=2799911:params=1025161219'
[11-01 20:51:04] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages WHERE id = ? LIMIT 1
[11-01 20:51:04] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages WHERE id = ? LIMIT 1
[11-01 20:51:04] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages WHERE id = ? LIMIT 1'
[11-01 20:51:04] [info] [] SqlExecutor::execute took 0.001 s
[11-01 20:51:04] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages WHERE id = ? LIMIT 1 succeed
[11-01 20:51:04] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464}
[11-01 20:51:04] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=2799911:params=1025161219 - [{"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464}] for 300 seconds
[11-01 20:51:04] [info] [SelectQuery<Message>::execute] Results has 1 size
[11-01 20:51:04] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464}
[11-01 20:51:04] [info] [] Server::handleGetMessage took 0.005 s
[11-01 20:51:04] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":false,"message_id":7416189927567704064,"read_at":0,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 20:51:04] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":false,"message_id":7416189927567704064,"read_at":0,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 20:51:04] [info] [Controller::getMessageById] getMessageById 7416189927567704064
[11-01 20:51:04] [info] [GenericRepository::findOne] Id in dindOne 7416189927567704064
[11-01 20:51:04] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":true,"message_id":7416189927567704064,"read_at":1768157464,"receiver_id":7416184085095137280}
[11-01 20:51:04] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 20:51:04] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":true,"message_id":7416189927567704064,"read_at":1768157464,"receiver_id":7416184085095137280}
[11-01 20:51:04] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=2799911:params=1025161219'
[11-01 20:51:04] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 20:51:04] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[11-01 20:51:04] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=2799911:params=1025161219
[11-01 20:51:04] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 20:51:04] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464}
[11-01 20:51:04] [info] [] Server::handleGetMessage took 0.001 s
[11-01 20:51:04] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[11-01 20:51:04] [info] [] SqlExecutor::execute took 0.001 s
[11-01 20:51:04] [info] [GenericRepository::save] Save succeed for json: {"is_read":true,"message_id":7416189927567704064,"read_at":1768157464,"receiver_id":7416184085095137280}
[11-01 20:51:04] [info] [RedisCache::set] Set entity_cache:messages_status:7416189927567704064 - {"is_read":true,"message_id":7416189927567704064,"read_at":1768157464,"receiver_id":7416184085095137280} for 300 seconds
[11-01 20:51:04] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[11-01 20:51:04] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 20:51:04] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":true,"message_id":7416189927567704064,"read_at":1768157464,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 20:51:04] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":true,"message_id":7416189927567704064,"read_at":1768157464,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 20:51:04] [info] [Controller::getMessageById] getMessageById 7416189927567704064
[11-01 20:51:04] [info] [GenericRepository::findOne] Id in dindOne 7416189927567704064
[11-01 20:51:04] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=2799911:params=1025161219'
[11-01 20:51:04] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[11-01 20:51:04] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=2799911:params=1025161219
[11-01 20:51:04] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464}
[11-01 20:51:04] [info] [] Server::handleGetMessage took 0.001 s
[11-01 20:51:08] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"chat_id":7416185797688197120,"event":"save_message","id":0,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468}
[11-01 20:51:08] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message
[11-01 20:51:08] [info] [Controller::subscribeToSaveMessage] Getted event in subscribeToSaveMessage: save_message and payload {"chat_id":7416185797688197120,"event":"save_message","id":0,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468}
[11-01 20:51:08] [info] [Controller::handleSaveMessage] Get message to save with id 0 and text joo
[11-01 20:51:08] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages (id, sender_id, chat_id, text, timestamp, local_id) VALUES (?, ?, ?, ?, ?, ?); 
[11-01 20:51:08] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages (id, sender_id, chat_id, text, timestamp, local_id) VALUES (?, ?, ?, ?, ?, ?); 
[11-01 20:51:08] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages (id, sender_id, chat_id, text, timestamp, local_id) VALUES (?, ?, ?, ?, ?, ?); '
[11-01 20:51:08] [info] [] SqlExecutor::execute took 0.002 s
[11-01 20:51:08] [info] [GenericRepository::save] Save succeed for json: {"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468}
[11-01 20:51:08] [info] [RedisCache::set] Set entity_cache:messages:7416189940708458496 - {"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468} for 300 seconds
[11-01 20:51:08] [info] [RabbitMQClient::publish] Publish: app.events | message_saved
[11-01 20:51:08] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 20:51:08] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468}' to exchange 'app.events' with key 'direct'
[11-01 20:51:08] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":true,"message_id":0,"read_at":1768157468,"receiver_id":7416184085095137280}
[11-01 20:51:08] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 20:51:08] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":true,"message_id":0,"read_at":1768157468,"receiver_id":7416184085095137280}
[11-01 20:51:08] [error] [GenericRepository::save] checkInvariants failed for entity {"is_read":true,"message_id":0,"read_at":1768157468,"receiver_id":7416184085095137280}
[11-01 20:51:08] [error] [Controller::handleSaveMessageStatus] Error saving message_status id 0
[11-01 20:51:08] [info] [RabbitMQClient::publish] [rabbit] Published message '{"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468}' to exchange 'app.events' with key 'direct'
[11-01 20:51:08] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":false,"message_id":7416189940708458496,"read_at":0,"receiver_id":7416183787446353920}
[11-01 20:51:08] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 20:51:08] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":false,"message_id":7416189940708458496,"read_at":0,"receiver_id":7416183787446353920}
[11-01 20:51:08] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 20:51:08] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 20:51:08] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[11-01 20:51:08] [info] [] SqlExecutor::execute took 0.001 s
[11-01 20:51:08] [info] [GenericRepository::save] Save succeed for json: {"is_read":false,"message_id":7416189940708458496,"read_at":0,"receiver_id":7416183787446353920}
[11-01 20:51:08] [info] [RedisCache::set] Set entity_cache:messages_status:7416189940708458496 - {"is_read":false,"message_id":7416189940708458496,"read_at":0,"receiver_id":7416183787446353920} for 1533345 seconds
[11-01 20:51:08] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[11-01 20:51:08] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 20:51:08] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":false,"message_id":7416189940708458496,"read_at":0,"receiver_id":7416183787446353920}' to exchange 'app.events' with key 'direct'
[11-01 20:51:08] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":false,"message_id":7416189940708458496,"read_at":0,"receiver_id":7416184085095137280}
[11-01 20:51:08] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 20:51:08] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":false,"message_id":7416189940708458496,"read_at":0,"receiver_id":7416184085095137280}
[11-01 20:51:08] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 20:51:08] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 20:51:08] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[11-01 20:51:08] [info] [] SqlExecutor::execute took 0.001 s
[11-01 20:51:08] [info] [GenericRepository::save] Save succeed for json: {"is_read":false,"message_id":7416189940708458496,"read_at":0,"receiver_id":7416184085095137280}
[11-01 20:51:08] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":false,"message_id":7416189940708458496,"read_at":0,"receiver_id":7416183787446353920}' to exchange 'app.events' with key 'direct'
[11-01 20:51:08] [info] [RedisCache::set] Set entity_cache:messages_status:7416189940708458496 - {"is_read":false,"message_id":7416189940708458496,"read_at":0,"receiver_id":7416184085095137280} for 300 seconds
[11-01 20:51:08] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[11-01 20:51:08] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 20:51:08] [info] [Controller::getMessageById] getMessageById 7416189940708458496
[11-01 20:51:08] [info] [GenericRepository::findOne] Id in dindOne 7416189940708458496
[11-01 20:51:08] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-558507659:params=1564855433'
[11-01 20:51:08] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages WHERE id = ? LIMIT 1
[11-01 20:51:08] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages WHERE id = ? LIMIT 1
[11-01 20:51:08] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages WHERE id = ? LIMIT 1'
[11-01 20:51:08] [info] [] SqlExecutor::execute took 0.001 s
[11-01 20:51:08] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages WHERE id = ? LIMIT 1 succeed
[11-01 20:51:08] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468}
[11-01 20:51:08] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-558507659:params=1564855433 - [{"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468}] for 300 seconds
[11-01 20:51:08] [info] [SelectQuery<Message>::execute] Results has 1 size
[11-01 20:51:08] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468}
[11-01 20:51:08] [info] [] Server::handleGetMessage took 0.005 s
[11-01 20:51:08] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":false,"message_id":7416189940708458496,"read_at":0,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 20:51:08] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":false,"message_id":7416189940708458496,"read_at":0,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 20:51:08] [info] [Controller::getMessageById] getMessageById 7416189940708458496
[11-01 20:51:08] [info] [GenericRepository::findOne] Id in dindOne 7416189940708458496
[11-01 20:51:08] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-558507659:params=1564855433'
[11-01 20:51:08] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[11-01 20:51:08] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-558507659:params=1564855433
[11-01 20:51:08] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468}
[11-01 20:51:08] [info] [] Server::handleGetMessage took 0.001 s
[11-01 20:51:08] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":true,"message_id":7416189940708458496,"read_at":1768157468,"receiver_id":7416184085095137280}
[11-01 20:51:08] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 20:51:08] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":true,"message_id":7416189940708458496,"read_at":1768157468,"receiver_id":7416184085095137280}
[11-01 20:51:08] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 20:51:08] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 20:51:08] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[11-01 20:51:08] [info] [] SqlExecutor::execute took 0.001 s
[11-01 20:51:08] [info] [GenericRepository::save] Save succeed for json: {"is_read":true,"message_id":7416189940708458496,"read_at":1768157468,"receiver_id":7416184085095137280}
[11-01 20:51:08] [info] [RedisCache::set] Set entity_cache:messages_status:7416189940708458496 - {"is_read":true,"message_id":7416189940708458496,"read_at":1768157468,"receiver_id":7416184085095137280} for 300 seconds
[11-01 20:51:08] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[11-01 20:51:08] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 20:51:08] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":true,"message_id":7416189940708458496,"read_at":1768157468,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 20:51:08] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":true,"message_id":7416189940708458496,"read_at":1768157468,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 20:51:08] [info] [Controller::getMessageById] getMessageById 7416189940708458496
[11-01 20:51:08] [info] [GenericRepository::findOne] Id in dindOne 7416189940708458496
[11-01 20:51:08] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-558507659:params=1564855433'
[11-01 20:51:08] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[11-01 20:51:08] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-558507659:params=1564855433
[11-01 20:51:08] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468}
[11-01 20:51:08] [info] [] Server::handleGetMessage took 0.001 s
[11-01 21:01:18] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"chat_id":7416185797688197120,"event":"save_message","id":0,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078}
[11-01 21:01:18] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message
[11-01 21:01:18] [info] [Controller::subscribeToSaveMessage] Getted event in subscribeToSaveMessage: save_message and payload {"chat_id":7416185797688197120,"event":"save_message","id":0,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078}
[11-01 21:01:18] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":true,"message_id":0,"read_at":1768158078,"receiver_id":7416184085095137280}
[11-01 21:01:18] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 21:01:18] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":true,"message_id":0,"read_at":1768158078,"receiver_id":7416184085095137280}
[11-01 21:01:18] [info] [Controller::handleSaveMessage] Get message to save with id 0 and text p
[11-01 21:01:18] [error] [GenericRepository::save] checkInvariants failed for entity {"is_read":true,"message_id":0,"read_at":1768158078,"receiver_id":7416184085095137280}
[11-01 21:01:18] [error] [Controller::handleSaveMessageStatus] Error saving message_status id 0
[11-01 21:01:18] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages (id, sender_id, chat_id, text, timestamp, local_id) VALUES (?, ?, ?, ?, ?, ?); 
[11-01 21:01:18] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages (id, sender_id, chat_id, text, timestamp, local_id) VALUES (?, ?, ?, ?, ?, ?); 
[11-01 21:01:18] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages (id, sender_id, chat_id, text, timestamp, local_id) VALUES (?, ?, ?, ?, ?, ?); '
[11-01 21:01:18] [info] [] SqlExecutor::execute took 0.009 s
[11-01 21:01:18] [info] [GenericRepository::save] Save succeed for json: {"chat_id":7416185797688197120,"id":7416192499326173184,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078}
[11-01 21:01:18] [info] [RedisCache::set] Set entity_cache:messages:7416192499326173184 - {"chat_id":7416185797688197120,"id":7416192499326173184,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078} for 300 seconds
[11-01 21:01:18] [info] [RabbitMQClient::publish] Publish: app.events | message_saved
[11-01 21:01:18] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 21:01:18] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"chat_id":7416185797688197120,"id":7416192499326173184,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078}' to exchange 'app.events' with key 'direct'
[11-01 21:01:18] [info] [RabbitMQClient::publish] [rabbit] Published message '{"chat_id":7416185797688197120,"id":7416192499326173184,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078}' to exchange 'app.events' with key 'direct'
[11-01 21:01:18] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":false,"message_id":7416192499326173184,"read_at":0,"receiver_id":7416183787446353920}
[11-01 21:01:18] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 21:01:18] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":false,"message_id":7416192499326173184,"read_at":0,"receiver_id":7416183787446353920}
[11-01 21:01:18] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:01:18] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:01:18] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[11-01 21:01:18] [info] [] SqlExecutor::execute took 0.001 s
[11-01 21:01:18] [info] [GenericRepository::save] Save succeed for json: {"is_read":false,"message_id":7416192499326173184,"read_at":0,"receiver_id":7416183787446353920}
[11-01 21:01:18] [info] [RedisCache::set] Set entity_cache:messages_status:7416192499326173184 - {"is_read":false,"message_id":7416192499326173184,"read_at":0,"receiver_id":7416183787446353920} for 300 seconds
[11-01 21:01:18] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[11-01 21:01:18] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 21:01:18] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":false,"message_id":7416192499326173184,"read_at":0,"receiver_id":7416184085095137280}
[11-01 21:01:18] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 21:01:18] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":false,"message_id":7416192499326173184,"read_at":0,"receiver_id":7416184085095137280}
[11-01 21:01:18] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:01:18] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:01:18] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[11-01 21:01:18] [info] [] SqlExecutor::execute took 0.001 s
[11-01 21:01:18] [info] [GenericRepository::save] Save succeed for json: {"is_read":false,"message_id":7416192499326173184,"read_at":0,"receiver_id":7416184085095137280}
[11-01 21:01:18] [info] [RedisCache::set] Set entity_cache:messages_status:7416192499326173184 - {"is_read":false,"message_id":7416192499326173184,"read_at":0,"receiver_id":7416184085095137280} for 300 seconds
[11-01 21:01:18] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[11-01 21:01:18] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 21:01:18] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":false,"message_id":7416192499326173184,"read_at":0,"receiver_id":7416183787446353920}' to exchange 'app.events' with key 'direct'
[11-01 21:01:18] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":false,"message_id":7416192499326173184,"read_at":0,"receiver_id":7416183787446353920}' to exchange 'app.events' with key 'direct'
[11-01 21:01:18] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":false,"message_id":7416192499326173184,"read_at":0,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:01:18] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":false,"message_id":7416192499326173184,"read_at":0,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:01:18] [info] [Controller::getMessageById] getMessageById 7416192499326173184
[11-01 21:01:18] [info] [Controller::getMessageById] getMessageById 7416192499326173184
[11-01 21:01:18] [info] [GenericRepository::findOne] Id in dindOne 7416192499326173184
[11-01 21:01:18] [info] [GenericRepository::findOne] Id in dindOne 7416192499326173184
[11-01 21:01:18] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-758736715:params=128914460'
[11-01 21:01:18] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages WHERE id = ? LIMIT 1
[11-01 21:01:18] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-758736715:params=128914460'
[11-01 21:01:18] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages WHERE id = ? LIMIT 1
[11-01 21:01:18] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages WHERE id = ? LIMIT 1
[11-01 21:01:18] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages WHERE id = ? LIMIT 1
[11-01 21:01:18] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":true,"message_id":7416192499326173184,"read_at":1768158078,"receiver_id":7416184085095137280}
[11-01 21:01:18] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 21:01:18] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":true,"message_id":7416192499326173184,"read_at":1768158078,"receiver_id":7416184085095137280}
[11-01 21:01:18] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:01:18] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:01:18] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages WHERE id = ? LIMIT 1'
[11-01 21:01:18] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages WHERE id = ? LIMIT 1'
[11-01 21:01:18] [info] [] SqlExecutor::execute took 0.002 s
[11-01 21:01:18] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages WHERE id = ? LIMIT 1 succeed
[11-01 21:01:18] [info] [] SqlExecutor::execute took 0.002 s
[11-01 21:01:18] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages WHERE id = ? LIMIT 1 succeed
[11-01 21:01:18] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416192499326173184,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078}
[11-01 21:01:18] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416192499326173184,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078}
[11-01 21:01:18] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[11-01 21:01:18] [info] [] SqlExecutor::execute took 0.002 s
[11-01 21:01:18] [info] [GenericRepository::save] Save succeed for json: {"is_read":true,"message_id":7416192499326173184,"read_at":1768158078,"receiver_id":7416184085095137280}
[11-01 21:01:18] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-758736715:params=128914460 - [{"chat_id":7416185797688197120,"id":7416192499326173184,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078}] for 1125651 seconds
[11-01 21:01:18] [info] [SelectQuery<Message>::execute] Results has 1 size
[11-01 21:01:18] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-758736715:params=128914460 - [{"chat_id":7416185797688197120,"id":7416192499326173184,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078}] for 300 seconds
[11-01 21:01:18] [info] [SelectQuery<Message>::execute] Results has 1 size
[11-01 21:01:18] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416192499326173184,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078}
[11-01 21:01:18] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416192499326173184,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078}
[11-01 21:01:18] [info] [RedisCache::set] Set entity_cache:messages_status:7416192499326173184 - {"is_read":true,"message_id":7416192499326173184,"read_at":1768158078,"receiver_id":7416184085095137280} for 300 seconds
[11-01 21:01:18] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[11-01 21:01:18] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 21:01:18] [info] [] Server::handleGetMessage took 0.005 s
[11-01 21:01:18] [info] [] Server::handleGetMessage took 0.005 s
[11-01 21:01:18] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":true,"message_id":7416192499326173184,"read_at":1768158078,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:01:18] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":true,"message_id":7416192499326173184,"read_at":1768158078,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:01:18] [info] [Controller::getMessageById] getMessageById 7416192499326173184
[11-01 21:01:18] [info] [GenericRepository::findOne] Id in dindOne 7416192499326173184
[11-01 21:01:18] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-758736715:params=128914460'
[11-01 21:01:18] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[11-01 21:01:18] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-758736715:params=128914460
[11-01 21:01:18] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416192499326173184,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078}
[11-01 21:01:18] [info] [] Server::handleGetMessage took 0.001 s
[11-01 21:01:19] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"chat_id":7416185797688197120,"event":"save_message","id":0,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","sender_id":7416184085095137280,"text":"pp","timestamp":1768158079}
[11-01 21:01:19] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message
[11-01 21:01:19] [info] [Controller::subscribeToSaveMessage] Getted event in subscribeToSaveMessage: save_message and payload {"chat_id":7416185797688197120,"event":"save_message","id":0,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","sender_id":7416184085095137280,"text":"pp","timestamp":1768158079}
[11-01 21:01:19] [info] [Controller::handleSaveMessage] Get message to save with id 0 and text pp
[11-01 21:01:19] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages (id, sender_id, chat_id, text, timestamp, local_id) VALUES (?, ?, ?, ?, ?, ?); 
[11-01 21:01:19] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages (id, sender_id, chat_id, text, timestamp, local_id) VALUES (?, ?, ?, ?, ?, ?); 
[11-01 21:01:19] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages (id, sender_id, chat_id, text, timestamp, local_id) VALUES (?, ?, ?, ?, ?, ?); '
[11-01 21:01:19] [info] [] SqlExecutor::execute took 0.002 s
[11-01 21:01:19] [info] [GenericRepository::save] Save succeed for json: {"chat_id":7416185797688197120,"id":7416192506552958976,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","sender_id":7416184085095137280,"text":"pp","timestamp":1768158079}
[11-01 21:01:19] [info] [RedisCache::set] Set entity_cache:messages:7416192506552958976 - {"chat_id":7416185797688197120,"id":7416192506552958976,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","sender_id":7416184085095137280,"text":"pp","timestamp":1768158079} for 1721271 seconds
[11-01 21:01:19] [info] [RabbitMQClient::publish] Publish: app.events | message_saved
[11-01 21:01:19] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 21:01:19] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"chat_id":7416185797688197120,"id":7416192506552958976,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","sender_id":7416184085095137280,"text":"pp","timestamp":1768158079}' to exchange 'app.events' with key 'direct'
[11-01 21:01:19] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":true,"message_id":0,"read_at":1768158079,"receiver_id":7416184085095137280}
[11-01 21:01:19] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 21:01:19] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":true,"message_id":0,"read_at":1768158079,"receiver_id":7416184085095137280}
[11-01 21:01:19] [error] [GenericRepository::save] checkInvariants failed for entity {"is_read":true,"message_id":0,"read_at":1768158079,"receiver_id":7416184085095137280}
[11-01 21:01:19] [error] [Controller::handleSaveMessageStatus] Error saving message_status id 0
[11-01 21:01:19] [info] [RabbitMQClient::publish] [rabbit] Published message '{"chat_id":7416185797688197120,"id":7416192506552958976,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","sender_id":7416184085095137280,"text":"pp","timestamp":1768158079}' to exchange 'app.events' with key 'direct'
[11-01 21:01:19] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":false,"message_id":7416192506552958976,"read_at":0,"receiver_id":7416183787446353920}
[11-01 21:01:19] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 21:01:19] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":false,"message_id":7416192506552958976,"read_at":0,"receiver_id":7416183787446353920}
[11-01 21:01:19] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:01:19] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:01:19] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[11-01 21:01:19] [info] [] SqlExecutor::execute took 0.001 s
[11-01 21:01:19] [info] [GenericRepository::save] Save succeed for json: {"is_read":false,"message_id":7416192506552958976,"read_at":0,"receiver_id":7416183787446353920}
[11-01 21:01:19] [info] [RedisCache::set] Set entity_cache:messages_status:7416192506552958976 - {"is_read":false,"message_id":7416192506552958976,"read_at":0,"receiver_id":7416183787446353920} for 300 seconds
[11-01 21:01:19] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[11-01 21:01:19] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 21:01:19] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":false,"message_id":7416192506552958976,"read_at":0,"receiver_id":7416183787446353920}' to exchange 'app.events' with key 'direct'
[11-01 21:01:19] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":false,"message_id":7416192506552958976,"read_at":0,"receiver_id":7416184085095137280}
[11-01 21:01:19] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 21:01:19] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":false,"message_id":7416192506552958976,"read_at":0,"receiver_id":7416184085095137280}
[11-01 21:01:19] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:01:19] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:01:19] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":false,"message_id":7416192506552958976,"read_at":0,"receiver_id":7416183787446353920}' to exchange 'app.events' with key 'direct'
[11-01 21:01:19] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[11-01 21:01:19] [info] [] SqlExecutor::execute took 0.001 s
[11-01 21:01:19] [info] [GenericRepository::save] Save succeed for json: {"is_read":false,"message_id":7416192506552958976,"read_at":0,"receiver_id":7416184085095137280}
[11-01 21:01:19] [info] [RedisCache::set] Set entity_cache:messages_status:7416192506552958976 - {"is_read":false,"message_id":7416192506552958976,"read_at":0,"receiver_id":7416184085095137280} for 300 seconds
[11-01 21:01:19] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[11-01 21:01:19] [info] [Controller::getMessageById] getMessageById 7416192506552958976
[11-01 21:01:19] [info] [GenericRepository::findOne] Id in dindOne 7416192506552958976
[11-01 21:01:19] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 21:01:19] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=167354303'
[11-01 21:01:19] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages WHERE id = ? LIMIT 1
[11-01 21:01:19] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages WHERE id = ? LIMIT 1
[11-01 21:01:19] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages WHERE id = ? LIMIT 1'
[11-01 21:01:19] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:01:19] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages WHERE id = ? LIMIT 1 succeed
[11-01 21:01:19] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416192506552958976,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","sender_id":7416184085095137280,"text":"pp","timestamp":1768158079}
[11-01 21:01:19] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=167354303 - [{"chat_id":7416185797688197120,"id":7416192506552958976,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","sender_id":7416184085095137280,"text":"pp","timestamp":1768158079}] for 661382 seconds
[11-01 21:01:19] [info] [SelectQuery<Message>::execute] Results has 1 size
[11-01 21:01:19] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416192506552958976,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","sender_id":7416184085095137280,"text":"pp","timestamp":1768158079}
[11-01 21:01:19] [info] [] Server::handleGetMessage took 0.004 s
[11-01 21:01:19] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":false,"message_id":7416192506552958976,"read_at":0,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:01:19] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":false,"message_id":7416192506552958976,"read_at":0,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:01:19] [info] [Controller::getMessageById] getMessageById 7416192506552958976
[11-01 21:01:19] [info] [GenericRepository::findOne] Id in dindOne 7416192506552958976
[11-01 21:01:19] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=167354303'
[11-01 21:01:19] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[11-01 21:01:19] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=167354303
[11-01 21:01:19] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416192506552958976,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","sender_id":7416184085095137280,"text":"pp","timestamp":1768158079}
[11-01 21:01:19] [info] [] Server::handleGetMessage took 0.001 s
[11-01 21:01:19] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":true,"message_id":7416192506552958976,"read_at":1768158079,"receiver_id":7416184085095137280}
[11-01 21:01:19] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 21:01:19] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":true,"message_id":7416192506552958976,"read_at":1768158079,"receiver_id":7416184085095137280}
[11-01 21:01:19] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:01:19] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:01:19] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[11-01 21:01:19] [info] [] SqlExecutor::execute took 0.001 s
[11-01 21:01:19] [info] [GenericRepository::save] Save succeed for json: {"is_read":true,"message_id":7416192506552958976,"read_at":1768158079,"receiver_id":7416184085095137280}
[11-01 21:01:19] [info] [RedisCache::set] Set entity_cache:messages_status:7416192506552958976 - {"is_read":true,"message_id":7416192506552958976,"read_at":1768158079,"receiver_id":7416184085095137280} for 300 seconds
[11-01 21:01:19] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[11-01 21:01:19] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 21:01:19] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":true,"message_id":7416192506552958976,"read_at":1768158079,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:01:19] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":true,"message_id":7416192506552958976,"read_at":1768158079,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:01:19] [info] [Controller::getMessageById] getMessageById 7416192506552958976
[11-01 21:01:19] [info] [GenericRepository::findOne] Id in dindOne 7416192506552958976
[11-01 21:01:19] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=167354303'
[11-01 21:01:19] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[11-01 21:01:19] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=167354303
[11-01 21:01:19] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416192506552958976,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","sender_id":7416184085095137280,"text":"pp","timestamp":1768158079}
[11-01 21:01:19] [info] [] Server::handleGetMessage took 0.001 s
[11-01 21:04:36] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[11-01 21:04:36] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[11-01 21:04:36] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=110813651:params=-1176851807'
[11-01 21:04:36] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[11-01 21:04:36] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=110813651:params=-1176851807'
[11-01 21:04:36] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20'
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20'
[11-01 21:04:36] [info] [] SqlExecutor::execute took 0.007 s
[11-01 21:04:36] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20 succeed
[11-01 21:04:36] [info] [] SqlExecutor::execute took 0.007 s
[11-01 21:04:36] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20 succeed
[11-01 21:04:36] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416192506552958976,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","sender_id":7416184085095137280,"text":"pp","timestamp":1768158079}
[11-01 21:04:36] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416192506552958976,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","sender_id":7416184085095137280,"text":"pp","timestamp":1768158079}
[11-01 21:04:36] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416192499326173184,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078}
[11-01 21:04:36] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416192499326173184,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078}
[11-01 21:04:36] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468}
[11-01 21:04:36] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464}
[11-01 21:04:36] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468}
[11-01 21:04:36] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464}
[11-01 21:04:36] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}
[11-01 21:04:36] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}
[11-01 21:04:36] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=110813651:params=-1176851807 - [{"chat_id":7416185797688197120,"id":7416192506552958976,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","sender_id":7416184085095137280,"text":"pp","timestamp":1768158079},{"chat_id":7416185797688197120,"id":7416192499326173184,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078},{"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468},{"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464},{"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}] for 300 seconds
[11-01 21:04:36] [info] [SelectQuery<Message>::execute] Results has 5 size
[11-01 21:04:36] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=110813651:params=-1176851807 - [{"chat_id":7416185797688197120,"id":7416192506552958976,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","sender_id":7416184085095137280,"text":"pp","timestamp":1768158079},{"chat_id":7416185797688197120,"id":7416192499326173184,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078},{"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468},{"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464},{"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}] for 1113296 seconds
[11-01 21:04:36] [info] [SelectQuery<Message>::execute] Results has 5 size
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1717962120:params=-99716373'
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:04:36] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1717962120:params=-99716373'
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:04:36] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192506552958976,"read_at":1768158079,"receiver_id":7416184085095137280}
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:04:36] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:04:36] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192506552958976,"read_at":1768158079,"receiver_id":7416184085095137280}
[11-01 21:04:36] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1717962120:params=-99716373 - [{"is_read":true,"message_id":7416192506552958976,"read_at":1768158079,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:04:36] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1717962120:params=-99716373 - [{"is_read":true,"message_id":7416192506552958976,"read_at":1768158079,"receiver_id":7416184085095137280}] for 671076 seconds
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1717962120:params=-195495608'
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:04:36] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:04:36] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192499326173184,"read_at":1768158078,"receiver_id":7416184085095137280}
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1717962120:params=-195495608'
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:04:36] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:04:36] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192499326173184,"read_at":1768158078,"receiver_id":7416184085095137280}
[11-01 21:04:36] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1717962120:params=-195495608 - [{"is_read":true,"message_id":7416192499326173184,"read_at":1768158078,"receiver_id":7416184085095137280}] for 173626 seconds
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:04:36] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1717962120:params=-195495608 - [{"is_read":true,"message_id":7416192499326173184,"read_at":1768158078,"receiver_id":7416184085095137280}] for 713880 seconds
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1717962120:params=-1364057635'
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:04:36] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:04:36] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189940708458496,"read_at":1768157468,"receiver_id":7416184085095137280}
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1717962120:params=-1364057635'
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:04:36] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:04:36] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189940708458496,"read_at":1768157468,"receiver_id":7416184085095137280}
[11-01 21:04:36] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1717962120:params=-1364057635 - [{"is_read":true,"message_id":7416189940708458496,"read_at":1768157468,"receiver_id":7416184085095137280}] for 404405 seconds
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:04:36] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1717962120:params=-1364057635 - [{"is_read":true,"message_id":7416189940708458496,"read_at":1768157468,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1717962120:params=-823306921'
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:04:36] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:04:36] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189927567704064,"read_at":1768157464,"receiver_id":7416184085095137280}
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1717962120:params=-823306921'
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:04:36] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:04:36] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189927567704064,"read_at":1768157464,"receiver_id":7416184085095137280}
[11-01 21:04:36] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1717962120:params=-823306921 - [{"is_read":true,"message_id":7416189927567704064,"read_at":1768157464,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:04:36] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1717962120:params=-823306921 - [{"is_read":true,"message_id":7416189927567704064,"read_at":1768157464,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1717962120:params=1786420681'
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:04:36] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:04:36] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189909339258880,"read_at":1768157460,"receiver_id":7416184085095137280}
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1717962120:params=1786420681'
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:04:36] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:04:36] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189909339258880,"read_at":1768157460,"receiver_id":7416184085095137280}
[11-01 21:04:36] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1717962120:params=1786420681 - [{"is_read":true,"message_id":7416189909339258880,"read_at":1768157460,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:04:36] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1717962120:params=1786420681 - [{"is_read":true,"message_id":7416189909339258880,"read_at":1768157460,"receiver_id":7416184085095137280}] for 987323 seconds
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:04:36] [info] [utils::entities::to_crow_json] Local_id for text pp is {a802f472-2b40-4e9e-b3cf-f1d710709c93}
[11-01 21:04:36] [info] [utils::entities::to_crow_json] Local_id for text pp is {a802f472-2b40-4e9e-b3cf-f1d710709c93}
[11-01 21:04:36] [info] [utils::entities::to_crow_json] Local_id for text p is {79b0ef45-349a-4c5a-90ae-22531301448f}
[11-01 21:04:36] [info] [utils::entities::to_crow_json] Local_id for text p is {79b0ef45-349a-4c5a-90ae-22531301448f}
[11-01 21:04:36] [info] [utils::entities::to_crow_json] Local_id for text joo is {6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}
[11-01 21:04:36] [info] [utils::entities::to_crow_json] Local_id for text jo is {3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}
[11-01 21:04:36] [info] [utils::entities::to_crow_json] Local_id for text joo is {6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}
[11-01 21:04:36] [info] [utils::entities::to_crow_json] Local_id for text j is {78477564-4bf6-4526-9ace-5a32a3e3cc01}
[11-01 21:04:36] [info] [utils::entities::to_crow_json] Local_id for text jo is {3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}
[11-01 21:04:36] [info] [utils::entities::to_crow_json] Local_id for text j is {78477564-4bf6-4526-9ace-5a32a3e3cc01}
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1717962120:params=1261424462'
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:04:36] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:04:36] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192506552958976,"read_at":1768158079,"receiver_id":7416184085095137280}
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1717962120:params=1261424462'
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:04:36] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:04:36] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192506552958976,"read_at":1768158079,"receiver_id":7416184085095137280}
[11-01 21:04:36] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1717962120:params=1261424462 - [{"is_read":true,"message_id":7416192506552958976,"read_at":1768158079,"receiver_id":7416184085095137280}] for 1196699 seconds
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:04:36] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1717962120:params=1261424462 - [{"is_read":true,"message_id":7416192506552958976,"read_at":1768158079,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1717962120:params=1165575405'
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:04:36] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:04:36] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192499326173184,"read_at":1768158078,"receiver_id":7416184085095137280}
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1717962120:params=1165575405'
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:04:36] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:04:36] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192499326173184,"read_at":1768158078,"receiver_id":7416184085095137280}
[11-01 21:04:36] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1717962120:params=1165575405 - [{"is_read":true,"message_id":7416192499326173184,"read_at":1768158078,"receiver_id":7416184085095137280}] for 500739 seconds
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:04:36] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1717962120:params=1165575405 - [{"is_read":true,"message_id":7416192499326173184,"read_at":1768158078,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1717962120:params=529767544'
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:04:36] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:04:36] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189940708458496,"read_at":1768157468,"receiver_id":7416184085095137280}
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1717962120:params=529767544'
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:04:36] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:04:36] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189940708458496,"read_at":1768157468,"receiver_id":7416184085095137280}
[11-01 21:04:36] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1717962120:params=529767544 - [{"is_read":true,"message_id":7416189940708458496,"read_at":1768157468,"receiver_id":7416184085095137280}] for 763602 seconds
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:04:36] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1717962120:params=529767544 - [{"is_read":true,"message_id":7416189940708458496,"read_at":1768157468,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1717962120:params=2144135410'
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:04:36] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:04:36] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189927567704064,"read_at":1768157464,"receiver_id":7416184085095137280}
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1717962120:params=2144135410'
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:04:36] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:04:36] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189927567704064,"read_at":1768157464,"receiver_id":7416184085095137280}
[11-01 21:04:36] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1717962120:params=2144135410 - [{"is_read":true,"message_id":7416189927567704064,"read_at":1768157464,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:04:36] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1717962120:params=2144135410 - [{"is_read":true,"message_id":7416189927567704064,"read_at":1768157464,"receiver_id":7416184085095137280}] for 200091 seconds
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1717962120:params=-614784916'
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:04:36] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:04:36] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189909339258880,"read_at":1768157460,"receiver_id":7416184085095137280}
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1717962120:params=-614784916'
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:04:36] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:04:36] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:04:36] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189909339258880,"read_at":1768157460,"receiver_id":7416184085095137280}
[11-01 21:04:36] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1717962120:params=-614784916 - [{"is_read":true,"message_id":7416189909339258880,"read_at":1768157460,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:04:36] [info] [] Send responce code 200 and body [{"id":7416192506552958976,"sender_id":7416184085095137280,"chat_id":7416185797688197120,"text":"pp","timestamp":1768158079,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","readed_by_me":true},{"readed_by_me":true,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","timestamp":1768158078,"text":"p","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416192499326173184},{"id":7416189940708458496,"sender_id":7416184085095137280,"chat_id":7416185797688197120,"text":"joo","timestamp":1768157468,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","readed_by_me":true},{"id":7416189927567704064,"sender_id":7416184085095137280,"chat_id":7416185797688197120,"text":"jo","timestamp":1768157464,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","readed_by_me":true},{"readed_by_me":true,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","timestamp":1768157460,"text":"j","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416189909339258880}]
[11-01 21:04:36] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1717962120:params=-614784916 - [{"is_read":true,"message_id":7416189909339258880,"read_at":1768157460,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:04:36] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:04:36] [info] [] Send responce code 200 and body [{"id":7416192506552958976,"sender_id":7416184085095137280,"chat_id":7416185797688197120,"text":"pp","timestamp":1768158079,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","readed_by_me":true},{"readed_by_me":true,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","timestamp":1768158078,"text":"p","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416192499326173184},{"id":7416189940708458496,"sender_id":7416184085095137280,"chat_id":7416185797688197120,"text":"joo","timestamp":1768157468,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","readed_by_me":true},{"id":7416189927567704064,"sender_id":7416184085095137280,"chat_id":7416185797688197120,"text":"jo","timestamp":1768157464,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","readed_by_me":true},{"readed_by_me":true,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","timestamp":1768157460,"text":"j","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416189909339258880}]
[11-01 21:04:36] [info] [] Server::handleGetMessagesFromChat took 0.068 s
[11-01 21:04:36] [info] [] Server::handleGetMessagesFromChat took 0.068 s
[11-01 21:04:37] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":true,"message_id":7416189909339258880,"read_at":1768158277,"receiver_id":7416184085095137280}
[11-01 21:04:37] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 21:04:37] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":true,"message_id":7416189909339258880,"read_at":1768158277,"receiver_id":7416184085095137280}
[11-01 21:04:37] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:04:37] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:04:37] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[11-01 21:04:37] [info] [] SqlExecutor::execute took 0.002 s
[11-01 21:04:37] [info] [GenericRepository::save] Save succeed for json: {"is_read":true,"message_id":7416189909339258880,"read_at":1768158277,"receiver_id":7416184085095137280}
[11-01 21:04:37] [info] [RedisCache::set] Set entity_cache:messages_status:7416189909339258880 - {"is_read":true,"message_id":7416189909339258880,"read_at":1768158277,"receiver_id":7416184085095137280} for 300 seconds
[11-01 21:04:37] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[11-01 21:04:37] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 21:04:37] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":true,"message_id":7416189927567704064,"read_at":1768158277,"receiver_id":7416184085095137280}
[11-01 21:04:37] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 21:04:37] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":true,"message_id":7416189927567704064,"read_at":1768158277,"receiver_id":7416184085095137280}
[11-01 21:04:37] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:04:37] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:04:37] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[11-01 21:04:37] [info] [] SqlExecutor::execute took 0.001 s
[11-01 21:04:37] [info] [GenericRepository::save] Save succeed for json: {"is_read":true,"message_id":7416189927567704064,"read_at":1768158277,"receiver_id":7416184085095137280}
[11-01 21:04:37] [info] [RedisCache::set] Set entity_cache:messages_status:7416189927567704064 - {"is_read":true,"message_id":7416189927567704064,"read_at":1768158277,"receiver_id":7416184085095137280} for 300 seconds
[11-01 21:04:37] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[11-01 21:04:37] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 21:04:37] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":true,"message_id":7416189909339258880,"read_at":1768158277,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:04:37] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":true,"message_id":7416189909339258880,"read_at":1768158277,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:04:37] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":true,"message_id":7416189927567704064,"read_at":1768158277,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:04:37] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":true,"message_id":7416189940708458496,"read_at":1768158277,"receiver_id":7416184085095137280}
[11-01 21:04:37] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 21:04:37] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":true,"message_id":7416189940708458496,"read_at":1768158277,"receiver_id":7416184085095137280}
[11-01 21:04:37] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:04:37] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:04:37] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[11-01 21:04:37] [info] [] SqlExecutor::execute took 0.001 s
[11-01 21:04:37] [info] [GenericRepository::save] Save succeed for json: {"is_read":true,"message_id":7416189940708458496,"read_at":1768158277,"receiver_id":7416184085095137280}
[11-01 21:04:37] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":true,"message_id":7416189927567704064,"read_at":1768158277,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:04:37] [info] [RedisCache::set] Set entity_cache:messages_status:7416189940708458496 - {"is_read":true,"message_id":7416189940708458496,"read_at":1768158277,"receiver_id":7416184085095137280} for 300 seconds
[11-01 21:04:37] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[11-01 21:04:37] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 21:04:37] [info] [Controller::getMessageById] getMessageById 7416189909339258880
[11-01 21:04:37] [info] [Controller::getMessageById] getMessageById 7416189927567704064
[11-01 21:04:37] [info] [GenericRepository::findOne] Id in dindOne 7416189927567704064
[11-01 21:04:37] [info] [GenericRepository::findOne] Id in dindOne 7416189909339258880
[11-01 21:04:37] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":true,"message_id":7416189940708458496,"read_at":1768158277,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:04:37] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=1025161219'
[11-01 21:04:37] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages WHERE id = ? LIMIT 1
[11-01 21:04:37] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages WHERE id = ? LIMIT 1
[11-01 21:04:37] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages WHERE id = ? LIMIT 1'
[11-01 21:04:37] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:04:37] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages WHERE id = ? LIMIT 1 succeed
[11-01 21:04:37] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464}
[11-01 21:04:37] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=-1718783843'
[11-01 21:04:37] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages WHERE id = ? LIMIT 1
[11-01 21:04:37] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages WHERE id = ? LIMIT 1
[11-01 21:04:37] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages WHERE id = ? LIMIT 1'
[11-01 21:04:37] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:04:37] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages WHERE id = ? LIMIT 1 succeed
[11-01 21:04:37] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}
[11-01 21:04:37] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":true,"message_id":7416189940708458496,"read_at":1768158277,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:04:37] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=-1718783843 - [{"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}] for 300 seconds
[11-01 21:04:37] [info] [SelectQuery<Message>::execute] Results has 1 size
[11-01 21:04:37] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}
[11-01 21:04:37] [info] [] Server::handleGetMessage took 0.003 s
[11-01 21:04:37] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=1025161219 - [{"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464}] for 300 seconds
[11-01 21:04:37] [info] [SelectQuery<Message>::execute] Results has 1 size
[11-01 21:04:37] [info] [Controller::getMessageById] getMessageById 7416189940708458496
[11-01 21:04:37] [info] [GenericRepository::findOne] Id in dindOne 7416189940708458496
[11-01 21:04:37] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464}
[11-01 21:04:37] [info] [] Server::handleGetMessage took 0.004 s
[11-01 21:04:37] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=1564855433'
[11-01 21:04:37] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages WHERE id = ? LIMIT 1
[11-01 21:04:37] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages WHERE id = ? LIMIT 1
[11-01 21:04:37] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages WHERE id = ? LIMIT 1'
[11-01 21:04:37] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:04:37] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages WHERE id = ? LIMIT 1 succeed
[11-01 21:04:37] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468}
[11-01 21:04:37] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=1564855433 - [{"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468}] for 300 seconds
[11-01 21:04:37] [info] [SelectQuery<Message>::execute] Results has 1 size
[11-01 21:04:37] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468}
[11-01 21:04:37] [info] [] Server::handleGetMessage took 0.002 s
[11-01 21:04:38] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:04:38] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 21:04:38] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:04:38] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:04:38] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:04:38] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[11-01 21:04:38] [info] [] SqlExecutor::execute took 0.001 s
[11-01 21:04:38] [info] [GenericRepository::save] Save succeed for json: {"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:04:38] [info] [RedisCache::set] Set entity_cache:messages_status:7416192499326173184 - {"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280} for 300 seconds
[11-01 21:04:38] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[11-01 21:04:38] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 21:04:38] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:04:38] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:04:38] [info] [Controller::getMessageById] getMessageById 7416192499326173184
[11-01 21:04:38] [info] [GenericRepository::findOne] Id in dindOne 7416192499326173184
[11-01 21:04:38] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=128914460'
[11-01 21:04:38] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages WHERE id = ? LIMIT 1
[11-01 21:04:38] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages WHERE id = ? LIMIT 1
[11-01 21:04:38] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages WHERE id = ? LIMIT 1'
[11-01 21:04:38] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:04:38] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages WHERE id = ? LIMIT 1 succeed
[11-01 21:04:38] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416192499326173184,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078}
[11-01 21:04:38] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=128914460 - [{"chat_id":7416185797688197120,"id":7416192499326173184,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078}] for 300 seconds
[11-01 21:04:38] [info] [SelectQuery<Message>::execute] Results has 1 size
[11-01 21:04:38] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416192499326173184,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078}
[11-01 21:04:38] [info] [] Server::handleGetMessage took 0.004 s
[11-01 21:04:38] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:04:38] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 21:04:38] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:04:38] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:04:38] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:04:38] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[11-01 21:04:38] [info] [] SqlExecutor::execute took 0.001 s
[11-01 21:04:38] [info] [GenericRepository::save] Save succeed for json: {"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:04:38] [info] [RedisCache::set] Set entity_cache:messages_status:7416192506552958976 - {"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280} for 820123 seconds
[11-01 21:04:38] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[11-01 21:04:38] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 21:04:38] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:04:38] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:04:38] [info] [Controller::getMessageById] getMessageById 7416192506552958976
[11-01 21:04:38] [info] [GenericRepository::findOne] Id in dindOne 7416192506552958976
[11-01 21:04:38] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=167354303'
[11-01 21:04:38] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[11-01 21:04:38] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=167354303
[11-01 21:04:38] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416192506552958976,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","sender_id":7416184085095137280,"text":"pp","timestamp":1768158079}
[11-01 21:04:38] [info] [] Server::handleGetMessage took 0.001 s
[11-01 21:04:39] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[11-01 21:04:39] [info] [] Server::handleGetMessagesFromChat took 0.003 s
[11-01 21:24:55] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[11-01 21:24:55] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[11-01 21:24:55] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-1042960222:params=-1176851807'
[11-01 21:24:55] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[11-01 21:24:55] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-1042960222:params=-1176851807'
[11-01 21:24:55] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20'
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20'
[11-01 21:24:55] [info] [] SqlExecutor::execute took 0.009 s
[11-01 21:24:55] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20 succeed
[11-01 21:24:55] [info] [] SqlExecutor::execute took 0.009 s
[11-01 21:24:55] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20 succeed
[11-01 21:24:55] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416192506552958976,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","sender_id":7416184085095137280,"text":"pp","timestamp":1768158079}
[11-01 21:24:55] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416192506552958976,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","sender_id":7416184085095137280,"text":"pp","timestamp":1768158079}
[11-01 21:24:55] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416192499326173184,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078}
[11-01 21:24:55] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416192499326173184,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078}
[11-01 21:24:55] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468}
[11-01 21:24:55] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468}
[11-01 21:24:55] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464}
[11-01 21:24:55] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464}
[11-01 21:24:55] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}
[11-01 21:24:55] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}
[11-01 21:24:55] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-1042960222:params=-1176851807 - [{"chat_id":7416185797688197120,"id":7416192506552958976,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","sender_id":7416184085095137280,"text":"pp","timestamp":1768158079},{"chat_id":7416185797688197120,"id":7416192499326173184,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078},{"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468},{"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464},{"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}] for 352070 seconds
[11-01 21:24:55] [info] [SelectQuery<Message>::execute] Results has 5 size
[11-01 21:24:55] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-1042960222:params=-1176851807 - [{"chat_id":7416185797688197120,"id":7416192506552958976,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","sender_id":7416184085095137280,"text":"pp","timestamp":1768158079},{"chat_id":7416185797688197120,"id":7416192499326173184,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078},{"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468},{"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464},{"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}] for 300 seconds
[11-01 21:24:55] [info] [SelectQuery<Message>::execute] Results has 5 size
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=1591126793:params=-99716373'
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:24:55] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=1591126793:params=-99716373'
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:24:55] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:24:55] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:24:55] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:24:55] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=1591126793:params=-99716373 - [{"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}] for 1242047 seconds
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:24:55] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=1591126793:params=-99716373 - [{"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}] for 1072348 seconds
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=1591126793:params=-195495608'
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:24:55] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:24:55] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=1591126793:params=-195495608'
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:24:55] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:24:55] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:24:55] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=1591126793:params=-195495608 - [{"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}] for 1240145 seconds
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:24:55] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=1591126793:params=-195495608 - [{"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=1591126793:params=-1364057635'
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:24:55] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:24:55] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189940708458496,"read_at":1768158277,"receiver_id":7416184085095137280}
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=1591126793:params=-1364057635'
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:24:55] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:24:55] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189940708458496,"read_at":1768158277,"receiver_id":7416184085095137280}
[11-01 21:24:55] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=1591126793:params=-1364057635 - [{"is_read":true,"message_id":7416189940708458496,"read_at":1768158277,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:24:55] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=1591126793:params=-1364057635 - [{"is_read":true,"message_id":7416189940708458496,"read_at":1768158277,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=1591126793:params=-823306921'
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:24:55] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=1591126793:params=-823306921'
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:24:55] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189927567704064,"read_at":1768158277,"receiver_id":7416184085095137280}
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:24:55] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:24:55] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189927567704064,"read_at":1768158277,"receiver_id":7416184085095137280}
[11-01 21:24:55] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=1591126793:params=-823306921 - [{"is_read":true,"message_id":7416189927567704064,"read_at":1768158277,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:24:55] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=1591126793:params=-823306921 - [{"is_read":true,"message_id":7416189927567704064,"read_at":1768158277,"receiver_id":7416184085095137280}] for 1515035 seconds
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=1591126793:params=1786420681'
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:24:55] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:24:55] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189909339258880,"read_at":1768158277,"receiver_id":7416184085095137280}
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=1591126793:params=1786420681'
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:24:55] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:24:55] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189909339258880,"read_at":1768158277,"receiver_id":7416184085095137280}
[11-01 21:24:55] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=1591126793:params=1786420681 - [{"is_read":true,"message_id":7416189909339258880,"read_at":1768158277,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:24:55] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=1591126793:params=1786420681 - [{"is_read":true,"message_id":7416189909339258880,"read_at":1768158277,"receiver_id":7416184085095137280}] for 903469 seconds
[11-01 21:24:55] [info] [utils::entities::to_crow_json] Local_id for text pp is {a802f472-2b40-4e9e-b3cf-f1d710709c93}
[11-01 21:24:55] [info] [utils::entities::to_crow_json] Local_id for text p is {79b0ef45-349a-4c5a-90ae-22531301448f}
[11-01 21:24:55] [info] [utils::entities::to_crow_json] Local_id for text joo is {6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:24:55] [info] [utils::entities::to_crow_json] Local_id for text jo is {3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}
[11-01 21:24:55] [info] [utils::entities::to_crow_json] Local_id for text pp is {a802f472-2b40-4e9e-b3cf-f1d710709c93}
[11-01 21:24:55] [info] [utils::entities::to_crow_json] Local_id for text p is {79b0ef45-349a-4c5a-90ae-22531301448f}
[11-01 21:24:55] [info] [utils::entities::to_crow_json] Local_id for text j is {78477564-4bf6-4526-9ace-5a32a3e3cc01}
[11-01 21:24:55] [info] [utils::entities::to_crow_json] Local_id for text joo is {6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}
[11-01 21:24:55] [info] [utils::entities::to_crow_json] Local_id for text jo is {3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}
[11-01 21:24:55] [info] [utils::entities::to_crow_json] Local_id for text j is {78477564-4bf6-4526-9ace-5a32a3e3cc01}
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=1591126793:params=1261424462'
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:24:55] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:24:55] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=1591126793:params=1261424462'
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:24:55] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:24:55] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:24:55] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=1591126793:params=1261424462 - [{"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:24:55] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=1591126793:params=1261424462 - [{"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}] for 931672 seconds
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=1591126793:params=1165575405'
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:24:55] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:24:55] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=1591126793:params=1165575405'
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:24:55] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:24:55] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:24:55] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=1591126793:params=1165575405 - [{"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}] for 411734 seconds
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:24:55] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=1591126793:params=1165575405 - [{"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=1591126793:params=529767544'
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:24:55] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=1591126793:params=529767544'
[11-01 21:24:55] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189940708458496,"read_at":1768158277,"receiver_id":7416184085095137280}
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:24:55] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:24:55] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189940708458496,"read_at":1768158277,"receiver_id":7416184085095137280}
[11-01 21:24:55] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=1591126793:params=529767544 - [{"is_read":true,"message_id":7416189940708458496,"read_at":1768158277,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:24:55] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=1591126793:params=529767544 - [{"is_read":true,"message_id":7416189940708458496,"read_at":1768158277,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=1591126793:params=2144135410'
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:24:55] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:24:55] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189927567704064,"read_at":1768158277,"receiver_id":7416184085095137280}
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=1591126793:params=2144135410'
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:24:55] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:24:55] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189927567704064,"read_at":1768158277,"receiver_id":7416184085095137280}
[11-01 21:24:55] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=1591126793:params=2144135410 - [{"is_read":true,"message_id":7416189927567704064,"read_at":1768158277,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:24:55] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=1591126793:params=2144135410 - [{"is_read":true,"message_id":7416189927567704064,"read_at":1768158277,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=1591126793:params=-614784916'
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:24:55] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:24:55] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189909339258880,"read_at":1768158277,"receiver_id":7416184085095137280}
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=1591126793:params=-614784916'
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:24:55] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:24:55] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:24:55] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189909339258880,"read_at":1768158277,"receiver_id":7416184085095137280}
[11-01 21:24:55] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=1591126793:params=-614784916 - [{"is_read":true,"message_id":7416189909339258880,"read_at":1768158277,"receiver_id":7416184085095137280}] for 458658 seconds
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:24:55] [info] [] Send responce code 200 and body [{"id":7416192506552958976,"sender_id":7416184085095137280,"chat_id":7416185797688197120,"text":"pp","timestamp":1768158079,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","readed_by_me":true},{"readed_by_me":true,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","timestamp":1768158078,"text":"p","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416192499326173184},{"id":7416189940708458496,"sender_id":7416184085095137280,"chat_id":7416185797688197120,"text":"joo","timestamp":1768157468,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","readed_by_me":true},{"id":7416189927567704064,"sender_id":7416184085095137280,"chat_id":7416185797688197120,"text":"jo","timestamp":1768157464,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","readed_by_me":true},{"readed_by_me":true,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","timestamp":1768157460,"text":"j","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416189909339258880}]
[11-01 21:24:55] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=1591126793:params=-614784916 - [{"is_read":true,"message_id":7416189909339258880,"read_at":1768158277,"receiver_id":7416184085095137280}] for 403367 seconds
[11-01 21:24:55] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:24:55] [info] [] Send responce code 200 and body [{"id":7416192506552958976,"sender_id":7416184085095137280,"chat_id":7416185797688197120,"text":"pp","timestamp":1768158079,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","readed_by_me":true},{"readed_by_me":true,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","timestamp":1768158078,"text":"p","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416192499326173184},{"id":7416189940708458496,"sender_id":7416184085095137280,"chat_id":7416185797688197120,"text":"joo","timestamp":1768157468,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","readed_by_me":true},{"id":7416189927567704064,"sender_id":7416184085095137280,"chat_id":7416185797688197120,"text":"jo","timestamp":1768157464,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","readed_by_me":true},{"readed_by_me":true,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","timestamp":1768157460,"text":"j","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416189909339258880}]
[11-01 21:24:55] [info] [] Server::handleGetMessagesFromChat took 0.082 s
[11-01 21:24:55] [info] [] Server::handleGetMessagesFromChat took 0.082 s
[11-01 21:24:56] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":true,"message_id":7416189909339258880,"read_at":1768159496,"receiver_id":7416184085095137280}
[11-01 21:24:56] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 21:24:56] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":true,"message_id":7416189909339258880,"read_at":1768159496,"receiver_id":7416184085095137280}
[11-01 21:24:56] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:24:56] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:24:56] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[11-01 21:24:56] [info] [] SqlExecutor::execute took 0.002 s
[11-01 21:24:56] [info] [GenericRepository::save] Save succeed for json: {"is_read":true,"message_id":7416189909339258880,"read_at":1768159496,"receiver_id":7416184085095137280}
[11-01 21:24:56] [info] [RedisCache::set] Set entity_cache:messages_status:7416189909339258880 - {"is_read":true,"message_id":7416189909339258880,"read_at":1768159496,"receiver_id":7416184085095137280} for 300 seconds
[11-01 21:24:56] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[11-01 21:24:56] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 21:24:56] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":true,"message_id":7416189927567704064,"read_at":1768159496,"receiver_id":7416184085095137280}
[11-01 21:24:56] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 21:24:56] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":true,"message_id":7416189927567704064,"read_at":1768159496,"receiver_id":7416184085095137280}
[11-01 21:24:56] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:24:56] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:24:56] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[11-01 21:24:56] [info] [] SqlExecutor::execute took 0.001 s
[11-01 21:24:56] [info] [GenericRepository::save] Save succeed for json: {"is_read":true,"message_id":7416189927567704064,"read_at":1768159496,"receiver_id":7416184085095137280}
[11-01 21:24:56] [info] [RedisCache::set] Set entity_cache:messages_status:7416189927567704064 - {"is_read":true,"message_id":7416189927567704064,"read_at":1768159496,"receiver_id":7416184085095137280} for 300 seconds
[11-01 21:24:56] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":true,"message_id":7416189909339258880,"read_at":1768159496,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:24:56] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[11-01 21:24:56] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 21:24:56] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":true,"message_id":7416189909339258880,"read_at":1768159496,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:24:56] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":true,"message_id":7416189927567704064,"read_at":1768159496,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:24:56] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":true,"message_id":7416189940708458496,"read_at":1768159496,"receiver_id":7416184085095137280}
[11-01 21:24:56] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 21:24:56] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":true,"message_id":7416189940708458496,"read_at":1768159496,"receiver_id":7416184085095137280}
[11-01 21:24:56] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:24:56] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:24:56] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[11-01 21:24:56] [info] [] SqlExecutor::execute took 0.001 s
[11-01 21:24:56] [info] [GenericRepository::save] Save succeed for json: {"is_read":true,"message_id":7416189940708458496,"read_at":1768159496,"receiver_id":7416184085095137280}
[11-01 21:24:56] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":true,"message_id":7416189927567704064,"read_at":1768159496,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:24:56] [info] [RedisCache::set] Set entity_cache:messages_status:7416189940708458496 - {"is_read":true,"message_id":7416189940708458496,"read_at":1768159496,"receiver_id":7416184085095137280} for 300 seconds
[11-01 21:24:56] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[11-01 21:24:56] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 21:24:56] [info] [Controller::getMessageById] getMessageById 7416189927567704064
[11-01 21:24:56] [info] [GenericRepository::findOne] Id in dindOne 7416189927567704064
[11-01 21:24:56] [info] [Controller::getMessageById] getMessageById 7416189909339258880
[11-01 21:24:56] [info] [GenericRepository::findOne] Id in dindOne 7416189909339258880
[11-01 21:24:56] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=1025161219'
[11-01 21:24:56] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages WHERE id = ? LIMIT 1
[11-01 21:24:56] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages WHERE id = ? LIMIT 1
[11-01 21:24:56] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages WHERE id = ? LIMIT 1'
[11-01 21:24:56] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:24:56] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages WHERE id = ? LIMIT 1 succeed
[11-01 21:24:56] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464}
[11-01 21:24:56] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=-1718783843'
[11-01 21:24:56] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages WHERE id = ? LIMIT 1
[11-01 21:24:56] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages WHERE id = ? LIMIT 1
[11-01 21:24:56] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages WHERE id = ? LIMIT 1'
[11-01 21:24:56] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:24:56] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages WHERE id = ? LIMIT 1 succeed
[11-01 21:24:56] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}
[11-01 21:24:56] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=1025161219 - [{"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464}] for 806974 seconds
[11-01 21:24:56] [info] [SelectQuery<Message>::execute] Results has 1 size
[11-01 21:24:56] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464}
[11-01 21:24:56] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":true,"message_id":7416189940708458496,"read_at":1768159496,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:24:56] [info] [] Server::handleGetMessage took 0.003 s
[11-01 21:24:56] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=-1718783843 - [{"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}] for 300 seconds
[11-01 21:24:56] [info] [SelectQuery<Message>::execute] Results has 1 size
[11-01 21:24:56] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}
[11-01 21:24:56] [info] [] Server::handleGetMessage took 0.003 s
[11-01 21:24:56] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":true,"message_id":7416189940708458496,"read_at":1768159496,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:24:56] [info] [Controller::getMessageById] getMessageById 7416189940708458496
[11-01 21:24:56] [info] [GenericRepository::findOne] Id in dindOne 7416189940708458496
[11-01 21:24:56] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=1564855433'
[11-01 21:24:56] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages WHERE id = ? LIMIT 1
[11-01 21:24:56] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages WHERE id = ? LIMIT 1
[11-01 21:24:56] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages WHERE id = ? LIMIT 1'
[11-01 21:24:56] [info] [] SqlExecutor::execute took 0.001 s
[11-01 21:24:56] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages WHERE id = ? LIMIT 1 succeed
[11-01 21:24:56] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468}
[11-01 21:24:56] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=1564855433 - [{"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468}] for 300 seconds
[11-01 21:24:56] [info] [SelectQuery<Message>::execute] Results has 1 size
[11-01 21:24:56] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468}
[11-01 21:24:56] [info] [] Server::handleGetMessage took 0.003 s
[11-01 21:27:56] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[11-01 21:27:56] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[11-01 21:27:56] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-1289592390:params=-1176851807'
[11-01 21:27:56] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[11-01 21:27:56] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-1289592390:params=-1176851807'
[11-01 21:27:56] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20'
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20'
[11-01 21:27:56] [info] [] SqlExecutor::execute took 0.010 s
[11-01 21:27:56] [info] [] SqlExecutor::execute took 0.010 s
[11-01 21:27:56] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20 succeed
[11-01 21:27:56] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20 succeed
[11-01 21:27:56] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416192506552958976,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","sender_id":7416184085095137280,"text":"pp","timestamp":1768158079}
[11-01 21:27:56] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416192506552958976,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","sender_id":7416184085095137280,"text":"pp","timestamp":1768158079}
[11-01 21:27:56] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416192499326173184,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078}
[11-01 21:27:56] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416192499326173184,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078}
[11-01 21:27:56] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468}
[11-01 21:27:56] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468}
[11-01 21:27:56] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464}
[11-01 21:27:56] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464}
[11-01 21:27:56] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}
[11-01 21:27:56] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}
[11-01 21:27:56] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-1289592390:params=-1176851807 - [{"chat_id":7416185797688197120,"id":7416192506552958976,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","sender_id":7416184085095137280,"text":"pp","timestamp":1768158079},{"chat_id":7416185797688197120,"id":7416192499326173184,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078},{"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468},{"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464},{"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}] for 300 seconds
[11-01 21:27:56] [info] [SelectQuery<Message>::execute] Results has 5 size
[11-01 21:27:56] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-1289592390:params=-1176851807 - [{"chat_id":7416185797688197120,"id":7416192506552958976,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","sender_id":7416184085095137280,"text":"pp","timestamp":1768158079},{"chat_id":7416185797688197120,"id":7416192499326173184,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078},{"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468},{"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464},{"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}] for 672648 seconds
[11-01 21:27:56] [info] [SelectQuery<Message>::execute] Results has 5 size
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=740391441:params=-99716373'
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:27:56] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:27:56] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=740391441:params=-99716373'
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:27:56] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:27:56] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:27:56] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=740391441:params=-99716373 - [{"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:27:56] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=740391441:params=-99716373 - [{"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}] for 1328798 seconds
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=740391441:params=-195495608'
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:27:56] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:27:56] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=740391441:params=-195495608'
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:27:56] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:27:56] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:27:56] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=740391441:params=-195495608 - [{"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}] for 38363 seconds
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:27:56] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=740391441:params=-195495608 - [{"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=740391441:params=-1364057635'
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:27:56] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:27:56] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189940708458496,"read_at":1768159496,"receiver_id":7416184085095137280}
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=740391441:params=-1364057635'
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:27:56] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:27:56] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189940708458496,"read_at":1768159496,"receiver_id":7416184085095137280}
[11-01 21:27:56] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=740391441:params=-1364057635 - [{"is_read":true,"message_id":7416189940708458496,"read_at":1768159496,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:27:56] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=740391441:params=-1364057635 - [{"is_read":true,"message_id":7416189940708458496,"read_at":1768159496,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=740391441:params=-823306921'
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:27:56] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:27:56] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189927567704064,"read_at":1768159496,"receiver_id":7416184085095137280}
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=740391441:params=-823306921'
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:27:56] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:27:56] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189927567704064,"read_at":1768159496,"receiver_id":7416184085095137280}
[11-01 21:27:56] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=740391441:params=-823306921 - [{"is_read":true,"message_id":7416189927567704064,"read_at":1768159496,"receiver_id":7416184085095137280}] for 824610 seconds
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:27:56] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=740391441:params=-823306921 - [{"is_read":true,"message_id":7416189927567704064,"read_at":1768159496,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=740391441:params=1786420681'
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:27:56] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:27:56] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189909339258880,"read_at":1768159496,"receiver_id":7416184085095137280}
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=740391441:params=1786420681'
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:27:56] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:27:56] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189909339258880,"read_at":1768159496,"receiver_id":7416184085095137280}
[11-01 21:27:56] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=740391441:params=1786420681 - [{"is_read":true,"message_id":7416189909339258880,"read_at":1768159496,"receiver_id":7416184085095137280}] for 1240496 seconds
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:27:56] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=740391441:params=1786420681 - [{"is_read":true,"message_id":7416189909339258880,"read_at":1768159496,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:27:56] [info] [utils::entities::to_crow_json] Local_id for text pp is {a802f472-2b40-4e9e-b3cf-f1d710709c93}
[11-01 21:27:56] [info] [utils::entities::to_crow_json] Local_id for text p is {79b0ef45-349a-4c5a-90ae-22531301448f}
[11-01 21:27:56] [info] [utils::entities::to_crow_json] Local_id for text pp is {a802f472-2b40-4e9e-b3cf-f1d710709c93}
[11-01 21:27:56] [info] [utils::entities::to_crow_json] Local_id for text p is {79b0ef45-349a-4c5a-90ae-22531301448f}
[11-01 21:27:56] [info] [utils::entities::to_crow_json] Local_id for text joo is {6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}
[11-01 21:27:56] [info] [utils::entities::to_crow_json] Local_id for text joo is {6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}
[11-01 21:27:56] [info] [utils::entities::to_crow_json] Local_id for text jo is {3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}
[11-01 21:27:56] [info] [utils::entities::to_crow_json] Local_id for text jo is {3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}
[11-01 21:27:56] [info] [utils::entities::to_crow_json] Local_id for text j is {78477564-4bf6-4526-9ace-5a32a3e3cc01}
[11-01 21:27:56] [info] [utils::entities::to_crow_json] Local_id for text j is {78477564-4bf6-4526-9ace-5a32a3e3cc01}
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=740391441:params=1261424462'
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=740391441:params=1261424462'
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:27:56] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:27:56] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:27:56] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:27:56] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:27:56] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=740391441:params=1261424462 - [{"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}] for 1078898 seconds
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:27:56] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=740391441:params=1261424462 - [{"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=740391441:params=1165575405'
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:27:56] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:27:56] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=740391441:params=1165575405'
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:27:56] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:27:56] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:27:56] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=740391441:params=1165575405 - [{"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}] for 1139910 seconds
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:27:56] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=740391441:params=1165575405 - [{"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}] for 1571586 seconds
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=740391441:params=529767544'
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:27:56] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:27:56] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189940708458496,"read_at":1768159496,"receiver_id":7416184085095137280}
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=740391441:params=529767544'
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:27:56] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:27:56] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189940708458496,"read_at":1768159496,"receiver_id":7416184085095137280}
[11-01 21:27:56] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=740391441:params=529767544 - [{"is_read":true,"message_id":7416189940708458496,"read_at":1768159496,"receiver_id":7416184085095137280}] for 580756 seconds
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:27:56] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=740391441:params=529767544 - [{"is_read":true,"message_id":7416189940708458496,"read_at":1768159496,"receiver_id":7416184085095137280}] for 1709786 seconds
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=740391441:params=2144135410'
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:27:56] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:27:56] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189927567704064,"read_at":1768159496,"receiver_id":7416184085095137280}
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=740391441:params=2144135410'
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:27:56] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:27:56] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189927567704064,"read_at":1768159496,"receiver_id":7416184085095137280}
[11-01 21:27:56] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=740391441:params=2144135410 - [{"is_read":true,"message_id":7416189927567704064,"read_at":1768159496,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:27:56] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=740391441:params=2144135410 - [{"is_read":true,"message_id":7416189927567704064,"read_at":1768159496,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=740391441:params=-614784916'
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:27:56] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=740391441:params=-614784916'
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:27:56] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189909339258880,"read_at":1768159496,"receiver_id":7416184085095137280}
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:27:56] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:27:56] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:27:56] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189909339258880,"read_at":1768159496,"receiver_id":7416184085095137280}
[11-01 21:27:56] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=740391441:params=-614784916 - [{"is_read":true,"message_id":7416189909339258880,"read_at":1768159496,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:27:56] [info] [] Send responce code 200 and body [{"id":7416192506552958976,"sender_id":7416184085095137280,"chat_id":7416185797688197120,"text":"pp","timestamp":1768158079,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","readed_by_me":true},{"readed_by_me":true,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","timestamp":1768158078,"text":"p","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416192499326173184},{"id":7416189940708458496,"sender_id":7416184085095137280,"chat_id":7416185797688197120,"text":"joo","timestamp":1768157468,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","readed_by_me":true},{"id":7416189927567704064,"sender_id":7416184085095137280,"chat_id":7416185797688197120,"text":"jo","timestamp":1768157464,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","readed_by_me":true},{"readed_by_me":true,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","timestamp":1768157460,"text":"j","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416189909339258880}]
[11-01 21:27:56] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=740391441:params=-614784916 - [{"is_read":true,"message_id":7416189909339258880,"read_at":1768159496,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:27:56] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:27:56] [info] [] Send responce code 200 and body [{"id":7416192506552958976,"sender_id":7416184085095137280,"chat_id":7416185797688197120,"text":"pp","timestamp":1768158079,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","readed_by_me":true},{"readed_by_me":true,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","timestamp":1768158078,"text":"p","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416192499326173184},{"id":7416189940708458496,"sender_id":7416184085095137280,"chat_id":7416185797688197120,"text":"joo","timestamp":1768157468,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","readed_by_me":true},{"id":7416189927567704064,"sender_id":7416184085095137280,"chat_id":7416185797688197120,"text":"jo","timestamp":1768157464,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","readed_by_me":true},{"readed_by_me":true,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","timestamp":1768157460,"text":"j","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416189909339258880}]
[11-01 21:27:56] [info] [] Server::handleGetMessagesFromChat took 0.073 s
[11-01 21:27:56] [info] [] Server::handleGetMessagesFromChat took 0.073 s
[11-01 21:27:57] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":true,"message_id":7416189909339258880,"read_at":1768159677,"receiver_id":7416184085095137280}
[11-01 21:27:57] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 21:27:57] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":true,"message_id":7416189909339258880,"read_at":1768159677,"receiver_id":7416184085095137280}
[11-01 21:27:57] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:27:57] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":true,"message_id":7416189927567704064,"read_at":1768159677,"receiver_id":7416184085095137280}
[11-01 21:27:57] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:27:57] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 21:27:57] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":true,"message_id":7416189927567704064,"read_at":1768159677,"receiver_id":7416184085095137280}
[11-01 21:27:57] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:27:57] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:27:57] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[11-01 21:27:57] [info] [] SqlExecutor::execute took 0.005 s
[11-01 21:27:57] [info] [GenericRepository::save] Save succeed for json: {"is_read":true,"message_id":7416189909339258880,"read_at":1768159677,"receiver_id":7416184085095137280}
[11-01 21:27:57] [info] [RedisCache::set] Set entity_cache:messages_status:7416189909339258880 - {"is_read":true,"message_id":7416189909339258880,"read_at":1768159677,"receiver_id":7416184085095137280} for 300 seconds
[11-01 21:27:57] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[11-01 21:27:57] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 21:27:57] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[11-01 21:27:57] [info] [] SqlExecutor::execute took 0.002 s
[11-01 21:27:57] [info] [GenericRepository::save] Save succeed for json: {"is_read":true,"message_id":7416189927567704064,"read_at":1768159677,"receiver_id":7416184085095137280}
[11-01 21:27:57] [info] [RedisCache::set] Set entity_cache:messages_status:7416189927567704064 - {"is_read":true,"message_id":7416189927567704064,"read_at":1768159677,"receiver_id":7416184085095137280} for 300 seconds
[11-01 21:27:57] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[11-01 21:27:57] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 21:27:57] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":true,"message_id":7416189909339258880,"read_at":1768159677,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:27:57] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":true,"message_id":7416189927567704064,"read_at":1768159677,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:27:57] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":true,"message_id":7416189909339258880,"read_at":1768159677,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:27:57] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":true,"message_id":7416189940708458496,"read_at":1768159677,"receiver_id":7416184085095137280}
[11-01 21:27:57] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 21:27:57] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":true,"message_id":7416189940708458496,"read_at":1768159677,"receiver_id":7416184085095137280}
[11-01 21:27:57] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:27:57] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:27:57] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":true,"message_id":7416189927567704064,"read_at":1768159677,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:27:57] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[11-01 21:27:57] [info] [] SqlExecutor::execute took 0.001 s
[11-01 21:27:57] [info] [GenericRepository::save] Save succeed for json: {"is_read":true,"message_id":7416189940708458496,"read_at":1768159677,"receiver_id":7416184085095137280}
[11-01 21:27:57] [info] [RedisCache::set] Set entity_cache:messages_status:7416189940708458496 - {"is_read":true,"message_id":7416189940708458496,"read_at":1768159677,"receiver_id":7416184085095137280} for 300 seconds
[11-01 21:27:57] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[11-01 21:27:57] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 21:27:57] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":true,"message_id":7416189940708458496,"read_at":1768159677,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:27:57] [info] [Controller::getMessageById] getMessageById 7416189909339258880
[11-01 21:27:57] [info] [GenericRepository::findOne] Id in dindOne 7416189909339258880
[11-01 21:27:57] [info] [Controller::getMessageById] getMessageById 7416189927567704064
[11-01 21:27:57] [info] [GenericRepository::findOne] Id in dindOne 7416189927567704064
[11-01 21:27:57] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":true,"message_id":7416189940708458496,"read_at":1768159677,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:27:57] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=-1718783843'
[11-01 21:27:57] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[11-01 21:27:57] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=-1718783843
[11-01 21:27:57] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}
[11-01 21:27:57] [info] [] Server::handleGetMessage took 0.001 s
[11-01 21:27:57] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=1025161219'
[11-01 21:27:57] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[11-01 21:27:57] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=1025161219
[11-01 21:27:57] [info] [Controller::getMessageById] getMessageById 7416189940708458496
[11-01 21:27:57] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464}
[11-01 21:27:57] [info] [GenericRepository::findOne] Id in dindOne 7416189940708458496
[11-01 21:27:57] [info] [] Server::handleGetMessage took 0.002 s
[11-01 21:27:57] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=1564855433'
[11-01 21:27:57] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[11-01 21:27:57] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=1564855433
[11-01 21:27:57] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468}
[11-01 21:27:57] [info] [] Server::handleGetMessage took 0.001 s
[11-01 21:30:15] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[11-01 21:30:15] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[11-01 21:30:15] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-1294791629:params=-1176851807'
[11-01 21:30:15] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[11-01 21:30:15] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-1294791629:params=-1176851807'
[11-01 21:30:15] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20'
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20'
[11-01 21:30:15] [info] [] SqlExecutor::execute took 0.007 s
[11-01 21:30:15] [info] [] SqlExecutor::execute took 0.007 s
[11-01 21:30:15] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20 succeed
[11-01 21:30:15] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20 succeed
[11-01 21:30:15] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416192506552958976,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","sender_id":7416184085095137280,"text":"pp","timestamp":1768158079}
[11-01 21:30:15] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416192506552958976,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","sender_id":7416184085095137280,"text":"pp","timestamp":1768158079}
[11-01 21:30:15] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416192499326173184,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078}
[11-01 21:30:15] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416192499326173184,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078}
[11-01 21:30:15] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468}
[11-01 21:30:15] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468}
[11-01 21:30:15] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464}
[11-01 21:30:15] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}
[11-01 21:30:15] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464}
[11-01 21:30:15] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}
[11-01 21:30:15] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-1294791629:params=-1176851807 - [{"chat_id":7416185797688197120,"id":7416192506552958976,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","sender_id":7416184085095137280,"text":"pp","timestamp":1768158079},{"chat_id":7416185797688197120,"id":7416192499326173184,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078},{"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468},{"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464},{"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}] for 158320 seconds
[11-01 21:30:15] [info] [SelectQuery<Message>::execute] Results has 5 size
[11-01 21:30:15] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-1294791629:params=-1176851807 - [{"chat_id":7416185797688197120,"id":7416192506552958976,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","sender_id":7416184085095137280,"text":"pp","timestamp":1768158079},{"chat_id":7416185797688197120,"id":7416192499326173184,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078},{"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468},{"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464},{"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}] for 300 seconds
[11-01 21:30:15] [info] [SelectQuery<Message>::execute] Results has 5 size
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=768612248:params=-99716373'
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:30:15] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=768612248:params=-99716373'
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:30:15] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:30:15] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:30:15] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:30:15] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=768612248:params=-99716373 - [{"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}] for 578330 seconds
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:30:15] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=768612248:params=-99716373 - [{"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}] for 578330 seconds
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=768612248:params=-195495608'
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:30:15] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=768612248:params=-195495608'
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:30:15] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:30:15] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:30:15] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:30:15] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=768612248:params=-195495608 - [{"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:30:15] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=768612248:params=-195495608 - [{"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=768612248:params=-1364057635'
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:30:15] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=768612248:params=-1364057635'
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:30:15] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189940708458496,"read_at":1768159677,"receiver_id":7416184085095137280}
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:30:15] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:30:15] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189940708458496,"read_at":1768159677,"receiver_id":7416184085095137280}
[11-01 21:30:15] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=768612248:params=-1364057635 - [{"is_read":true,"message_id":7416189940708458496,"read_at":1768159677,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:30:15] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=768612248:params=-1364057635 - [{"is_read":true,"message_id":7416189940708458496,"read_at":1768159677,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=768612248:params=-823306921'
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:30:15] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:30:15] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189927567704064,"read_at":1768159677,"receiver_id":7416184085095137280}
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=768612248:params=-823306921'
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:30:15] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:30:15] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189927567704064,"read_at":1768159677,"receiver_id":7416184085095137280}
[11-01 21:30:15] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=768612248:params=-823306921 - [{"is_read":true,"message_id":7416189927567704064,"read_at":1768159677,"receiver_id":7416184085095137280}] for 1696009 seconds
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:30:15] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=768612248:params=-823306921 - [{"is_read":true,"message_id":7416189927567704064,"read_at":1768159677,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=768612248:params=1786420681'
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=768612248:params=1786420681'
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:30:15] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:30:15] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189909339258880,"read_at":1768159677,"receiver_id":7416184085095137280}
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:30:15] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:30:15] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189909339258880,"read_at":1768159677,"receiver_id":7416184085095137280}
[11-01 21:30:15] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=768612248:params=1786420681 - [{"is_read":true,"message_id":7416189909339258880,"read_at":1768159677,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:30:15] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=768612248:params=1786420681 - [{"is_read":true,"message_id":7416189909339258880,"read_at":1768159677,"receiver_id":7416184085095137280}] for 1680082 seconds
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:30:15] [info] [utils::entities::to_crow_json] Local_id for text pp is {a802f472-2b40-4e9e-b3cf-f1d710709c93}
[11-01 21:30:15] [info] [utils::entities::to_crow_json] Local_id for text pp is {a802f472-2b40-4e9e-b3cf-f1d710709c93}
[11-01 21:30:15] [info] [utils::entities::to_crow_json] Local_id for text p is {79b0ef45-349a-4c5a-90ae-22531301448f}
[11-01 21:30:15] [info] [utils::entities::to_crow_json] Local_id for text p is {79b0ef45-349a-4c5a-90ae-22531301448f}
[11-01 21:30:15] [info] [utils::entities::to_crow_json] Local_id for text joo is {6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}
[11-01 21:30:15] [info] [utils::entities::to_crow_json] Local_id for text joo is {6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}
[11-01 21:30:15] [info] [utils::entities::to_crow_json] Local_id for text jo is {3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}
[11-01 21:30:15] [info] [utils::entities::to_crow_json] Local_id for text j is {78477564-4bf6-4526-9ace-5a32a3e3cc01}
[11-01 21:30:15] [info] [utils::entities::to_crow_json] Local_id for text jo is {3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}
[11-01 21:30:15] [info] [utils::entities::to_crow_json] Local_id for text j is {78477564-4bf6-4526-9ace-5a32a3e3cc01}
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=768612248:params=1261424462'
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:30:15] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=768612248:params=1261424462'
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:30:15] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:30:15] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:30:15] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:30:15] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=768612248:params=1261424462 - [{"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}] for 1361656 seconds
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:30:15] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=768612248:params=1261424462 - [{"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}] for 1217301 seconds
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=768612248:params=1165575405'
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:30:15] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:30:15] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=768612248:params=1165575405'
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:30:15] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:30:15] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:30:15] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=768612248:params=1165575405 - [{"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}] for 1251545 seconds
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:30:15] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=768612248:params=1165575405 - [{"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}] for 908051 seconds
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=768612248:params=529767544'
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:30:15] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:30:15] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189940708458496,"read_at":1768159677,"receiver_id":7416184085095137280}
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=768612248:params=529767544'
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:30:15] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:30:15] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189940708458496,"read_at":1768159677,"receiver_id":7416184085095137280}
[11-01 21:30:15] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=768612248:params=529767544 - [{"is_read":true,"message_id":7416189940708458496,"read_at":1768159677,"receiver_id":7416184085095137280}] for 1574975 seconds
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:30:15] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=768612248:params=529767544 - [{"is_read":true,"message_id":7416189940708458496,"read_at":1768159677,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=768612248:params=2144135410'
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:30:15] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:30:15] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189927567704064,"read_at":1768159677,"receiver_id":7416184085095137280}
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=768612248:params=2144135410'
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:30:15] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:30:15] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189927567704064,"read_at":1768159677,"receiver_id":7416184085095137280}
[11-01 21:30:15] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=768612248:params=2144135410 - [{"is_read":true,"message_id":7416189927567704064,"read_at":1768159677,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:30:15] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=768612248:params=2144135410 - [{"is_read":true,"message_id":7416189927567704064,"read_at":1768159677,"receiver_id":7416184085095137280}] for 1169813 seconds
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=768612248:params=-614784916'
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:30:15] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:30:15] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189909339258880,"read_at":1768159677,"receiver_id":7416184085095137280}
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=768612248:params=-614784916'
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:30:15] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:30:15] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:30:15] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189909339258880,"read_at":1768159677,"receiver_id":7416184085095137280}
[11-01 21:30:15] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=768612248:params=-614784916 - [{"is_read":true,"message_id":7416189909339258880,"read_at":1768159677,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:30:15] [info] [] Send responce code 200 and body [{"id":7416192506552958976,"sender_id":7416184085095137280,"chat_id":7416185797688197120,"text":"pp","timestamp":1768158079,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","readed_by_me":true},{"readed_by_me":true,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","timestamp":1768158078,"text":"p","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416192499326173184},{"id":7416189940708458496,"sender_id":7416184085095137280,"chat_id":7416185797688197120,"text":"joo","timestamp":1768157468,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","readed_by_me":true},{"id":7416189927567704064,"sender_id":7416184085095137280,"chat_id":7416185797688197120,"text":"jo","timestamp":1768157464,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","readed_by_me":true},{"readed_by_me":true,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","timestamp":1768157460,"text":"j","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416189909339258880}]
[11-01 21:30:15] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=768612248:params=-614784916 - [{"is_read":true,"message_id":7416189909339258880,"read_at":1768159677,"receiver_id":7416184085095137280}] for 361845 seconds
[11-01 21:30:15] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:30:15] [info] [] Send responce code 200 and body [{"id":7416192506552958976,"sender_id":7416184085095137280,"chat_id":7416185797688197120,"text":"pp","timestamp":1768158079,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","readed_by_me":true},{"readed_by_me":true,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","timestamp":1768158078,"text":"p","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416192499326173184},{"id":7416189940708458496,"sender_id":7416184085095137280,"chat_id":7416185797688197120,"text":"joo","timestamp":1768157468,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","readed_by_me":true},{"id":7416189927567704064,"sender_id":7416184085095137280,"chat_id":7416185797688197120,"text":"jo","timestamp":1768157464,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","readed_by_me":true},{"readed_by_me":true,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","timestamp":1768157460,"text":"j","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416189909339258880}]
[11-01 21:30:15] [info] [] Server::handleGetMessagesFromChat took 0.074 s
[11-01 21:30:15] [info] [] Server::handleGetMessagesFromChat took 0.074 s
[11-01 21:30:17] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":true,"message_id":7416189909339258880,"read_at":1768159817,"receiver_id":7416184085095137280}
[11-01 21:30:17] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 21:30:17] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":true,"message_id":7416189909339258880,"read_at":1768159817,"receiver_id":7416184085095137280}
[11-01 21:30:17] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:30:17] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:30:17] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[11-01 21:30:17] [info] [] SqlExecutor::execute took 0.003 s
[11-01 21:30:17] [info] [GenericRepository::save] Save succeed for json: {"is_read":true,"message_id":7416189909339258880,"read_at":1768159817,"receiver_id":7416184085095137280}
[11-01 21:30:17] [info] [RedisCache::set] Set entity_cache:messages_status:7416189909339258880 - {"is_read":true,"message_id":7416189909339258880,"read_at":1768159817,"receiver_id":7416184085095137280} for 1515732 seconds
[11-01 21:30:17] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":true,"message_id":7416189927567704064,"read_at":1768159817,"receiver_id":7416184085095137280}
[11-01 21:30:17] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 21:30:17] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":true,"message_id":7416189927567704064,"read_at":1768159817,"receiver_id":7416184085095137280}
[11-01 21:30:17] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[11-01 21:30:17] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 21:30:17] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:30:17] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:30:17] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[11-01 21:30:17] [info] [] SqlExecutor::execute took 0.001 s
[11-01 21:30:17] [info] [GenericRepository::save] Save succeed for json: {"is_read":true,"message_id":7416189927567704064,"read_at":1768159817,"receiver_id":7416184085095137280}
[11-01 21:30:17] [info] [RedisCache::set] Set entity_cache:messages_status:7416189927567704064 - {"is_read":true,"message_id":7416189927567704064,"read_at":1768159817,"receiver_id":7416184085095137280} for 300 seconds
[11-01 21:30:17] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[11-01 21:30:17] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 21:30:17] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":true,"message_id":7416189909339258880,"read_at":1768159817,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:30:17] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":true,"message_id":7416189927567704064,"read_at":1768159817,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:30:17] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":true,"message_id":7416189940708458496,"read_at":1768159817,"receiver_id":7416184085095137280}
[11-01 21:30:17] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":true,"message_id":7416189909339258880,"read_at":1768159817,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:30:17] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 21:30:17] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":true,"message_id":7416189940708458496,"read_at":1768159817,"receiver_id":7416184085095137280}
[11-01 21:30:17] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:30:17] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:30:17] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[11-01 21:30:17] [info] [] SqlExecutor::execute took 0.001 s
[11-01 21:30:17] [info] [GenericRepository::save] Save succeed for json: {"is_read":true,"message_id":7416189940708458496,"read_at":1768159817,"receiver_id":7416184085095137280}
[11-01 21:30:17] [info] [RedisCache::set] Set entity_cache:messages_status:7416189940708458496 - {"is_read":true,"message_id":7416189940708458496,"read_at":1768159817,"receiver_id":7416184085095137280} for 300 seconds
[11-01 21:30:17] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":true,"message_id":7416189927567704064,"read_at":1768159817,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:30:17] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[11-01 21:30:17] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 21:30:17] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":true,"message_id":7416189940708458496,"read_at":1768159817,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:30:17] [info] [Controller::getMessageById] getMessageById 7416189909339258880
[11-01 21:30:17] [info] [Controller::getMessageById] getMessageById 7416189927567704064
[11-01 21:30:17] [info] [GenericRepository::findOne] Id in dindOne 7416189909339258880
[11-01 21:30:17] [info] [GenericRepository::findOne] Id in dindOne 7416189927567704064
[11-01 21:30:17] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":true,"message_id":7416189940708458496,"read_at":1768159817,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:30:17] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=1025161219'
[11-01 21:30:17] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[11-01 21:30:17] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=1025161219
[11-01 21:30:17] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464}
[11-01 21:30:17] [info] [] Server::handleGetMessage took 0.001 s
[11-01 21:30:17] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=-1718783843'
[11-01 21:30:17] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages WHERE id = ? LIMIT 1
[11-01 21:30:17] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages WHERE id = ? LIMIT 1
[11-01 21:30:17] [info] [Controller::getMessageById] getMessageById 7416189940708458496
[11-01 21:30:17] [info] [GenericRepository::findOne] Id in dindOne 7416189940708458496
[11-01 21:30:17] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages WHERE id = ? LIMIT 1'
[11-01 21:30:17] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:30:17] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages WHERE id = ? LIMIT 1 succeed
[11-01 21:30:17] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}
[11-01 21:30:17] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=1564855433'
[11-01 21:30:17] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages WHERE id = ? LIMIT 1
[11-01 21:30:17] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages WHERE id = ? LIMIT 1
[11-01 21:30:17] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages WHERE id = ? LIMIT 1'
[11-01 21:30:17] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:30:17] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages WHERE id = ? LIMIT 1 succeed
[11-01 21:30:17] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468}
[11-01 21:30:17] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=-1718783843 - [{"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}] for 1439797 seconds
[11-01 21:30:17] [info] [SelectQuery<Message>::execute] Results has 1 size
[11-01 21:30:17] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}
[11-01 21:30:17] [info] [] Server::handleGetMessage took 0.003 s
[11-01 21:30:17] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=1564855433 - [{"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468}] for 621208 seconds
[11-01 21:30:17] [info] [SelectQuery<Message>::execute] Results has 1 size
[11-01 21:30:17] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468}
[11-01 21:30:17] [info] [] Server::handleGetMessage took 0.002 s
[11-01 21:32:20] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[11-01 21:32:20] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[11-01 21:32:20] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-1076811592:params=-1176851807'
[11-01 21:32:20] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[11-01 21:32:20] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-1076811592:params=-1176851807'
[11-01 21:32:20] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20'
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20'
[11-01 21:32:20] [info] [] SqlExecutor::execute took 0.008 s
[11-01 21:32:20] [info] [] SqlExecutor::execute took 0.008 s
[11-01 21:32:20] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20 succeed
[11-01 21:32:20] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20 succeed
[11-01 21:32:20] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416192506552958976,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","sender_id":7416184085095137280,"text":"pp","timestamp":1768158079}
[11-01 21:32:20] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416192506552958976,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","sender_id":7416184085095137280,"text":"pp","timestamp":1768158079}
[11-01 21:32:20] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416192499326173184,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078}
[11-01 21:32:20] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416192499326173184,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078}
[11-01 21:32:20] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468}
[11-01 21:32:20] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468}
[11-01 21:32:20] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464}
[11-01 21:32:20] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464}
[11-01 21:32:20] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}
[11-01 21:32:20] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}
[11-01 21:32:20] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-1076811592:params=-1176851807 - [{"chat_id":7416185797688197120,"id":7416192506552958976,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","sender_id":7416184085095137280,"text":"pp","timestamp":1768158079},{"chat_id":7416185797688197120,"id":7416192499326173184,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078},{"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468},{"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464},{"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}] for 300 seconds
[11-01 21:32:20] [info] [SelectQuery<Message>::execute] Results has 5 size
[11-01 21:32:20] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-1076811592:params=-1176851807 - [{"chat_id":7416185797688197120,"id":7416192506552958976,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","sender_id":7416184085095137280,"text":"pp","timestamp":1768158079},{"chat_id":7416185797688197120,"id":7416192499326173184,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","sender_id":7416184085095137280,"text":"p","timestamp":1768158078},{"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468},{"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464},{"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}] for 300 seconds
[11-01 21:32:20] [info] [SelectQuery<Message>::execute] Results has 5 size
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=550646547:params=-99716373'
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:32:20] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=550646547:params=-99716373'
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:32:20] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:32:20] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:32:20] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:32:20] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=550646547:params=-99716373 - [{"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:32:20] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=550646547:params=-99716373 - [{"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=550646547:params=-195495608'
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:32:20] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:32:20] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=550646547:params=-195495608'
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:32:20] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:32:20] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:32:20] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=550646547:params=-195495608 - [{"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:32:20] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=550646547:params=-195495608 - [{"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}] for 1035365 seconds
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=550646547:params=-1364057635'
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:32:20] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:32:20] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189940708458496,"read_at":1768159817,"receiver_id":7416184085095137280}
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=550646547:params=-1364057635'
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:32:20] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:32:20] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189940708458496,"read_at":1768159817,"receiver_id":7416184085095137280}
[11-01 21:32:20] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=550646547:params=-1364057635 - [{"is_read":true,"message_id":7416189940708458496,"read_at":1768159817,"receiver_id":7416184085095137280}] for 882302 seconds
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=550646547:params=-823306921'
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:32:20] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:32:20] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189927567704064,"read_at":1768159817,"receiver_id":7416184085095137280}
[11-01 21:32:20] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=550646547:params=-1364057635 - [{"is_read":true,"message_id":7416189940708458496,"read_at":1768159817,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=550646547:params=-823306921'
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:32:20] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:32:20] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189927567704064,"read_at":1768159817,"receiver_id":7416184085095137280}
[11-01 21:32:20] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=550646547:params=-823306921 - [{"is_read":true,"message_id":7416189927567704064,"read_at":1768159817,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=550646547:params=1786420681'
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:32:20] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:32:20] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189909339258880,"read_at":1768159817,"receiver_id":7416184085095137280}
[11-01 21:32:20] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=550646547:params=-823306921 - [{"is_read":true,"message_id":7416189927567704064,"read_at":1768159817,"receiver_id":7416184085095137280}] for 1349731 seconds
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=550646547:params=1786420681'
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[11-01 21:32:20] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[11-01 21:32:20] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189909339258880,"read_at":1768159817,"receiver_id":7416184085095137280}
[11-01 21:32:20] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=550646547:params=1786420681 - [{"is_read":true,"message_id":7416189909339258880,"read_at":1768159817,"receiver_id":7416184085095137280}] for 1731441 seconds
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:32:20] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=550646547:params=1786420681 - [{"is_read":true,"message_id":7416189909339258880,"read_at":1768159817,"receiver_id":7416184085095137280}] for 190656 seconds
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:32:20] [info] [utils::entities::to_crow_json] Local_id for text pp is {a802f472-2b40-4e9e-b3cf-f1d710709c93}
[11-01 21:32:20] [info] [utils::entities::to_crow_json] Local_id for text p is {79b0ef45-349a-4c5a-90ae-22531301448f}
[11-01 21:32:20] [info] [utils::entities::to_crow_json] Local_id for text pp is {a802f472-2b40-4e9e-b3cf-f1d710709c93}
[11-01 21:32:20] [info] [utils::entities::to_crow_json] Local_id for text p is {79b0ef45-349a-4c5a-90ae-22531301448f}
[11-01 21:32:20] [info] [utils::entities::to_crow_json] Local_id for text joo is {6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}
[11-01 21:32:20] [info] [utils::entities::to_crow_json] Local_id for text joo is {6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}
[11-01 21:32:20] [info] [utils::entities::to_crow_json] Local_id for text jo is {3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}
[11-01 21:32:20] [info] [utils::entities::to_crow_json] Local_id for text jo is {3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}
[11-01 21:32:20] [info] [utils::entities::to_crow_json] Local_id for text j is {78477564-4bf6-4526-9ace-5a32a3e3cc01}
[11-01 21:32:20] [info] [utils::entities::to_crow_json] Local_id for text j is {78477564-4bf6-4526-9ace-5a32a3e3cc01}
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=550646547:params=1261424462'
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:32:20] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:32:20] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=550646547:params=1261424462'
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:32:20] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:32:20] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:32:20] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=550646547:params=1261424462 - [{"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}] for 1787672 seconds
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:32:20] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=550646547:params=1261424462 - [{"is_read":true,"message_id":7416192506552958976,"read_at":1768158278,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=550646547:params=1165575405'
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=550646547:params=1165575405'
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:32:20] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:32:20] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:32:20] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:32:20] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}
[11-01 21:32:20] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=550646547:params=1165575405 - [{"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:32:20] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=550646547:params=1165575405 - [{"is_read":true,"message_id":7416192499326173184,"read_at":1768158278,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=550646547:params=529767544'
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:32:20] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=550646547:params=529767544'
[11-01 21:32:20] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189940708458496,"read_at":1768159817,"receiver_id":7416184085095137280}
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:32:20] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:32:20] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189940708458496,"read_at":1768159817,"receiver_id":7416184085095137280}
[11-01 21:32:20] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=550646547:params=529767544 - [{"is_read":true,"message_id":7416189940708458496,"read_at":1768159817,"receiver_id":7416184085095137280}] for 51815 seconds
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:32:20] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=550646547:params=529767544 - [{"is_read":true,"message_id":7416189940708458496,"read_at":1768159817,"receiver_id":7416184085095137280}] for 1272427 seconds
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=550646547:params=2144135410'
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=550646547:params=2144135410'
[11-01 21:32:20] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:32:20] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189927567704064,"read_at":1768159817,"receiver_id":7416184085095137280}
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:32:20] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:32:20] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189927567704064,"read_at":1768159817,"receiver_id":7416184085095137280}
[11-01 21:32:20] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=550646547:params=2144135410 - [{"is_read":true,"message_id":7416189927567704064,"read_at":1768159817,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:32:20] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=550646547:params=2144135410 - [{"is_read":true,"message_id":7416189927567704064,"read_at":1768159817,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=550646547:params=-614784916'
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:32:20] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:32:20] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189909339258880,"read_at":1768159817,"receiver_id":7416184085095137280}
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=550646547:params=-614784916'
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[11-01 21:32:20] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[11-01 21:32:20] [info] [] SqlExecutor::execute took 0.000 s
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[11-01 21:32:20] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416189909339258880,"read_at":1768159817,"receiver_id":7416184085095137280}
[11-01 21:32:20] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=550646547:params=-614784916 - [{"is_read":true,"message_id":7416189909339258880,"read_at":1768159817,"receiver_id":7416184085095137280}] for 594402 seconds
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:32:20] [info] [] Send responce code 200 and body [{"id":7416192506552958976,"sender_id":7416184085095137280,"chat_id":7416185797688197120,"text":"pp","timestamp":1768158079,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","readed_by_me":true},{"readed_by_me":true,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","timestamp":1768158078,"text":"p","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416192499326173184},{"id":7416189940708458496,"sender_id":7416184085095137280,"chat_id":7416185797688197120,"text":"joo","timestamp":1768157468,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","readed_by_me":true},{"id":7416189927567704064,"sender_id":7416184085095137280,"chat_id":7416185797688197120,"text":"jo","timestamp":1768157464,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","readed_by_me":true},{"readed_by_me":true,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","timestamp":1768157460,"text":"j","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416189909339258880}]
[11-01 21:32:20] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=550646547:params=-614784916 - [{"is_read":true,"message_id":7416189909339258880,"read_at":1768159817,"receiver_id":7416184085095137280}] for 300 seconds
[11-01 21:32:20] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[11-01 21:32:20] [info] [] Send responce code 200 and body [{"id":7416192506552958976,"sender_id":7416184085095137280,"chat_id":7416185797688197120,"text":"pp","timestamp":1768158079,"local_id":"{a802f472-2b40-4e9e-b3cf-f1d710709c93}","readed_by_me":true},{"readed_by_me":true,"local_id":"{79b0ef45-349a-4c5a-90ae-22531301448f}","timestamp":1768158078,"text":"p","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416192499326173184},{"id":7416189940708458496,"sender_id":7416184085095137280,"chat_id":7416185797688197120,"text":"joo","timestamp":1768157468,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","readed_by_me":true},{"id":7416189927567704064,"sender_id":7416184085095137280,"chat_id":7416185797688197120,"text":"jo","timestamp":1768157464,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","readed_by_me":true},{"readed_by_me":true,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","timestamp":1768157460,"text":"j","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416189909339258880}]
[11-01 21:32:20] [info] [] Server::handleGetMessagesFromChat took 0.066 s
[11-01 21:32:20] [info] [] Server::handleGetMessagesFromChat took 0.066 s
[11-01 21:32:21] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":true,"message_id":7416189909339258880,"read_at":1768159941,"receiver_id":7416184085095137280}
[11-01 21:32:21] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 21:32:21] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":true,"message_id":7416189909339258880,"read_at":1768159941,"receiver_id":7416184085095137280}
[11-01 21:32:21] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:32:21] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:32:21] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[11-01 21:32:21] [info] [] SqlExecutor::execute took 0.002 s
[11-01 21:32:21] [info] [GenericRepository::save] Save succeed for json: {"is_read":true,"message_id":7416189909339258880,"read_at":1768159941,"receiver_id":7416184085095137280}
[11-01 21:32:21] [info] [RedisCache::set] Set entity_cache:messages_status:7416189909339258880 - {"is_read":true,"message_id":7416189909339258880,"read_at":1768159941,"receiver_id":7416184085095137280} for 726732 seconds
[11-01 21:32:21] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[11-01 21:32:21] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 21:32:21] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":true,"message_id":7416189927567704064,"read_at":1768159941,"receiver_id":7416184085095137280}
[11-01 21:32:21] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 21:32:21] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":true,"message_id":7416189927567704064,"read_at":1768159941,"receiver_id":7416184085095137280}
[11-01 21:32:21] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:32:21] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:32:21] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[11-01 21:32:21] [info] [] SqlExecutor::execute took 0.001 s
[11-01 21:32:21] [info] [GenericRepository::save] Save succeed for json: {"is_read":true,"message_id":7416189927567704064,"read_at":1768159941,"receiver_id":7416184085095137280}
[11-01 21:32:21] [info] [RedisCache::set] Set entity_cache:messages_status:7416189927567704064 - {"is_read":true,"message_id":7416189927567704064,"read_at":1768159941,"receiver_id":7416184085095137280} for 300 seconds
[11-01 21:32:21] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[11-01 21:32:21] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 21:32:21] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":true,"message_id":7416189909339258880,"read_at":1768159941,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:32:21] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":true,"message_id":7416189940708458496,"read_at":1768159941,"receiver_id":7416184085095137280}
[11-01 21:32:21] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[11-01 21:32:21] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":true,"message_id":7416189909339258880,"read_at":1768159941,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:32:21] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":true,"message_id":7416189940708458496,"read_at":1768159941,"receiver_id":7416184085095137280}
[11-01 21:32:21] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:32:21] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[11-01 21:32:21] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":true,"message_id":7416189927567704064,"read_at":1768159941,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:32:21] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[11-01 21:32:21] [info] [] SqlExecutor::execute took 0.001 s
[11-01 21:32:21] [info] [GenericRepository::save] Save succeed for json: {"is_read":true,"message_id":7416189940708458496,"read_at":1768159941,"receiver_id":7416184085095137280}
[11-01 21:32:21] [info] [RedisCache::set] Set entity_cache:messages_status:7416189940708458496 - {"is_read":true,"message_id":7416189940708458496,"read_at":1768159941,"receiver_id":7416184085095137280} for 300 seconds
[11-01 21:32:21] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[11-01 21:32:21] [info] [RabbitMQClient::declareExchange] app.events already exist
[11-01 21:32:21] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":true,"message_id":7416189927567704064,"read_at":1768159941,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:32:21] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":true,"message_id":7416189940708458496,"read_at":1768159941,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:32:21] [info] [Controller::getMessageById] getMessageById 7416189909339258880
[11-01 21:32:21] [info] [GenericRepository::findOne] Id in dindOne 7416189909339258880
[11-01 21:32:21] [info] [Controller::getMessageById] getMessageById 7416189927567704064
[11-01 21:32:21] [info] [GenericRepository::findOne] Id in dindOne 7416189927567704064
[11-01 21:32:21] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":true,"message_id":7416189940708458496,"read_at":1768159941,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[11-01 21:32:21] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=1025161219'
[11-01 21:32:21] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[11-01 21:32:21] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=1025161219
[11-01 21:32:21] [info] [Controller::getMessageById] getMessageById 7416189940708458496
[11-01 21:32:21] [info] [GenericRepository::findOne] Id in dindOne 7416189940708458496
[11-01 21:32:21] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416189927567704064,"local_id":"{3529bc3e-a72d-43da-aeaf-1e7bd9c45f24}","sender_id":7416184085095137280,"text":"jo","timestamp":1768157464}
[11-01 21:32:21] [info] [] Server::handleGetMessage took 0.001 s
[11-01 21:32:21] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=-1718783843'
[11-01 21:32:21] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[11-01 21:32:21] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=-1718783843
[11-01 21:32:21] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416189909339258880,"local_id":"{78477564-4bf6-4526-9ace-5a32a3e3cc01}","sender_id":7416184085095137280,"text":"j","timestamp":1768157460}
[11-01 21:32:21] [info] [] Server::handleGetMessage took 0.002 s
[11-01 21:32:21] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=1564855433'
[11-01 21:32:21] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[11-01 21:32:21] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1627186261:params=1564855433
[11-01 21:32:21] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416189940708458496,"local_id":"{6b2ec0cb-5cfd-4d08-ab03-fa7f2a058cdb}","sender_id":7416184085095137280,"text":"joo","timestamp":1768157468}
[11-01 21:32:21] [info] [] Server::handleGetMessage took 0.001 s
[12-01 14:07:42] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 14:07:42] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 14:07:42] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=698445056:params=-1176851807'
[12-01 14:07:42] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[12-01 14:07:42] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=698445056:params=-1176851807'
[12-01 14:07:42] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[12-01 14:07:42] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[12-01 14:07:42] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20'
[12-01 14:07:42] [info] [] SqlExecutor::execute took 0.008 s
[12-01 14:07:42] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20 succeed
[12-01 14:07:54] [info] [] Logger initialized for service 'MessageService'
[12-01 14:07:54] [info] [SQLiteDatabase::initializeSchema] Database schema initialized successfully
[12-01 14:07:54] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message
[12-01 14:07:54] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_status
[12-01 14:07:54] [info] [Server::run] [Message server is started on port '8082'
[12-01 14:07:54] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[12-01 14:07:54] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[12-01 14:07:54] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessage' bound to exchange 'app.events' with key 'save_message'
[12-01 14:07:54] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessageStatus' bound to exchange 'app.events' with key 'save_message_status'
[12-01 14:07:54] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message' in queue 'QueueSaveMessage'
[12-01 14:07:54] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message_status' in queue 'QueueSaveMessageStatus'
[12-01 14:07:59] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 14:07:59] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 14:09:30] [info] [] Logger initialized for service 'MessageService'
[12-01 14:09:30] [info] [SQLiteDatabase::initializeSchema] Database schema initialized successfully
[12-01 14:09:30] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message
[12-01 14:09:30] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_status
[12-01 14:09:30] [info] [Server::run] [Message server is started on port '8082'
[12-01 14:09:30] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[12-01 14:09:30] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[12-01 14:09:30] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessageStatus' bound to exchange 'app.events' with key 'save_message_status'
[12-01 14:09:30] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessage' bound to exchange 'app.events' with key 'save_message'
[12-01 14:09:30] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message_status' in queue 'QueueSaveMessageStatus'
[12-01 14:09:30] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message' in queue 'QueueSaveMessage'
[12-01 14:09:35] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 14:09:35] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 14:09:35] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=698445056:params=-1176851807'
[12-01 14:09:35] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[12-01 14:16:26] [info] [] Logger initialized for service 'MessageService'
[12-01 14:16:26] [info] [SQLiteDatabase::initializeSchema] Database schema initialized successfully
[12-01 14:16:26] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message
[12-01 14:16:26] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_status
[12-01 14:16:26] [info] [Server::run] [Message server is started on port '8082'
[12-01 14:16:26] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[12-01 14:16:26] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[12-01 14:16:26] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessageStatus' bound to exchange 'app.events' with key 'save_message_status'
[12-01 14:16:26] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessage' bound to exchange 'app.events' with key 'save_message'
[12-01 14:16:26] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message_status' in queue 'QueueSaveMessageStatus'
[12-01 14:16:26] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message' in queue 'QueueSaveMessage'
[12-01 14:16:31] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 14:16:31] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 14:16:31] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=698445056:params=-1176851807'
[12-01 14:16:31] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[12-01 14:17:35] [info] [] Logger initialized for service 'MessageService'
[12-01 14:17:35] [info] [SQLiteDatabase::initializeSchema] Database schema initialized successfully
[12-01 14:17:35] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message
[12-01 14:17:35] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_status
[12-01 14:17:35] [info] [Server::run] [Message server is started on port '8082'
[12-01 14:17:35] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[12-01 14:17:35] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[12-01 14:17:35] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessage' bound to exchange 'app.events' with key 'save_message'
[12-01 14:17:35] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessageStatus' bound to exchange 'app.events' with key 'save_message_status'
[12-01 14:17:35] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message' in queue 'QueueSaveMessage'
[12-01 14:17:35] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message_status' in queue 'QueueSaveMessageStatus'
[12-01 14:18:31] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 14:18:31] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 14:18:50] [info] [] Logger initialized for service 'MessageService'
[12-01 14:18:50] [info] [SQLiteDatabase::initializeSchema] Database schema initialized successfully
[12-01 14:18:50] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message
[12-01 14:18:50] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_status
[12-01 14:18:50] [info] [Server::run] [Message server is started on port '8082'
[12-01 14:18:50] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[12-01 14:18:50] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[12-01 14:18:50] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessage' bound to exchange 'app.events' with key 'save_message'
[12-01 14:18:50] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessageStatus' bound to exchange 'app.events' with key 'save_message_status'
[12-01 14:18:50] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message' in queue 'QueueSaveMessage'
[12-01 14:18:50] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message_status' in queue 'QueueSaveMessageStatus'
[12-01 14:18:58] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 14:18:58] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 14:26:41] [info] [] Logger initialized for service 'MessageService'
[12-01 14:26:41] [info] [SQLiteDatabase::initializeSchema] Database schema initialized successfully
[12-01 14:26:41] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message
[12-01 14:26:41] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_status
[12-01 14:26:41] [info] [Server::run] [Message server is started on port '8082'
[12-01 14:26:41] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[12-01 14:26:41] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[12-01 14:26:41] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessageStatus' bound to exchange 'app.events' with key 'save_message_status'
[12-01 14:26:41] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessage' bound to exchange 'app.events' with key 'save_message'
[12-01 14:26:41] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message_status' in queue 'QueueSaveMessageStatus'
[12-01 14:26:41] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message' in queue 'QueueSaveMessage'
[12-01 14:26:45] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[12-01 14:26:45] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[12-01 14:26:45] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 14:26:45] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 14:26:45] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=698445056:params=-1176851807'
[12-01 14:26:45] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[12-01 14:26:45] [info] [SqlExecutor::execute] Execute 
[12-01 14:26:45] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=698445056:params=-1176851807'
[12-01 14:26:45] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[12-01 14:26:45] [info] [SqlExecutor::execute] Execute 
[12-01 14:26:45] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[12-01 14:26:45] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[12-01 14:26:45] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20'
[12-01 14:26:45] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20'
[12-01 14:26:45] [info] [] SqlExecutor::execute took 0.004 s
[12-01 14:26:45] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20 succeed
[12-01 14:26:45] [info] [] SqlExecutor::execute took 0.005 s
[12-01 14:26:45] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20 succeed
[12-01 14:26:45] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=698445056:params=-1176851807 - [] for 300 seconds
[12-01 14:26:45] [info] [SelectQuery<Message>::execute] Results has 0 size
[12-01 14:26:45] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 0 messages
[12-01 14:26:45] [info] [] Send responce code 200 and body []
[12-01 14:26:45] [info] [] Server::handleGetMessagesFromChat took 0.026 s
[12-01 14:26:45] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=698445056:params=-1176851807 - [] for 300 seconds
[12-01 14:26:45] [info] [SelectQuery<Message>::execute] Results has 0 size
[12-01 14:26:45] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 0 messages
[12-01 14:26:45] [info] [] Send responce code 200 and body []
[12-01 14:26:45] [info] [] Server::handleGetMessagesFromChat took 0.027 s
[12-01 14:27:33] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"chat_id":7416185797688197120,"event":"save_message","id":0,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","sender_id":7416184085095137280,"text":"12","timestamp":1768220853}
[12-01 14:27:33] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message
[12-01 14:27:33] [info] [Controller::subscribeToSaveMessage] Getted event in subscribeToSaveMessage: save_message and payload {"chat_id":7416185797688197120,"event":"save_message","id":0,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","sender_id":7416184085095137280,"text":"12","timestamp":1768220853}
[12-01 14:27:33] [info] [Controller::handleSaveMessage] Get message to save with id 0 and text 12
[12-01 14:27:33] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages (id, sender_id, chat_id, text, timestamp, local_id) VALUES (?, ?, ?, ?, ?, ?); 
[12-01 14:27:33] [info] [SqlExecutor::execute] Execute 
[12-01 14:27:33] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":true,"message_id":0,"read_at":1768220853,"receiver_id":7416184085095137280}
[12-01 14:27:33] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[12-01 14:27:33] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":true,"message_id":0,"read_at":1768220853,"receiver_id":7416184085095137280}
[12-01 14:27:33] [error] [GenericRepository::save] checkInvariants failed for entity {"is_read":true,"message_id":0,"read_at":1768220853,"receiver_id":7416184085095137280}
[12-01 14:27:33] [error] [Controller::handleSaveMessageStatus] Error saving message_status id 0
[12-01 14:27:33] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages (id, sender_id, chat_id, text, timestamp, local_id) VALUES (?, ?, ?, ?, ?, ?); 
[12-01 14:27:33] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages (id, sender_id, chat_id, text, timestamp, local_id) VALUES (?, ?, ?, ?, ?, ?); '
[12-01 14:27:33] [info] [] SqlExecutor::execute took 0.005 s
[12-01 14:27:33] [info] [GenericRepository::save] Save succeed for json: {"chat_id":7416185797688197120,"id":7416455798789816320,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","sender_id":7416184085095137280,"text":"12","timestamp":1768220853}
[12-01 14:27:33] [info] [RedisCache::set] Set entity_cache:messages:7416455798789816320 - {"chat_id":7416185797688197120,"id":7416455798789816320,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","sender_id":7416184085095137280,"text":"12","timestamp":1768220853} for 1387226 seconds
[12-01 14:27:33] [info] [RabbitMQClient::publish] Publish: app.events | message_saved
[12-01 14:27:33] [info] [RabbitMQClient::declareExchange] app.events already exist
[12-01 14:27:33] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"chat_id":7416185797688197120,"id":7416455798789816320,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","sender_id":7416184085095137280,"text":"12","timestamp":1768220853}' to exchange 'app.events' with key 'direct'
[12-01 14:27:33] [info] [RabbitMQClient::publish] [rabbit] Published message '{"chat_id":7416185797688197120,"id":7416455798789816320,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","sender_id":7416184085095137280,"text":"12","timestamp":1768220853}' to exchange 'app.events' with key 'direct'
[12-01 14:27:33] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":false,"message_id":7416455798789816320,"read_at":0,"receiver_id":7416183787446353920}
[12-01 14:27:33] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[12-01 14:27:33] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":false,"message_id":7416455798789816320,"read_at":0,"receiver_id":7416183787446353920}
[12-01 14:27:33] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[12-01 14:27:33] [info] [SqlExecutor::execute] Execute 
[12-01 14:27:33] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[12-01 14:27:33] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[12-01 14:27:33] [info] [] SqlExecutor::execute took 0.002 s
[12-01 14:27:33] [info] [GenericRepository::save] Save succeed for json: {"is_read":false,"message_id":7416455798789816320,"read_at":0,"receiver_id":7416183787446353920}
[12-01 14:27:33] [info] [RedisCache::set] Set entity_cache:messages_status:7416455798789816320 - {"is_read":false,"message_id":7416455798789816320,"read_at":0,"receiver_id":7416183787446353920} for 300 seconds
[12-01 14:27:33] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[12-01 14:27:33] [info] [RabbitMQClient::declareExchange] app.events already exist
[12-01 14:27:33] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":false,"message_id":7416455798789816320,"read_at":0,"receiver_id":7416183787446353920}' to exchange 'app.events' with key 'direct'
[12-01 14:27:33] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":false,"message_id":7416455798789816320,"read_at":0,"receiver_id":7416184085095137280}
[12-01 14:27:33] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[12-01 14:27:33] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":false,"message_id":7416455798789816320,"read_at":0,"receiver_id":7416184085095137280}
[12-01 14:27:33] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[12-01 14:27:33] [info] [SqlExecutor::execute] Execute 
[12-01 14:27:33] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[12-01 14:27:33] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[12-01 14:27:33] [info] [] SqlExecutor::execute took 0.001 s
[12-01 14:27:33] [info] [GenericRepository::save] Save succeed for json: {"is_read":false,"message_id":7416455798789816320,"read_at":0,"receiver_id":7416184085095137280}
[12-01 14:27:33] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":false,"message_id":7416455798789816320,"read_at":0,"receiver_id":7416183787446353920}' to exchange 'app.events' with key 'direct'
[12-01 14:27:33] [info] [RedisCache::set] Set entity_cache:messages_status:7416455798789816320 - {"is_read":false,"message_id":7416455798789816320,"read_at":0,"receiver_id":7416184085095137280} for 300 seconds
[12-01 14:27:33] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[12-01 14:27:33] [info] [RabbitMQClient::declareExchange] app.events already exist
[12-01 14:27:33] [info] [Controller::getMessageById] getMessageById 7416455798789816320
[12-01 14:27:33] [info] [GenericRepository::findOne] Id in dindOne 7416455798789816320
[12-01 14:27:33] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=1595657087:params=-2100054534'
[12-01 14:27:33] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages WHERE id = ? LIMIT 1
[12-01 14:27:33] [info] [SqlExecutor::execute] Execute 
[12-01 14:27:33] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages WHERE id = ? LIMIT 1
[12-01 14:27:33] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages WHERE id = ? LIMIT 1'
[12-01 14:27:33] [info] [] SqlExecutor::execute took 0.001 s
[12-01 14:27:33] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages WHERE id = ? LIMIT 1 succeed
[12-01 14:27:33] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416455798789816320,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","sender_id":7416184085095137280,"text":"12","timestamp":1768220853}
[12-01 14:27:33] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":false,"message_id":7416455798789816320,"read_at":0,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[12-01 14:27:33] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=1595657087:params=-2100054534 - [{"chat_id":7416185797688197120,"id":7416455798789816320,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","sender_id":7416184085095137280,"text":"12","timestamp":1768220853}] for 300 seconds
[12-01 14:27:33] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":false,"message_id":7416455798789816320,"read_at":0,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[12-01 14:27:33] [info] [SelectQuery<Message>::execute] Results has 1 size
[12-01 14:27:33] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416455798789816320,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","sender_id":7416184085095137280,"text":"12","timestamp":1768220853}
[12-01 14:27:33] [info] [] Server::handleGetMessage took 0.005 s
[12-01 14:27:33] [info] [Controller::getMessageById] getMessageById 7416455798789816320
[12-01 14:27:33] [info] [GenericRepository::findOne] Id in dindOne 7416455798789816320
[12-01 14:27:33] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=1595657087:params=-2100054534'
[12-01 14:27:33] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 14:27:33] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=1595657087:params=-2100054534
[12-01 14:27:33] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416455798789816320,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","sender_id":7416184085095137280,"text":"12","timestamp":1768220853}
[12-01 14:27:33] [info] [] Server::handleGetMessage took 0.001 s
[12-01 14:27:33] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":true,"message_id":7416455798789816320,"read_at":1768220853,"receiver_id":7416184085095137280}
[12-01 14:27:33] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[12-01 14:27:33] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":true,"message_id":7416455798789816320,"read_at":1768220853,"receiver_id":7416184085095137280}
[12-01 14:27:33] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[12-01 14:27:33] [info] [SqlExecutor::execute] Execute 
[12-01 14:27:33] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[12-01 14:27:33] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[12-01 14:27:33] [info] [] SqlExecutor::execute took 0.002 s
[12-01 14:27:33] [info] [GenericRepository::save] Save succeed for json: {"is_read":true,"message_id":7416455798789816320,"read_at":1768220853,"receiver_id":7416184085095137280}
[12-01 14:27:33] [info] [RedisCache::set] Set entity_cache:messages_status:7416455798789816320 - {"is_read":true,"message_id":7416455798789816320,"read_at":1768220853,"receiver_id":7416184085095137280} for 300 seconds
[12-01 14:27:33] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[12-01 14:27:33] [info] [RabbitMQClient::declareExchange] app.events already exist
[12-01 14:27:33] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":true,"message_id":7416455798789816320,"read_at":1768220853,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[12-01 14:27:33] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":true,"message_id":7416455798789816320,"read_at":1768220853,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[12-01 14:27:33] [info] [Controller::getMessageById] getMessageById 7416455798789816320
[12-01 14:27:33] [info] [GenericRepository::findOne] Id in dindOne 7416455798789816320
[12-01 14:27:33] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=1595657087:params=-2100054534'
[12-01 14:27:33] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 14:27:33] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=1595657087:params=-2100054534
[12-01 14:27:33] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416455798789816320,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","sender_id":7416184085095137280,"text":"12","timestamp":1768220853}
[12-01 14:27:33] [info] [] Server::handleGetMessage took 0.001 s
[12-01 14:50:27] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[12-01 14:50:27] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[12-01 14:50:27] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 14:50:27] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 14:50:27] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-1682049080:params=-1176851807'
[12-01 14:50:27] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[12-01 14:50:27] [info] [SqlExecutor::execute] Execute 
[12-01 14:50:27] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-1682049080:params=-1176851807'
[12-01 14:50:27] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[12-01 14:50:27] [info] [SqlExecutor::execute] Execute 
[12-01 14:50:27] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[12-01 14:50:27] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[12-01 14:50:27] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20'
[12-01 14:50:27] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20'
[12-01 14:50:27] [info] [] SqlExecutor::execute took 0.007 s
[12-01 14:50:27] [info] [] SqlExecutor::execute took 0.006 s
[12-01 14:50:27] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20 succeed
[12-01 14:50:27] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20 succeed
[12-01 14:50:27] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416455798789816320,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","sender_id":7416184085095137280,"text":"12","timestamp":1768220853}
[12-01 14:50:27] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416455798789816320,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","sender_id":7416184085095137280,"text":"12","timestamp":1768220853}
[12-01 14:50:27] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-1682049080:params=-1176851807 - [{"chat_id":7416185797688197120,"id":7416455798789816320,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","sender_id":7416184085095137280,"text":"12","timestamp":1768220853}] for 1512568 seconds
[12-01 14:50:27] [info] [SelectQuery<Message>::execute] Results has 1 size
[12-01 14:50:27] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[12-01 14:50:27] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-1682049080:params=-1176851807 - [{"chat_id":7416185797688197120,"id":7416455798789816320,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","sender_id":7416184085095137280,"text":"12","timestamp":1768220853}] for 300 seconds
[12-01 14:50:27] [info] [SelectQuery<Message>::execute] Results has 1 size
[12-01 14:50:27] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[12-01 14:50:27] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-995738441:params=1898207406'
[12-01 14:50:27] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[12-01 14:50:27] [info] [SqlExecutor::execute] Execute 
[12-01 14:50:27] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[12-01 14:50:27] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[12-01 14:50:27] [info] [] SqlExecutor::execute took 0.000 s
[12-01 14:50:27] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-995738441:params=1898207406'
[12-01 14:50:27] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[12-01 14:50:27] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[12-01 14:50:27] [info] [SqlExecutor::execute] Execute 
[12-01 14:50:27] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416455798789816320,"read_at":1768220853,"receiver_id":7416184085095137280}
[12-01 14:50:27] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[12-01 14:50:27] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[12-01 14:50:27] [info] [] SqlExecutor::execute took 0.000 s
[12-01 14:50:27] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[12-01 14:50:27] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416455798789816320,"read_at":1768220853,"receiver_id":7416184085095137280}
[12-01 14:50:27] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-995738441:params=1898207406 - [{"is_read":true,"message_id":7416455798789816320,"read_at":1768220853,"receiver_id":7416184085095137280}] for 300 seconds
[12-01 14:50:27] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[12-01 14:50:27] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[12-01 14:50:27] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-995738441:params=1898207406 - [{"is_read":true,"message_id":7416455798789816320,"read_at":1768220853,"receiver_id":7416184085095137280}] for 300 seconds
[12-01 14:50:27] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[12-01 14:50:27] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[12-01 14:50:27] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-995738441:params=-1073355509'
[12-01 14:50:27] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[12-01 14:50:27] [info] [SqlExecutor::execute] Execute 
[12-01 14:50:27] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[12-01 14:50:27] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[12-01 14:50:27] [info] [] SqlExecutor::execute took 0.000 s
[12-01 14:50:27] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[12-01 14:50:27] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416455798789816320,"read_at":1768220853,"receiver_id":7416184085095137280}
[12-01 14:50:27] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-995738441:params=-1073355509'
[12-01 14:50:27] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[12-01 14:50:27] [info] [SqlExecutor::execute] Execute 
[12-01 14:50:27] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[12-01 14:50:27] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[12-01 14:50:27] [info] [] SqlExecutor::execute took 0.000 s
[12-01 14:50:27] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[12-01 14:50:27] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416455798789816320,"read_at":1768220853,"receiver_id":7416184085095137280}
[12-01 14:50:27] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-995738441:params=-1073355509 - [{"is_read":true,"message_id":7416455798789816320,"read_at":1768220853,"receiver_id":7416184085095137280}] for 300 seconds
[12-01 14:50:27] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[12-01 14:50:27] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[12-01 14:50:27] [info] [] Server::handleGetMessagesFromChat took 0.040 s
[12-01 14:50:27] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-995738441:params=-1073355509 - [{"is_read":true,"message_id":7416455798789816320,"read_at":1768220853,"receiver_id":7416184085095137280}] for 300 seconds
[12-01 14:50:27] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[12-01 14:50:27] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[12-01 14:50:27] [info] [] Server::handleGetMessagesFromChat took 0.040 s
[12-01 14:50:28] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":true,"message_id":7416455798789816320,"read_at":1768222228,"receiver_id":7416184085095137280}
[12-01 14:50:28] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[12-01 14:50:28] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":true,"message_id":7416455798789816320,"read_at":1768222228,"receiver_id":7416184085095137280}
[12-01 14:50:28] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[12-01 14:50:28] [info] [SqlExecutor::execute] Execute 
[12-01 14:50:28] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[12-01 14:50:28] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[12-01 14:50:28] [info] [] SqlExecutor::execute took 0.002 s
[12-01 14:50:28] [info] [GenericRepository::save] Save succeed for json: {"is_read":true,"message_id":7416455798789816320,"read_at":1768222228,"receiver_id":7416184085095137280}
[12-01 14:50:28] [info] [RedisCache::set] Set entity_cache:messages_status:7416455798789816320 - {"is_read":true,"message_id":7416455798789816320,"read_at":1768222228,"receiver_id":7416184085095137280} for 300 seconds
[12-01 14:50:28] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[12-01 14:50:28] [info] [RabbitMQClient::declareExchange] app.events already exist
[12-01 14:50:28] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":true,"message_id":7416455798789816320,"read_at":1768222228,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[12-01 14:50:28] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":true,"message_id":7416455798789816320,"read_at":1768222228,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[12-01 14:50:28] [info] [Controller::getMessageById] getMessageById 7416455798789816320
[12-01 14:50:28] [info] [GenericRepository::findOne] Id in dindOne 7416455798789816320
[12-01 14:50:28] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=1595657087:params=-2100054534'
[12-01 14:50:28] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages WHERE id = ? LIMIT 1
[12-01 14:50:28] [info] [SqlExecutor::execute] Execute 
[12-01 14:50:28] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages WHERE id = ? LIMIT 1
[12-01 14:50:28] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages WHERE id = ? LIMIT 1'
[12-01 14:50:28] [info] [] SqlExecutor::execute took 0.000 s
[12-01 14:50:28] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages WHERE id = ? LIMIT 1 succeed
[12-01 14:50:28] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416455798789816320,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","sender_id":7416184085095137280,"text":"12","timestamp":1768220853}
[12-01 14:50:28] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=1595657087:params=-2100054534 - [{"chat_id":7416185797688197120,"id":7416455798789816320,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","sender_id":7416184085095137280,"text":"12","timestamp":1768220853}] for 628682 seconds
[12-01 14:50:28] [info] [SelectQuery<Message>::execute] Results has 1 size
[12-01 14:50:28] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416455798789816320,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","sender_id":7416184085095137280,"text":"12","timestamp":1768220853}
[12-01 14:50:28] [info] [] Server::handleGetMessage took 0.002 s
[12-01 14:50:56] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[12-01 14:50:56] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[12-01 14:50:56] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 14:50:56] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 14:50:56] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=222769076:params=-1176851807'
[12-01 14:50:56] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[12-01 14:50:56] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=222769076:params=-1176851807'
[12-01 14:50:56] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[12-01 14:50:56] [info] [SqlExecutor::execute] Execute 
[12-01 14:50:56] [info] [SqlExecutor::execute] Execute 
[12-01 14:50:56] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[12-01 14:50:56] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[12-01 14:50:56] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20'
[12-01 14:50:56] [info] [] SqlExecutor::execute took 0.006 s
[12-01 14:50:56] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20 succeed
[12-01 14:50:56] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20'
[12-01 14:50:56] [info] [] SqlExecutor::execute took 0.006 s
[12-01 14:50:56] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20 succeed
[12-01 14:50:56] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416455798789816320,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","sender_id":7416184085095137280,"text":"12","timestamp":1768220853}
[12-01 14:50:56] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416455798789816320,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","sender_id":7416184085095137280,"text":"12","timestamp":1768220853}
[12-01 14:50:56] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=222769076:params=-1176851807 - [{"chat_id":7416185797688197120,"id":7416455798789816320,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","sender_id":7416184085095137280,"text":"12","timestamp":1768220853}] for 300 seconds
[12-01 14:50:56] [info] [SelectQuery<Message>::execute] Results has 1 size
[12-01 14:50:56] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[12-01 14:50:56] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=222769076:params=-1176851807 - [{"chat_id":7416185797688197120,"id":7416455798789816320,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","sender_id":7416184085095137280,"text":"12","timestamp":1768220853}] for 300 seconds
[12-01 14:50:56] [info] [SelectQuery<Message>::execute] Results has 1 size
[12-01 14:50:56] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[12-01 14:50:56] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=1381819595:params=1898207406'
[12-01 14:50:56] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[12-01 14:50:56] [info] [SqlExecutor::execute] Execute 
[12-01 14:50:56] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[12-01 14:50:56] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=1381819595:params=1898207406'
[12-01 14:50:56] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[12-01 14:50:56] [info] [SqlExecutor::execute] Execute 
[12-01 14:50:56] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[12-01 14:50:56] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[12-01 14:50:56] [info] [] SqlExecutor::execute took 0.001 s
[12-01 14:50:56] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[12-01 14:50:56] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[12-01 14:50:56] [info] [] SqlExecutor::execute took 0.000 s
[12-01 14:50:56] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[12-01 14:50:56] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416455798789816320,"read_at":1768222228,"receiver_id":7416184085095137280}
[12-01 14:50:56] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416455798789816320,"read_at":1768222228,"receiver_id":7416184085095137280}
[12-01 14:50:56] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=1381819595:params=1898207406 - [{"is_read":true,"message_id":7416455798789816320,"read_at":1768222228,"receiver_id":7416184085095137280}] for 1025858 seconds
[12-01 14:50:56] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[12-01 14:50:56] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[12-01 14:50:56] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=1381819595:params=1898207406 - [{"is_read":true,"message_id":7416455798789816320,"read_at":1768222228,"receiver_id":7416184085095137280}] for 1559021 seconds
[12-01 14:50:56] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[12-01 14:50:56] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[12-01 14:50:56] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=1381819595:params=-1073355509'
[12-01 14:50:56] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[12-01 14:50:56] [info] [SqlExecutor::execute] Execute 
[12-01 14:50:56] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[12-01 14:50:56] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[12-01 14:50:56] [info] [] SqlExecutor::execute took 0.000 s
[12-01 14:50:56] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[12-01 14:50:56] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416455798789816320,"read_at":1768222228,"receiver_id":7416184085095137280}
[12-01 14:50:56] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=1381819595:params=-1073355509'
[12-01 14:50:56] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[12-01 14:50:56] [info] [SqlExecutor::execute] Execute 
[12-01 14:50:56] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[12-01 14:50:56] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[12-01 14:50:56] [info] [] SqlExecutor::execute took 0.000 s
[12-01 14:50:56] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[12-01 14:50:56] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416455798789816320,"read_at":1768222228,"receiver_id":7416184085095137280}
[12-01 14:50:56] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=1381819595:params=-1073355509 - [{"is_read":true,"message_id":7416455798789816320,"read_at":1768222228,"receiver_id":7416184085095137280}] for 300 seconds
[12-01 14:50:56] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[12-01 14:50:56] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[12-01 14:50:56] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=1381819595:params=-1073355509 - [{"is_read":true,"message_id":7416455798789816320,"read_at":1768222228,"receiver_id":7416184085095137280}] for 768736 seconds
[12-01 14:50:56] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[12-01 14:50:56] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[12-01 14:50:56] [info] [] Server::handleGetMessagesFromChat took 0.039 s
[12-01 14:50:56] [info] [] Server::handleGetMessagesFromChat took 0.039 s
[12-01 14:50:57] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":true,"message_id":7416455798789816320,"read_at":1768222256,"receiver_id":7416184085095137280}
[12-01 14:50:57] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[12-01 14:50:57] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":true,"message_id":7416455798789816320,"read_at":1768222256,"receiver_id":7416184085095137280}
[12-01 14:50:57] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[12-01 14:50:57] [info] [SqlExecutor::execute] Execute 
[12-01 14:50:57] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[12-01 14:50:57] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[12-01 14:50:57] [info] [] SqlExecutor::execute took 0.002 s
[12-01 14:50:57] [info] [GenericRepository::save] Save succeed for json: {"is_read":true,"message_id":7416455798789816320,"read_at":1768222256,"receiver_id":7416184085095137280}
[12-01 14:50:57] [info] [RedisCache::set] Set entity_cache:messages_status:7416455798789816320 - {"is_read":true,"message_id":7416455798789816320,"read_at":1768222256,"receiver_id":7416184085095137280} for 1533936 seconds
[12-01 14:50:57] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[12-01 14:50:57] [info] [RabbitMQClient::declareExchange] app.events already exist
[12-01 14:50:57] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":true,"message_id":7416455798789816320,"read_at":1768222256,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[12-01 14:50:57] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":true,"message_id":7416455798789816320,"read_at":1768222256,"receiver_id":7416184085095137280}' to exchange 'app.events' with key 'direct'
[12-01 14:50:57] [info] [Controller::getMessageById] getMessageById 7416455798789816320
[12-01 14:50:57] [info] [GenericRepository::findOne] Id in dindOne 7416455798789816320
[12-01 14:50:57] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=1595657087:params=-2100054534'
[12-01 14:50:57] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 14:50:57] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=1595657087:params=-2100054534
[12-01 14:50:57] [info] [] Send responce code 200 and body {"chat_id":7416185797688197120,"id":7416455798789816320,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","sender_id":7416184085095137280,"text":"12","timestamp":1768220853}
[12-01 14:50:57] [info] [] Server::handleGetMessage took 0.001 s
[12-01 21:13:06] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[12-01 21:13:06] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[12-01 21:13:06] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 21:13:06] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 21:13:06] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[12-01 21:13:06] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[12-01 21:13:06] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[12-01 21:13:06] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[12-01 21:13:06] [info] [SqlExecutor::execute] Execute 
[12-01 21:13:06] [info] [SqlExecutor::execute] Execute 
[12-01 21:13:06] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[12-01 21:13:06] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[12-01 21:13:06] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20'
[12-01 21:13:06] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20'
[12-01 21:13:06] [info] [] SqlExecutor::execute took 0.009 s
[12-01 21:13:06] [info] [] SqlExecutor::execute took 0.009 s
[12-01 21:13:06] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20 succeed
[12-01 21:13:06] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20 succeed
[12-01 21:13:06] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416455798789816320,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","sender_id":7416184085095137280,"text":"12","timestamp":1768220853}
[12-01 21:13:06] [info] [SqlBuilder::buildResults] Select {"chat_id":7416185797688197120,"id":7416455798789816320,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","sender_id":7416184085095137280,"text":"12","timestamp":1768220853}
[12-01 21:13:06] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807 - [{"chat_id":7416185797688197120,"id":7416455798789816320,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","sender_id":7416184085095137280,"text":"12","timestamp":1768220853}] for 300 seconds
[12-01 21:13:06] [info] [SelectQuery<Message>::execute] Results has 1 size
[12-01 21:13:06] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[12-01 21:13:06] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807 - [{"chat_id":7416185797688197120,"id":7416455798789816320,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","sender_id":7416184085095137280,"text":"12","timestamp":1768220853}] for 1540882 seconds
[12-01 21:13:06] [info] [SelectQuery<Message>::execute] Results has 1 size
[12-01 21:13:06] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[12-01 21:13:06] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[12-01 21:13:06] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[12-01 21:13:06] [info] [SqlExecutor::execute] Execute 
[12-01 21:13:06] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[12-01 21:13:06] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[12-01 21:13:06] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[12-01 21:13:06] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[12-01 21:13:06] [info] [] SqlExecutor::execute took 0.000 s
[12-01 21:13:06] [info] [SqlExecutor::execute] Execute 
[12-01 21:13:06] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[12-01 21:13:06] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[12-01 21:13:06] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416455798789816320,"read_at":1768222256,"receiver_id":7416184085095137280}
[12-01 21:13:06] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[12-01 21:13:06] [info] [] SqlExecutor::execute took 0.000 s
[12-01 21:13:06] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[12-01 21:13:06] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416455798789816320,"read_at":1768222256,"receiver_id":7416184085095137280}
[12-01 21:13:06] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406 - [{"is_read":true,"message_id":7416455798789816320,"read_at":1768222256,"receiver_id":7416184085095137280}] for 300 seconds
[12-01 21:13:06] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[12-01 21:13:06] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[12-01 21:13:06] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406 - [{"is_read":true,"message_id":7416455798789816320,"read_at":1768222256,"receiver_id":7416184085095137280}] for 300 seconds
[12-01 21:13:06] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[12-01 21:13:06] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[12-01 21:13:06] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[12-01 21:13:06] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[12-01 21:13:06] [info] [SqlExecutor::execute] Execute 
[12-01 21:13:06] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[12-01 21:13:06] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[12-01 21:13:06] [info] [SqlExecutor::execute] Execute 
[12-01 21:13:06] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[12-01 21:13:06] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[12-01 21:13:06] [info] [] SqlExecutor::execute took 0.000 s
[12-01 21:13:06] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[12-01 21:13:06] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[12-01 21:13:06] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[12-01 21:13:06] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416455798789816320,"read_at":1768222256,"receiver_id":7416184085095137280}
[12-01 21:13:06] [info] [] SqlExecutor::execute took 0.000 s
[12-01 21:13:06] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[12-01 21:13:06] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416455798789816320,"read_at":1768222256,"receiver_id":7416184085095137280}
[12-01 21:13:06] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509 - [{"is_read":true,"message_id":7416455798789816320,"read_at":1768222256,"receiver_id":7416184085095137280}] for 74932 seconds
[12-01 21:13:06] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[12-01 21:13:06] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[12-01 21:13:06] [info] [] Server::handleGetMessagesFromChat took 0.037 s
[12-01 21:13:06] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509 - [{"is_read":true,"message_id":7416455798789816320,"read_at":1768222256,"receiver_id":7416184085095137280}] for 300 seconds
[12-01 21:13:06] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[12-01 21:13:06] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[12-01 21:13:06] [info] [] Server::handleGetMessagesFromChat took 0.037 s
[12-01 21:32:59] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[12-01 21:32:59] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[12-01 21:32:59] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 21:32:59] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 21:32:59] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[12-01 21:32:59] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[12-01 21:32:59] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 21:32:59] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 21:32:59] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[12-01 21:32:59] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[12-01 21:32:59] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[12-01 21:32:59] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[12-01 21:32:59] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[12-01 21:32:59] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[12-01 21:32:59] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[12-01 21:32:59] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[12-01 21:32:59] [info] [SqlExecutor::execute] Execute 
[12-01 21:32:59] [info] [SqlExecutor::execute] Execute 
[12-01 21:32:59] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[12-01 21:32:59] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?
[12-01 21:32:59] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[12-01 21:32:59] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?'
[12-01 21:32:59] [info] [] SqlExecutor::execute took 0.008 s
[12-01 21:32:59] [info] [] SqlExecutor::execute took 0.008 s
[12-01 21:32:59] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[12-01 21:32:59] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ? succeed
[12-01 21:32:59] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416455798789816320,"read_at":1768222256,"receiver_id":7416184085095137280}
[12-01 21:32:59] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416455798789816320,"read_at":1768222256,"receiver_id":7416184085095137280}
[12-01 21:32:59] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406 - [{"is_read":true,"message_id":7416455798789816320,"read_at":1768222256,"receiver_id":7416184085095137280}] for 840746 seconds
[12-01 21:32:59] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[12-01 21:32:59] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406 - [{"is_read":true,"message_id":7416455798789816320,"read_at":1768222256,"receiver_id":7416184085095137280}] for 1245331 seconds
[12-01 21:32:59] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[12-01 21:32:59] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[12-01 21:32:59] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[12-01 21:32:59] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[12-01 21:32:59] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[12-01 21:32:59] [info] [SqlExecutor::execute] Execute 
[12-01 21:32:59] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[12-01 21:32:59] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[12-01 21:32:59] [info] [] SqlExecutor::execute took 0.000 s
[12-01 21:32:59] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[12-01 21:32:59] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416455798789816320,"read_at":1768222256,"receiver_id":7416184085095137280}
[12-01 21:32:59] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[12-01 21:32:59] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[12-01 21:32:59] [info] [SqlExecutor::execute] Execute 
[12-01 21:32:59] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[12-01 21:32:59] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[12-01 21:32:59] [info] [] SqlExecutor::execute took 0.000 s
[12-01 21:32:59] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[12-01 21:32:59] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416455798789816320,"read_at":1768222256,"receiver_id":7416184085095137280}
[12-01 21:32:59] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509 - [{"is_read":true,"message_id":7416455798789816320,"read_at":1768222256,"receiver_id":7416184085095137280}] for 300 seconds
[12-01 21:32:59] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[12-01 21:32:59] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[12-01 21:32:59] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509 - [{"is_read":true,"message_id":7416455798789816320,"read_at":1768222256,"receiver_id":7416184085095137280}] for 1130874 seconds
[12-01 21:32:59] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[12-01 21:32:59] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[12-01 21:32:59] [info] [] Server::handleGetMessagesFromChat took 0.053 s
[12-01 21:32:59] [info] [] Server::handleGetMessagesFromChat took 0.053 s
[12-01 21:37:04] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[12-01 21:37:04] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[12-01 21:37:04] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 21:37:04] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 21:37:04] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[12-01 21:37:04] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 21:37:04] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[12-01 21:37:04] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[12-01 21:37:04] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[12-01 21:37:04] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 21:37:04] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[12-01 21:37:04] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[12-01 21:37:04] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[12-01 21:37:04] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 21:37:04] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[12-01 21:37:04] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[12-01 21:37:04] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[12-01 21:37:04] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 21:37:04] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[12-01 21:37:04] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[12-01 21:37:04] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[12-01 21:37:04] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 21:37:04] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[12-01 21:37:04] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[12-01 21:37:04] [info] [] Server::handleGetMessagesFromChat took 0.009 s
[12-01 21:37:04] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[12-01 21:37:04] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 21:37:04] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[12-01 21:37:04] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[12-01 21:37:04] [info] [] Server::handleGetMessagesFromChat took 0.010 s
[12-01 21:45:47] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[12-01 21:45:47] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[12-01 21:45:47] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 21:45:47] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 21:45:47] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[12-01 21:45:47] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[12-01 21:45:47] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 21:45:47] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 21:45:47] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[12-01 21:45:47] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[12-01 21:45:47] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[12-01 21:45:47] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[12-01 21:45:47] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[12-01 21:45:47] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 21:45:47] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[12-01 21:45:47] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[12-01 21:45:47] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[12-01 21:45:47] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 21:45:47] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[12-01 21:45:47] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[12-01 21:45:47] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[12-01 21:45:47] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 21:45:47] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[12-01 21:45:47] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[12-01 21:45:47] [info] [] Server::handleGetMessagesFromChat took 0.047 s
[12-01 21:45:47] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[12-01 21:45:47] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 21:45:47] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[12-01 21:45:47] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[12-01 21:45:47] [info] [] Server::handleGetMessagesFromChat took 0.047 s
[12-01 21:58:01] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[12-01 21:58:01] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[12-01 21:58:01] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 21:58:01] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 21:58:01] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[12-01 21:58:01] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[12-01 21:58:01] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 21:58:01] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[12-01 21:58:01] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 21:58:01] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[12-01 21:58:01] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[12-01 21:58:01] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[12-01 21:58:01] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[12-01 21:58:01] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 21:58:01] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[12-01 21:58:01] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[12-01 21:58:01] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[12-01 21:58:01] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 21:58:01] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[12-01 21:58:01] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[12-01 21:58:01] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[12-01 21:58:01] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 21:58:01] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[12-01 21:58:01] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[12-01 21:58:01] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[12-01 21:58:01] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 21:58:01] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[12-01 21:58:01] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[12-01 21:58:01] [info] [] Server::handleGetMessagesFromChat took 0.026 s
[12-01 21:58:01] [info] [] Server::handleGetMessagesFromChat took 0.026 s
[12-01 22:09:53] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[12-01 22:09:53] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[12-01 22:09:53] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 22:09:53] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 22:09:53] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[12-01 22:09:53] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[12-01 22:09:53] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 22:09:53] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 22:09:53] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[12-01 22:09:53] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[12-01 22:09:53] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[12-01 22:09:53] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[12-01 22:09:53] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[12-01 22:09:53] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 22:09:53] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[12-01 22:09:53] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[12-01 22:09:53] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 22:09:53] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[12-01 22:09:53] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[12-01 22:09:53] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[12-01 22:09:53] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[12-01 22:09:53] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 22:09:53] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[12-01 22:09:53] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[12-01 22:09:53] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[12-01 22:09:53] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 22:09:53] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[12-01 22:09:53] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[12-01 22:09:53] [info] [] Server::handleGetMessagesFromChat took 0.037 s
[12-01 22:09:53] [info] [] Server::handleGetMessagesFromChat took 0.037 s
[12-01 23:10:32] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[12-01 23:10:32] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[12-01 23:10:32] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 23:10:32] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 23:10:32] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[12-01 23:10:32] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[12-01 23:10:32] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:10:32] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:10:32] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[12-01 23:10:32] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[12-01 23:10:32] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[12-01 23:10:32] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[12-01 23:10:32] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[12-01 23:10:32] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:10:32] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[12-01 23:10:32] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[12-01 23:10:32] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:10:32] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[12-01 23:10:32] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[12-01 23:10:32] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[12-01 23:10:32] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[12-01 23:10:32] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:10:32] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[12-01 23:10:32] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[12-01 23:10:32] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[12-01 23:10:32] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:10:32] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[12-01 23:10:32] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[12-01 23:10:32] [info] [] Server::handleGetMessagesFromChat took 0.030 s
[12-01 23:10:32] [info] [] Server::handleGetMessagesFromChat took 0.030 s
[12-01 23:21:00] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[12-01 23:21:00] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[12-01 23:21:00] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 23:21:00] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 23:21:00] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[12-01 23:21:00] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[12-01 23:21:00] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:21:00] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:21:00] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[12-01 23:21:00] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[12-01 23:21:00] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[12-01 23:21:00] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[12-01 23:21:00] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[12-01 23:21:00] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:21:00] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[12-01 23:21:00] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[12-01 23:21:00] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[12-01 23:21:00] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:21:00] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[12-01 23:21:00] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[12-01 23:21:00] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[12-01 23:21:00] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:21:00] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[12-01 23:21:00] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[12-01 23:21:00] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[12-01 23:21:00] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:21:00] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[12-01 23:21:00] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[12-01 23:21:00] [info] [] Server::handleGetMessagesFromChat took 0.035 s
[12-01 23:21:00] [info] [] Server::handleGetMessagesFromChat took 0.035 s
[12-01 23:38:51] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[12-01 23:38:51] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[12-01 23:38:51] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 23:38:51] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 23:38:51] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[12-01 23:38:51] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[12-01 23:38:51] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:38:51] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:38:51] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[12-01 23:38:51] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[12-01 23:38:51] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[12-01 23:38:51] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[12-01 23:38:51] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[12-01 23:38:51] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:38:51] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[12-01 23:38:51] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[12-01 23:38:51] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[12-01 23:38:51] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:38:51] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[12-01 23:38:51] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[12-01 23:38:51] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[12-01 23:38:51] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:38:51] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[12-01 23:38:51] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[12-01 23:38:51] [info] [] Server::handleGetMessagesFromChat took 0.027 s
[12-01 23:38:51] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[12-01 23:38:51] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:38:51] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[12-01 23:38:51] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[12-01 23:38:51] [info] [] Server::handleGetMessagesFromChat took 0.028 s
[12-01 23:49:25] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[12-01 23:49:25] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[12-01 23:49:25] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 23:49:25] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 23:49:25] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[12-01 23:49:25] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[12-01 23:49:25] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:49:25] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:49:25] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[12-01 23:49:25] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[12-01 23:49:25] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[12-01 23:49:25] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[12-01 23:49:25] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[12-01 23:49:25] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:49:25] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[12-01 23:49:25] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[12-01 23:49:25] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[12-01 23:49:25] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:49:25] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[12-01 23:49:25] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[12-01 23:49:25] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[12-01 23:49:25] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:49:25] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[12-01 23:49:25] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[12-01 23:49:25] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[12-01 23:49:25] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:49:25] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[12-01 23:49:25] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[12-01 23:49:25] [info] [] Server::handleGetMessagesFromChat took 0.033 s
[12-01 23:49:25] [info] [] Server::handleGetMessagesFromChat took 0.033 s
[12-01 23:56:36] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[12-01 23:56:36] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[12-01 23:56:36] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 23:56:36] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 23:56:36] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[12-01 23:56:36] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[12-01 23:56:36] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:56:36] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:56:36] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[12-01 23:56:36] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[12-01 23:56:36] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[12-01 23:56:36] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[12-01 23:56:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[12-01 23:56:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:56:36] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[12-01 23:56:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[12-01 23:56:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:56:36] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[12-01 23:56:36] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[12-01 23:56:36] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[12-01 23:56:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[12-01 23:56:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:56:36] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[12-01 23:56:36] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[12-01 23:56:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[12-01 23:56:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:56:36] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[12-01 23:56:36] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[12-01 23:56:36] [info] [] Server::handleGetMessagesFromChat took 0.033 s
[12-01 23:56:36] [info] [] Server::handleGetMessagesFromChat took 0.033 s
[12-01 23:59:48] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[12-01 23:59:48] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[12-01 23:59:48] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 23:59:48] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[12-01 23:59:48] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[12-01 23:59:48] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[12-01 23:59:48] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:59:48] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:59:48] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[12-01 23:59:48] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[12-01 23:59:48] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[12-01 23:59:48] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[12-01 23:59:48] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[12-01 23:59:48] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:59:48] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[12-01 23:59:48] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[12-01 23:59:48] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:59:48] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[12-01 23:59:48] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[12-01 23:59:48] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[12-01 23:59:48] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[12-01 23:59:48] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:59:48] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[12-01 23:59:48] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[12-01 23:59:48] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[12-01 23:59:48] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[12-01 23:59:48] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[12-01 23:59:48] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[12-01 23:59:48] [info] [] Server::handleGetMessagesFromChat took 0.034 s
[12-01 23:59:48] [info] [] Server::handleGetMessagesFromChat took 0.034 s
[13-01 00:15:30] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[13-01 00:15:30] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[13-01 00:15:30] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[13-01 00:15:30] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[13-01 00:15:30] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[13-01 00:15:30] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[13-01 00:15:30] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 00:15:30] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[13-01 00:15:30] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 00:15:30] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[13-01 00:15:30] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[13-01 00:15:30] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[13-01 00:15:30] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[13-01 00:15:30] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[13-01 00:15:30] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 00:15:30] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 00:15:30] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[13-01 00:15:30] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[13-01 00:15:30] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[13-01 00:15:30] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[13-01 00:15:30] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[13-01 00:15:30] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 00:15:30] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[13-01 00:15:30] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[13-01 00:15:30] [info] [] Server::handleGetMessagesFromChat took 0.037 s
[13-01 00:15:30] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[13-01 00:15:30] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 00:15:30] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[13-01 00:15:30] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[13-01 00:15:30] [info] [] Server::handleGetMessagesFromChat took 0.037 s
[13-01 00:16:56] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[13-01 00:16:56] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[13-01 00:16:56] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[13-01 00:16:56] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[13-01 00:16:56] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[13-01 00:16:56] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 00:16:56] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[13-01 00:16:56] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[13-01 00:16:56] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[13-01 00:16:56] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 00:16:56] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[13-01 00:16:56] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[13-01 00:16:56] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[13-01 00:16:56] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 00:16:56] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[13-01 00:16:56] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[13-01 00:16:56] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[13-01 00:16:56] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 00:16:56] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[13-01 00:16:56] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[13-01 00:16:56] [info] [] Server::handleGetMessagesFromChat took 0.010 s
[13-01 00:16:56] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[13-01 00:16:56] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 00:16:56] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[13-01 00:16:56] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[13-01 00:16:56] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[13-01 00:16:56] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 00:16:56] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[13-01 00:16:56] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[13-01 00:16:56] [info] [] Server::handleGetMessagesFromChat took 0.012 s
[13-01 00:23:24] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[13-01 00:23:24] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[13-01 00:23:24] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[13-01 00:23:24] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[13-01 00:23:24] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[13-01 00:23:24] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[13-01 00:23:24] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 00:23:24] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 00:23:24] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[13-01 00:23:24] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[13-01 00:23:24] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[13-01 00:23:24] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[13-01 00:23:24] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[13-01 00:23:24] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 00:23:24] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[13-01 00:23:24] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[13-01 00:23:24] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 00:23:24] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[13-01 00:23:24] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[13-01 00:23:24] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[13-01 00:23:24] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[13-01 00:23:24] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 00:23:24] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[13-01 00:23:24] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[13-01 00:23:24] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[13-01 00:23:24] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 00:23:24] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[13-01 00:23:24] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[13-01 00:23:24] [info] [] Server::handleGetMessagesFromChat took 0.032 s
[13-01 00:23:24] [info] [] Server::handleGetMessagesFromChat took 0.032 s
[13-01 00:23:37] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[13-01 00:23:37] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[13-01 00:23:37] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[13-01 00:23:37] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[13-01 00:23:37] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[13-01 00:23:37] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 00:23:37] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[13-01 00:23:37] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[13-01 00:23:37] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[13-01 00:23:37] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 00:23:37] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[13-01 00:23:37] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[13-01 00:23:37] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[13-01 00:23:37] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 00:23:37] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[13-01 00:23:37] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[13-01 00:23:37] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[13-01 00:23:37] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 00:23:37] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[13-01 00:23:37] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[13-01 00:23:37] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[13-01 00:23:37] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 00:23:37] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[13-01 00:23:37] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[13-01 00:23:37] [info] [] Server::handleGetMessagesFromChat took 0.006 s
[13-01 00:23:37] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[13-01 00:23:37] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 00:23:37] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[13-01 00:23:37] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[13-01 00:23:37] [info] [] Server::handleGetMessagesFromChat took 0.007 s
[13-01 01:12:24] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[13-01 01:12:24] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[13-01 01:12:24] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[13-01 01:12:24] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[13-01 01:12:24] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[13-01 01:12:24] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[13-01 01:12:24] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 01:12:24] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 01:12:24] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[13-01 01:12:24] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[13-01 01:12:24] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[13-01 01:12:24] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[13-01 01:12:24] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[13-01 01:12:24] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 01:12:24] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[13-01 01:12:24] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[13-01 01:12:24] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[13-01 01:12:24] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 01:12:24] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[13-01 01:12:24] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[13-01 01:12:24] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[13-01 01:12:24] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 01:12:24] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[13-01 01:12:24] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[13-01 01:12:24] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[13-01 01:12:24] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 01:12:24] [info] [] Server::handleGetMessagesFromChat took 0.030 s
[13-01 01:12:24] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[13-01 01:12:24] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[13-01 01:12:24] [info] [] Server::handleGetMessagesFromChat took 0.030 s
[13-01 01:13:24] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[13-01 01:13:24] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[13-01 01:13:24] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[13-01 01:13:24] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[13-01 01:13:24] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[13-01 01:13:24] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[13-01 01:13:24] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 01:13:24] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 01:13:24] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[13-01 01:13:24] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[13-01 01:13:24] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[13-01 01:13:24] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[13-01 01:13:24] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[13-01 01:13:24] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[13-01 01:13:24] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 01:13:24] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 01:13:24] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[13-01 01:13:24] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[13-01 01:13:24] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[13-01 01:13:24] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[13-01 01:13:24] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[13-01 01:13:24] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 01:13:24] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[13-01 01:13:24] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[13-01 01:13:24] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[13-01 01:13:24] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 01:13:24] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[13-01 01:13:24] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[13-01 01:13:24] [info] [] Server::handleGetMessagesFromChat took 0.039 s
[13-01 01:13:24] [info] [] Server::handleGetMessagesFromChat took 0.038 s
[13-01 01:18:51] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[13-01 01:18:51] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[13-01 01:18:51] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[13-01 01:18:51] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[13-01 01:18:51] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[13-01 01:18:51] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[13-01 01:18:51] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 01:18:51] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 01:18:51] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[13-01 01:18:51] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[13-01 01:18:51] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[13-01 01:18:51] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[13-01 01:18:51] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[13-01 01:18:51] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 01:18:51] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[13-01 01:18:51] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[13-01 01:18:51] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 01:18:51] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[13-01 01:18:51] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[13-01 01:18:51] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[13-01 01:18:51] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[13-01 01:18:51] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 01:18:51] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[13-01 01:18:51] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[13-01 01:18:51] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[13-01 01:18:51] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 01:18:51] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[13-01 01:18:51] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[13-01 01:18:51] [info] [] Server::handleGetMessagesFromChat took 0.043 s
[13-01 01:18:51] [info] [] Server::handleGetMessagesFromChat took 0.043 s
[13-01 01:21:06] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[13-01 01:21:06] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416185797688197120
[13-01 01:21:06] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[13-01 01:21:06] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416184085095137280'
[13-01 01:21:06] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[13-01 01:21:06] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807'
[13-01 01:21:06] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 01:21:06] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 01:21:06] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[13-01 01:21:06] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1176851807
[13-01 01:21:06] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[13-01 01:21:06] [info] [Controller::getMessagesFromChat] For 7416185797688197120 chat finded 1 messages
[13-01 01:21:06] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[13-01 01:21:06] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406'
[13-01 01:21:06] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 01:21:06] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 01:21:06] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[13-01 01:21:06] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND receiver_id = ?:gen=-1588680478:params=1898207406
[13-01 01:21:06] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[13-01 01:21:06] [info] [utils::entities::to_crow_json] Local_id for text 12 is {086972bf-10f8-493a-9f1e-7ef1b940f74f}
[13-01 01:21:06] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[13-01 01:21:06] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 01:21:06] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[13-01 01:21:06] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[13-01 01:21:06] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509'
[13-01 01:21:06] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 01:21:06] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1588680478:params=-1073355509
[13-01 01:21:06] [info] [] Send responce code 200 and body [{"readed_by_me":true,"local_id":"{086972bf-10f8-493a-9f1e-7ef1b940f74f}","timestamp":1768220853,"text":"12","chat_id":7416185797688197120,"sender_id":7416184085095137280,"id":7416455798789816320}]
[13-01 01:21:06] [info] [] Server::handleGetMessagesFromChat took 0.036 s
[13-01 01:21:06] [info] [] Server::handleGetMessagesFromChat took 0.036 s
[13-01 18:30:27] [info] [] Logger initialized for service 'MessageService'
[13-01 18:30:27] [error] [SQLiteDatabase::executeSql] SQL error: near "(": syntax error Unable to execute statement
[13-01 18:32:18] [info] [] Logger initialized for service 'MessageService'
[13-01 18:32:18] [info] [SQLiteDatabase::initializeSchema] Database schema initialized successfully
[13-01 18:32:18] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message
[13-01 18:32:18] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_status
[13-01 18:32:18] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_reaction
[13-01 18:32:18] [info] [RabbitMQClient::subscribe] Subscrive: app.events | delete_message_reaction
[13-01 18:32:18] [info] [Server::run] [Message server is started on port '8082'
[13-01 18:32:43] [info] [] Logger initialized for service 'MessageService'
[13-01 18:32:43] [info] [SQLiteDatabase::initializeSchema] Database schema initialized successfully
[13-01 18:32:43] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message
[13-01 18:32:43] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_status
[13-01 18:32:43] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_reaction
[13-01 18:32:43] [info] [RabbitMQClient::subscribe] Subscrive: app.events | delete_message_reaction
[13-01 18:32:43] [info] [Server::run] [Message server is started on port '8082'
[13-01 18:32:43] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 18:32:43] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 18:32:43] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 18:32:43] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 18:32:43] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'delete_message_reaction' bound to exchange 'app.events' with key 'delete_message_reaction'
[13-01 18:32:43] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'delete_message_reaction' in queue 'delete_message_reaction'
[13-01 18:32:43] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessage' bound to exchange 'app.events' with key 'save_message'
[13-01 18:32:43] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessageStatus' bound to exchange 'app.events' with key 'save_message_status'
[13-01 18:32:43] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'save_message_reaction' bound to exchange 'app.events' with key 'save_message_reaction'
[13-01 18:32:43] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message_status' in queue 'QueueSaveMessageStatus'
[13-01 18:32:43] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message' in queue 'QueueSaveMessage'
[13-01 18:32:43] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message_reaction' in queue 'save_message_reaction'
[13-01 18:36:20] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 18:36:20] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 18:36:20] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 18:36:20] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 18:36:20] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1576370830'
[13-01 18:36:20] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 18:36:20] [info] [SqlExecutor::execute] Execute SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 18:43:47] [info] [] Logger initialized for service 'MessageService'
[13-01 18:43:47] [info] [SQLiteDatabase::initializeSchema] Database schema initialized successfully
[13-01 18:43:47] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message
[13-01 18:43:47] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_status
[13-01 18:43:47] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_reaction
[13-01 18:43:47] [info] [RabbitMQClient::subscribe] Subscrive: app.events | delete_message_reaction
[13-01 18:43:47] [info] [Server::run] [Message server is started on port '8082'
[13-01 18:43:47] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 18:43:47] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 18:43:47] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 18:43:47] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 18:43:47] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'save_message_reaction' bound to exchange 'app.events' with key 'save_message_reaction'
[13-01 18:43:47] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessageStatus' bound to exchange 'app.events' with key 'save_message_status'
[13-01 18:43:47] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessage' bound to exchange 'app.events' with key 'save_message'
[13-01 18:43:47] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'delete_message_reaction' bound to exchange 'app.events' with key 'delete_message_reaction'
[13-01 18:43:47] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message_reaction' in queue 'save_message_reaction'
[13-01 18:43:47] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'delete_message_reaction' in queue 'delete_message_reaction'
[13-01 18:43:47] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message_status' in queue 'QueueSaveMessageStatus'
[13-01 18:43:47] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message' in queue 'QueueSaveMessage'
[13-01 18:44:33] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 18:44:33] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 18:44:33] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 18:44:33] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 18:46:14] [info] [] Logger initialized for service 'MessageService'
[13-01 18:46:14] [info] [SQLiteDatabase::initializeSchema] Database schema initialized successfully
[13-01 18:46:14] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message
[13-01 18:46:14] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_status
[13-01 18:46:14] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_reaction
[13-01 18:46:14] [info] [RabbitMQClient::subscribe] Subscrive: app.events | delete_message_reaction
[13-01 18:46:14] [info] [Server::run] [Message server is started on port '8082'
[13-01 18:46:14] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 18:46:14] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 18:46:14] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 18:46:14] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 18:46:14] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'save_message_reaction' bound to exchange 'app.events' with key 'save_message_reaction'
[13-01 18:46:14] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'delete_message_reaction' bound to exchange 'app.events' with key 'delete_message_reaction'
[13-01 18:46:14] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessageStatus' bound to exchange 'app.events' with key 'save_message_status'
[13-01 18:46:14] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessage' bound to exchange 'app.events' with key 'save_message'
[13-01 18:46:14] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message_status' in queue 'QueueSaveMessageStatus'
[13-01 18:46:14] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'delete_message_reaction' in queue 'delete_message_reaction'
[13-01 18:46:14] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message' in queue 'QueueSaveMessage'
[13-01 18:46:14] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message_reaction' in queue 'save_message_reaction'
[13-01 18:47:06] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 18:47:06] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 18:47:06] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 18:47:06] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 18:47:06] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1576370830'
[13-01 18:53:21] [info] [] Logger initialized for service 'MessageService'
[13-01 18:53:21] [info] [SQLiteDatabase::initializeSchema] Database schema initialized successfully
[13-01 18:53:21] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message
[13-01 18:53:21] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_status
[13-01 18:53:21] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_reaction
[13-01 18:53:21] [info] [RabbitMQClient::subscribe] Subscrive: app.events | delete_message_reaction
[13-01 18:53:21] [info] [Server::run] [Message server is started on port '8082'
[13-01 18:53:21] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 18:53:21] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 18:53:21] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 18:53:21] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 18:53:21] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessageStatus' bound to exchange 'app.events' with key 'save_message_status'
[13-01 18:53:21] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message_status' in queue 'QueueSaveMessageStatus'
[13-01 18:53:21] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessage' bound to exchange 'app.events' with key 'save_message'
[13-01 18:53:21] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'delete_message_reaction' bound to exchange 'app.events' with key 'delete_message_reaction'
[13-01 18:53:21] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'save_message_reaction' bound to exchange 'app.events' with key 'save_message_reaction'
[13-01 18:53:21] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'delete_message_reaction' in queue 'delete_message_reaction'
[13-01 18:53:21] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message_reaction' in queue 'save_message_reaction'
[13-01 18:53:21] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message' in queue 'QueueSaveMessage'
[13-01 18:53:38] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 18:53:38] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 18:53:38] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 18:53:38] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 18:53:38] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1576370830'
[13-01 18:53:38] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 18:53:38] [info] [SqlExecutor::execute] Execute SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 18:53:38] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1576370830'
[13-01 18:53:38] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 18:53:38] [info] [SqlExecutor::execute] Execute SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 18:53:38] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 18:53:38] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 18:53:38] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20'
[13-01 18:53:38] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20'
[13-01 18:53:38] [info] [] SqlExecutor::execute took 0.004 s
[13-01 18:53:38] [info] [] SqlExecutor::execute took 0.004 s
[13-01 18:53:38] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20 succeed
[13-01 18:53:38] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20 succeed
[13-01 18:53:38] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1576370830 - [] for 300 seconds
[13-01 18:53:38] [info] [SelectQuery<Message>::execute] Results has 0 size
[13-01 18:53:38] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 0 messages
[13-01 18:53:38] [info] [] Send responce code 200 and body null
[13-01 18:53:38] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1576370830 - [] for 300 seconds
[13-01 18:53:38] [info] [SelectQuery<Message>::execute] Results has 0 size
[13-01 18:53:38] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 0 messages
[13-01 18:53:38] [info] [] Send responce code 200 and body null
[13-01 18:53:38] [info] [] Server::handleGetMessagesFromChat took 0.052 s
[13-01 18:53:38] [info] [] Server::handleGetMessagesFromChat took 0.052 s
[13-01 18:57:17] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 18:57:17] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 18:57:17] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 18:57:17] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 18:57:17] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1576370830'
[13-01 18:57:17] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1576370830'
[13-01 18:57:17] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '0'
[13-01 18:57:17] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '0'
[13-01 18:57:17] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1576370830
[13-01 18:57:17] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 0 messages
[13-01 18:57:17] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1576370830
[13-01 18:57:17] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 0 messages
[13-01 18:57:17] [info] [] Send responce code 200 and body null
[13-01 18:57:17] [info] [] Send responce code 200 and body null
[13-01 18:57:17] [info] [] Server::handleGetMessagesFromChat took 0.018 s
[13-01 18:57:17] [info] [] Server::handleGetMessagesFromChat took 0.018 s
[13-01 19:03:10] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 19:03:10] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 19:03:10] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 19:03:10] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 19:03:10] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1576370830'
[13-01 19:03:10] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 19:03:10] [info] [SqlExecutor::execute] Execute SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 19:03:10] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1576370830'
[13-01 19:03:10] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 19:03:10] [info] [SqlExecutor::execute] Execute SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 19:03:10] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 19:03:10] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 19:03:10] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20'
[13-01 19:03:10] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20'
[13-01 19:03:10] [info] [] SqlExecutor::execute took 0.014 s
[13-01 19:03:10] [info] [] SqlExecutor::execute took 0.013 s
[13-01 19:03:10] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20 succeed
[13-01 19:03:10] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20 succeed
[13-01 19:03:10] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1576370830 - [] for 378556 seconds
[13-01 19:03:10] [info] [SelectQuery<Message>::execute] Results has 0 size
[13-01 19:03:10] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 0 messages
[13-01 19:03:10] [info] [] Send responce code 200 and body null
[13-01 19:03:10] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1576370830 - [] for 300 seconds
[13-01 19:03:10] [info] [SelectQuery<Message>::execute] Results has 0 size
[13-01 19:03:10] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 0 messages
[13-01 19:03:10] [info] [] Send responce code 200 and body null
[13-01 19:03:10] [info] [] Server::handleGetMessagesFromChat took 0.094 s
[13-01 19:03:10] [info] [] Server::handleGetMessagesFromChat took 0.094 s
[13-01 19:07:53] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 19:07:53] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 19:07:53] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 19:07:53] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 19:07:53] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1576370830'
[13-01 19:07:53] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1576370830'
[13-01 19:07:53] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '0'
[13-01 19:07:53] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '0'
[13-01 19:07:53] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1576370830
[13-01 19:07:53] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1576370830
[13-01 19:07:53] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 0 messages
[13-01 19:07:53] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 0 messages
[13-01 19:07:53] [info] [] Send responce code 200 and body null
[13-01 19:07:53] [info] [] Send responce code 200 and body null
[13-01 19:07:53] [info] [] Server::handleGetMessagesFromChat took 0.046 s
[13-01 19:07:53] [info] [] Server::handleGetMessagesFromChat took 0.046 s
[13-01 19:10:50] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 19:10:50] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 19:10:50] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 19:10:50] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 19:10:50] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1576370830'
[13-01 19:10:50] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1576370830'
[13-01 19:10:50] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 19:10:50] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 19:10:50] [info] [SqlExecutor::execute] Execute SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 19:10:50] [info] [SqlExecutor::execute] Execute SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 19:10:50] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 19:10:50] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 19:10:50] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20'
[13-01 19:10:50] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20'
[13-01 19:10:50] [info] [] SqlExecutor::execute took 0.014 s
[13-01 19:10:50] [info] [] SqlExecutor::execute took 0.014 s
[13-01 19:10:50] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20 succeed
[13-01 19:10:50] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20 succeed
[13-01 19:10:50] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1576370830 - [] for 300 seconds
[13-01 19:10:50] [info] [SelectQuery<Message>::execute] Results has 0 size
[13-01 19:10:50] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1576370830 - [] for 300 seconds
[13-01 19:10:50] [info] [SelectQuery<Message>::execute] Results has 0 size
[13-01 19:10:50] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 0 messages
[13-01 19:10:50] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 0 messages
[13-01 19:10:50] [info] [] Send responce code 200 and body null
[13-01 19:10:50] [info] [] Send responce code 200 and body null
[13-01 19:10:50] [info] [] Server::handleGetMessagesFromChat took 0.081 s
[13-01 19:10:50] [info] [] Server::handleGetMessagesFromChat took 0.081 s
[13-01 19:14:57] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 19:14:57] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 19:14:57] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 19:14:57] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 19:14:57] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1576370830'
[13-01 19:14:57] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1576370830'
[13-01 19:14:57] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '0'
[13-01 19:14:57] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '0'
[13-01 19:14:57] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1576370830
[13-01 19:14:57] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=-27958371:params=-1576370830
[13-01 19:14:57] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 0 messages
[13-01 19:14:57] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 0 messages
[13-01 19:14:57] [info] [] Send responce code 200 and body null
[13-01 19:14:57] [info] [] Send responce code 200 and body null
[13-01 19:14:57] [info] [] Server::handleGetMessagesFromChat took 0.049 s
[13-01 19:14:57] [info] [] Server::handleGetMessagesFromChat took 0.049 s
[13-01 19:15:00] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"chat_id":7416880792917278720,"event":"save_message","id":0,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}
[13-01 19:15:00] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message
[13-01 19:15:00] [info] [Controller::subscribeToSaveMessage] Getted event in subscribeToSaveMessage: save_message and payload {"chat_id":7416880792917278720,"event":"save_message","id":0,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}
[13-01 19:15:00] [info] [Controller::handleSaveMessage] Get message to save with id 0 and text ooo
[13-01 19:15:00] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages (id, sender_id, chat_id, text, timestamp, local_id) VALUES (?, ?, ?, ?, ?, ?); 
[13-01 19:15:00] [info] [SqlExecutor::execute] Execute INSERT OR REPLACE INTO messages (id, sender_id, chat_id, text, timestamp, local_id) VALUES (?, ?, ?, ?, ?, ?); 
[13-01 19:15:00] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages (id, sender_id, chat_id, text, timestamp, local_id) VALUES (?, ?, ?, ?, ?, ?); 
[13-01 19:15:00] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages (id, sender_id, chat_id, text, timestamp, local_id) VALUES (?, ?, ?, ?, ?, ?); '
[13-01 19:15:00] [info] [] SqlExecutor::execute took 0.013 s
[13-01 19:15:00] [info] [GenericRepository::save] Save succeed for json: {"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}
[13-01 19:15:00] [info] [RedisCache::set] Set entity_cache:messages:7416890526504370176 - {"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500} for 726908 seconds
[13-01 19:15:00] [info] [RabbitMQClient::publish] Publish: app.events | message_saved
[13-01 19:15:00] [info] [RabbitMQClient::declareExchange] app.events already exist
[13-01 19:15:00] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}' to exchange 'app.events' with key 'direct'
[13-01 19:15:00] [info] [RabbitMQClient::publish] [rabbit] Published message '{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}' to exchange 'app.events' with key 'direct'
[13-01 19:15:00] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":false,"message_id":7416890526504370176,"read_at":0,"receiver_id":7416880099028385792}
[13-01 19:15:00] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[13-01 19:15:00] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":false,"message_id":7416890526504370176,"read_at":0,"receiver_id":7416880099028385792}
[13-01 19:15:00] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[13-01 19:15:00] [info] [SqlExecutor::execute] Execute INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[13-01 19:15:00] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[13-01 19:15:00] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[13-01 19:15:00] [info] [] SqlExecutor::execute took 0.002 s
[13-01 19:15:00] [info] [GenericRepository::save] Save succeed for json: {"is_read":false,"message_id":7416890526504370176,"read_at":0,"receiver_id":7416880099028385792}
[13-01 19:15:00] [info] [RedisCache::set] Set entity_cache:messages_status:7416890526504370176 - {"is_read":false,"message_id":7416890526504370176,"read_at":0,"receiver_id":7416880099028385792} for 300 seconds
[13-01 19:15:00] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[13-01 19:15:00] [info] [RabbitMQClient::declareExchange] app.events already exist
[13-01 19:15:00] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":false,"message_id":7416890526504370176,"read_at":0,"receiver_id":7416880777901654016}
[13-01 19:15:00] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[13-01 19:15:00] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":false,"message_id":7416890526504370176,"read_at":0,"receiver_id":7416880777901654016}
[13-01 19:15:00] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[13-01 19:15:00] [info] [SqlExecutor::execute] Execute INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[13-01 19:15:00] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[13-01 19:15:00] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[13-01 19:15:00] [info] [] SqlExecutor::execute took 0.001 s
[13-01 19:15:00] [info] [GenericRepository::save] Save succeed for json: {"is_read":false,"message_id":7416890526504370176,"read_at":0,"receiver_id":7416880777901654016}
[13-01 19:15:00] [info] [RedisCache::set] Set entity_cache:messages_status:7416890526504370176 - {"is_read":false,"message_id":7416890526504370176,"read_at":0,"receiver_id":7416880777901654016} for 255831 seconds
[13-01 19:15:00] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[13-01 19:15:00] [info] [RabbitMQClient::declareExchange] app.events already exist
[13-01 19:15:00] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":false,"message_id":7416890526504370176,"read_at":0,"receiver_id":7416880099028385792}' to exchange 'app.events' with key 'direct'
[13-01 19:15:00] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":false,"message_id":7416890526504370176,"read_at":0,"receiver_id":7416880099028385792}' to exchange 'app.events' with key 'direct'
[13-01 19:15:00] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":false,"message_id":7416890526504370176,"read_at":0,"receiver_id":7416880777901654016}' to exchange 'app.events' with key 'direct'
[13-01 19:15:00] [info] [Controller::getMessageById] getMessageById 7416890526504370176
[13-01 19:15:00] [info] [GenericRepository::findOne] Id in dindOne 7416890526504370176
[13-01 19:15:00] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":false,"message_id":7416890526504370176,"read_at":0,"receiver_id":7416880777901654016}' to exchange 'app.events' with key 'direct'
[13-01 19:15:00] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=2031826643:params=-610360561'
[13-01 19:15:00] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages WHERE id = ? LIMIT 1
[13-01 19:15:00] [info] [SqlExecutor::execute] Execute SELECT * FROM messages WHERE id = ? LIMIT 1
[13-01 19:15:00] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages WHERE id = ? LIMIT 1
[13-01 19:15:00] [info] [Controller::getMessageById] getMessageById 7416890526504370176
[13-01 19:15:00] [info] [GenericRepository::findOne] Id in dindOne 7416890526504370176
[13-01 19:15:00] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages WHERE id = ? LIMIT 1'
[13-01 19:15:00] [info] [] SqlExecutor::execute took 0.001 s
[13-01 19:15:00] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages WHERE id = ? LIMIT 1 succeed
[13-01 19:15:00] [info] [SqlBuilder::buildResults] Select {"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}
[13-01 19:15:00] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=2031826643:params=-610360561'
[13-01 19:15:00] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages WHERE id = ? LIMIT 1
[13-01 19:15:00] [info] [SqlExecutor::execute] Execute SELECT * FROM messages WHERE id = ? LIMIT 1
[13-01 19:15:00] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages WHERE id = ? LIMIT 1
[13-01 19:15:00] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages WHERE id = ? LIMIT 1'
[13-01 19:15:00] [info] [] SqlExecutor::execute took 0.000 s
[13-01 19:15:00] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages WHERE id = ? LIMIT 1 succeed
[13-01 19:15:00] [info] [SqlBuilder::buildResults] Select {"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}
[13-01 19:15:00] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=2031826643:params=-610360561 - [{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}] for 217247 seconds
[13-01 19:15:00] [info] [SelectQuery<Message>::execute] Results has 1 size
[13-01 19:15:00] [info] [] Send responce code 200 and body {"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}
[13-01 19:15:00] [info] [] Server::handleGetMessage took 0.003 s
[13-01 19:15:00] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=2031826643:params=-610360561 - [{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}] for 300 seconds
[13-01 19:15:00] [info] [SelectQuery<Message>::execute] Results has 1 size
[13-01 19:15:00] [info] [] Send responce code 200 and body {"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}
[13-01 19:15:00] [info] [] Server::handleGetMessage took 0.002 s
[13-01 19:15:13] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"chat_id":7416880792917278720,"event":"save_message","id":0,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513}
[13-01 19:15:13] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message
[13-01 19:15:13] [info] [Controller::subscribeToSaveMessage] Getted event in subscribeToSaveMessage: save_message and payload {"chat_id":7416880792917278720,"event":"save_message","id":0,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513}
[13-01 19:15:13] [info] [Controller::handleSaveMessage] Get message to save with id 0 and text oooo
[13-01 19:15:13] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages (id, sender_id, chat_id, text, timestamp, local_id) VALUES (?, ?, ?, ?, ?, ?); 
[13-01 19:15:13] [info] [SqlExecutor::execute] Execute INSERT OR REPLACE INTO messages (id, sender_id, chat_id, text, timestamp, local_id) VALUES (?, ?, ?, ?, ?, ?); 
[13-01 19:15:13] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages (id, sender_id, chat_id, text, timestamp, local_id) VALUES (?, ?, ?, ?, ?, ?); 
[13-01 19:15:13] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages (id, sender_id, chat_id, text, timestamp, local_id) VALUES (?, ?, ?, ?, ?, ?); '
[13-01 19:15:13] [info] [] SqlExecutor::execute took 0.002 s
[13-01 19:15:13] [info] [GenericRepository::save] Save succeed for json: {"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513}
[13-01 19:15:13] [info] [RedisCache::set] Set entity_cache:messages:7416890578660540416 - {"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513} for 300 seconds
[13-01 19:15:13] [info] [RabbitMQClient::publish] Publish: app.events | message_saved
[13-01 19:15:13] [info] [RabbitMQClient::declareExchange] app.events already exist
[13-01 19:15:13] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513}' to exchange 'app.events' with key 'direct'
[13-01 19:15:13] [info] [RabbitMQClient::publish] [rabbit] Published message '{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513}' to exchange 'app.events' with key 'direct'
[13-01 19:15:13] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":false,"message_id":7416890578660540416,"read_at":0,"receiver_id":7416880099028385792}
[13-01 19:15:13] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[13-01 19:15:13] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":false,"message_id":7416890578660540416,"read_at":0,"receiver_id":7416880099028385792}
[13-01 19:15:13] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[13-01 19:15:13] [info] [SqlExecutor::execute] Execute INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[13-01 19:15:13] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[13-01 19:15:13] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[13-01 19:15:13] [info] [] SqlExecutor::execute took 0.002 s
[13-01 19:15:13] [info] [GenericRepository::save] Save succeed for json: {"is_read":false,"message_id":7416890578660540416,"read_at":0,"receiver_id":7416880099028385792}
[13-01 19:15:13] [info] [RedisCache::set] Set entity_cache:messages_status:7416890578660540416 - {"is_read":false,"message_id":7416890578660540416,"read_at":0,"receiver_id":7416880099028385792} for 1723711 seconds
[13-01 19:15:13] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[13-01 19:15:13] [info] [RabbitMQClient::declareExchange] app.events already exist
[13-01 19:15:13] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":false,"message_id":7416890578660540416,"read_at":0,"receiver_id":7416880099028385792}' to exchange 'app.events' with key 'direct'
[13-01 19:15:13] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":false,"message_id":7416890578660540416,"read_at":0,"receiver_id":7416880777901654016}
[13-01 19:15:13] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[13-01 19:15:13] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":false,"message_id":7416890578660540416,"read_at":0,"receiver_id":7416880777901654016}
[13-01 19:15:13] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[13-01 19:15:13] [info] [SqlExecutor::execute] Execute INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[13-01 19:15:13] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[13-01 19:15:13] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[13-01 19:15:13] [info] [] SqlExecutor::execute took 0.002 s
[13-01 19:15:13] [info] [GenericRepository::save] Save succeed for json: {"is_read":false,"message_id":7416890578660540416,"read_at":0,"receiver_id":7416880777901654016}
[13-01 19:15:13] [info] [RedisCache::set] Set entity_cache:messages_status:7416890578660540416 - {"is_read":false,"message_id":7416890578660540416,"read_at":0,"receiver_id":7416880777901654016} for 300 seconds
[13-01 19:15:13] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":false,"message_id":7416890578660540416,"read_at":0,"receiver_id":7416880099028385792}' to exchange 'app.events' with key 'direct'
[13-01 19:15:13] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[13-01 19:15:13] [info] [RabbitMQClient::declareExchange] app.events already exist
[13-01 19:15:13] [info] [Controller::getMessageById] getMessageById 7416890578660540416
[13-01 19:15:13] [info] [GenericRepository::findOne] Id in dindOne 7416890578660540416
[13-01 19:15:13] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1613107140:params=2128590752'
[13-01 19:15:13] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages WHERE id = ? LIMIT 1
[13-01 19:15:13] [info] [SqlExecutor::execute] Execute SELECT * FROM messages WHERE id = ? LIMIT 1
[13-01 19:15:13] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages WHERE id = ? LIMIT 1
[13-01 19:15:13] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages WHERE id = ? LIMIT 1'
[13-01 19:15:13] [info] [] SqlExecutor::execute took 0.001 s
[13-01 19:15:13] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages WHERE id = ? LIMIT 1 succeed
[13-01 19:15:13] [info] [SqlBuilder::buildResults] Select {"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513}
[13-01 19:15:13] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":false,"message_id":7416890578660540416,"read_at":0,"receiver_id":7416880777901654016}' to exchange 'app.events' with key 'direct'
[13-01 19:15:13] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1613107140:params=2128590752 - [{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513}] for 300 seconds
[13-01 19:15:13] [info] [SelectQuery<Message>::execute] Results has 1 size
[13-01 19:15:13] [info] [] Send responce code 200 and body {"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513}
[13-01 19:15:13] [info] [] Server::handleGetMessage took 0.004 s
[13-01 19:15:13] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":false,"message_id":7416890578660540416,"read_at":0,"receiver_id":7416880777901654016}' to exchange 'app.events' with key 'direct'
[13-01 19:15:13] [info] [Controller::getMessageById] getMessageById 7416890578660540416
[13-01 19:15:13] [info] [GenericRepository::findOne] Id in dindOne 7416890578660540416
[13-01 19:15:13] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1613107140:params=2128590752'
[13-01 19:15:13] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 19:15:13] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1613107140:params=2128590752
[13-01 19:15:13] [info] [] Send responce code 200 and body {"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513}
[13-01 19:15:13] [info] [] Server::handleGetMessage took 0.001 s
[13-01 19:16:19] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 19:16:19] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 19:16:19] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 19:16:19] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 19:16:19] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=1787024340:params=-1576370830'
[13-01 19:16:19] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 19:16:19] [info] [SqlExecutor::execute] Execute SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 19:16:19] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=1787024340:params=-1576370830'
[13-01 19:16:19] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 19:16:19] [info] [SqlExecutor::execute] Execute SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 19:16:19] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 19:16:19] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 19:16:19] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20'
[13-01 19:16:19] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20'
[13-01 19:16:19] [info] [] SqlExecutor::execute took 0.003 s
[13-01 19:16:19] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20 succeed
[13-01 19:16:19] [info] [] SqlExecutor::execute took 0.002 s
[13-01 19:16:19] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20 succeed
[13-01 19:16:19] [info] [SqlBuilder::buildResults] Select {"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513}
[13-01 19:16:19] [info] [SqlBuilder::buildResults] Select {"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513}
[13-01 19:16:19] [info] [SqlBuilder::buildResults] Select {"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}
[13-01 19:16:19] [info] [SqlBuilder::buildResults] Select {"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}
[13-01 19:16:19] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=1787024340:params=-1576370830 - [{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513},{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}] for 300 seconds
[13-01 19:16:19] [info] [SelectQuery<Message>::execute] Results has 2 size
[13-01 19:16:19] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 2 messages
[13-01 19:16:19] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=1787024340:params=-1576370830 - [{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513},{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}] for 872809 seconds
[13-01 19:16:19] [info] [SelectQuery<Message>::execute] Results has 2 size
[13-01 19:16:19] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 2 messages
[13-01 19:16:19] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-178641944:params=1007282001'
[13-01 19:16:19] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:16:19] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:16:19] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:16:19] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[13-01 19:16:19] [info] [] SqlExecutor::execute took 0.000 s
[13-01 19:16:19] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[13-01 19:16:19] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-178641944:params=1007282001'
[13-01 19:16:19] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:16:19] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:16:19] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:16:19] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[13-01 19:16:19] [info] [] SqlExecutor::execute took 0.000 s
[13-01 19:16:19] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[13-01 19:16:19] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-178641944:params=1007282001 - [] for 300 seconds
[13-01 19:16:19] [info] [SelectQuery<MessageStatus>::execute] Results has 0 size
[13-01 19:16:19] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-178641944:params=1007282001 - [] for 766838 seconds
[13-01 19:16:19] [info] [SelectQuery<MessageStatus>::execute] Results has 0 size
[13-01 19:16:19] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=2128590752'
[13-01 19:16:19] [info] [SelectQuery<Reaction>::execute] Not hit cache for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 19:16:19] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 19:16:19] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 19:16:19] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=2128590752'
[13-01 19:16:19] [info] [SelectQuery<Reaction>::execute] Not hit cache for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 19:16:19] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 19:16:19] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 19:16:19] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_reaction WHERE message_id = ?'
[13-01 19:16:19] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_reaction WHERE message_id = ?'
[13-01 19:16:19] [info] [] SqlExecutor::execute took 0.000 s
[13-01 19:16:19] [info] [] SqlExecutor::execute took 0.000 s
[13-01 19:16:19] [info] [SelectQuery<Reaction>::execute] query SELECT * FROM messages_reaction WHERE message_id = ? succeed
[13-01 19:16:19] [info] [SelectQuery<Reaction>::execute] query SELECT * FROM messages_reaction WHERE message_id = ? succeed
[13-01 19:16:19] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=2128590752 - [] for 454103 seconds
[13-01 19:16:19] [info] [SelectQuery<Reaction>::execute] Results has 0 size
[13-01 19:16:19] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=2128590752 - [] for 1269137 seconds
[13-01 19:16:19] [info] [SelectQuery<Reaction>::execute] Results has 0 size
[13-01 19:16:19] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-178641944:params=-1723272194'
[13-01 19:16:19] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:16:19] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:16:19] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:16:19] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[13-01 19:16:19] [info] [] SqlExecutor::execute took 0.000 s
[13-01 19:16:19] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[13-01 19:16:19] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-178641944:params=-1723272194'
[13-01 19:16:19] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:16:19] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:16:19] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:16:19] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[13-01 19:16:19] [info] [] SqlExecutor::execute took 0.000 s
[13-01 19:16:19] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[13-01 19:16:19] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-178641944:params=-1723272194 - [] for 470256 seconds
[13-01 19:16:19] [info] [SelectQuery<MessageStatus>::execute] Results has 0 size
[13-01 19:16:19] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-178641944:params=-1723272194 - [] for 300 seconds
[13-01 19:16:19] [info] [SelectQuery<MessageStatus>::execute] Results has 0 size
[13-01 19:16:19] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=-610360561'
[13-01 19:16:19] [info] [SelectQuery<Reaction>::execute] Not hit cache for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 19:16:19] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 19:16:19] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 19:16:19] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_reaction WHERE message_id = ?'
[13-01 19:16:19] [info] [] SqlExecutor::execute took 0.000 s
[13-01 19:16:19] [info] [SelectQuery<Reaction>::execute] query SELECT * FROM messages_reaction WHERE message_id = ? succeed
[13-01 19:16:19] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=-610360561'
[13-01 19:16:19] [info] [SelectQuery<Reaction>::execute] Not hit cache for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 19:16:19] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 19:16:19] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 19:16:19] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_reaction WHERE message_id = ?'
[13-01 19:16:19] [info] [] SqlExecutor::execute took 0.000 s
[13-01 19:16:19] [info] [SelectQuery<Reaction>::execute] query SELECT * FROM messages_reaction WHERE message_id = ? succeed
[13-01 19:16:19] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=-610360561 - [] for 300 seconds
[13-01 19:16:19] [info] [SelectQuery<Reaction>::execute] Results has 0 size
[13-01 19:16:19] [info] [] Send responce code 200 and body [{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","reactions":{"counts":[],"receiver_reaction":null},"read":{"count":0,"receiver_read_status":false},"sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513},{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","reactions":{"counts":[],"receiver_reaction":null},"read":{"count":0,"receiver_read_status":false},"sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}]
[13-01 19:16:19] [info] [] Server::handleGetMessagesFromChat took 0.029 s
[13-01 19:16:19] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=-610360561 - [] for 300 seconds
[13-01 19:16:19] [info] [SelectQuery<Reaction>::execute] Results has 0 size
[13-01 19:16:19] [info] [] Send responce code 200 and body [{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","reactions":{"counts":[],"receiver_reaction":null},"read":{"count":0,"receiver_read_status":false},"sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513},{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","reactions":{"counts":[],"receiver_reaction":null},"read":{"count":0,"receiver_read_status":false},"sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}]
[13-01 19:16:19] [info] [] Server::handleGetMessagesFromChat took 0.030 s
[13-01 19:16:20] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":true,"message_id":7416890526504370176,"read_at":1768324580,"receiver_id":7416880777901654016}
[13-01 19:16:20] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[13-01 19:16:20] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":true,"message_id":7416890526504370176,"read_at":1768324580,"receiver_id":7416880777901654016}
[13-01 19:16:20] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[13-01 19:16:20] [info] [SqlExecutor::execute] Execute INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[13-01 19:16:20] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[13-01 19:16:20] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[13-01 19:16:20] [info] [] SqlExecutor::execute took 0.001 s
[13-01 19:16:20] [info] [GenericRepository::save] Save succeed for json: {"is_read":true,"message_id":7416890526504370176,"read_at":1768324580,"receiver_id":7416880777901654016}
[13-01 19:16:20] [info] [RedisCache::set] Set entity_cache:messages_status:7416890526504370176 - {"is_read":true,"message_id":7416890526504370176,"read_at":1768324580,"receiver_id":7416880777901654016} for 300 seconds
[13-01 19:16:20] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[13-01 19:16:20] [info] [RabbitMQClient::declareExchange] app.events already exist
[13-01 19:16:20] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"is_read":true,"message_id":7416890578660540416,"read_at":1768324580,"receiver_id":7416880777901654016}
[13-01 19:16:20] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_status
[13-01 19:16:20] [info] [Controller::subscribeToSaveMessageStatus] Getted event in subscribeToSaveMessageStatus: save_message_status and payload {"is_read":true,"message_id":7416890578660540416,"read_at":1768324580,"receiver_id":7416880777901654016}
[13-01 19:16:20] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[13-01 19:16:20] [info] [SqlExecutor::execute] Execute INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[13-01 19:16:20] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":true,"message_id":7416890526504370176,"read_at":1768324580,"receiver_id":7416880777901654016}' to exchange 'app.events' with key 'direct'
[13-01 19:16:20] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); 
[13-01 19:16:20] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_status (message_id, receiver_id, is_read, read_at) VALUES (?, ?, ?, ?); '
[13-01 19:16:20] [info] [] SqlExecutor::execute took 0.002 s
[13-01 19:16:20] [info] [GenericRepository::save] Save succeed for json: {"is_read":true,"message_id":7416890578660540416,"read_at":1768324580,"receiver_id":7416880777901654016}
[13-01 19:16:20] [info] [RedisCache::set] Set entity_cache:messages_status:7416890578660540416 - {"is_read":true,"message_id":7416890578660540416,"read_at":1768324580,"receiver_id":7416880777901654016} for 1133808 seconds
[13-01 19:16:20] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":true,"message_id":7416890526504370176,"read_at":1768324580,"receiver_id":7416880777901654016}' to exchange 'app.events' with key 'direct'
[13-01 19:16:20] [info] [RabbitMQClient::publish] Publish: app.events | message_status_saved
[13-01 19:16:20] [info] [RabbitMQClient::declareExchange] app.events already exist
[13-01 19:16:20] [info] [Controller::getMessageById] getMessageById 7416890526504370176
[13-01 19:16:20] [info] [GenericRepository::findOne] Id in dindOne 7416890526504370176
[13-01 19:16:20] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1613107140:params=-610360561'
[13-01 19:16:20] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages WHERE id = ? LIMIT 1
[13-01 19:16:20] [info] [SqlExecutor::execute] Execute SELECT * FROM messages WHERE id = ? LIMIT 1
[13-01 19:16:20] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages WHERE id = ? LIMIT 1
[13-01 19:16:20] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages WHERE id = ? LIMIT 1'
[13-01 19:16:20] [info] [] SqlExecutor::execute took 0.000 s
[13-01 19:16:20] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages WHERE id = ? LIMIT 1 succeed
[13-01 19:16:20] [info] [SqlBuilder::buildResults] Select {"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}
[13-01 19:16:20] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1613107140:params=-610360561 - [{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}] for 757861 seconds
[13-01 19:16:20] [info] [SelectQuery<Message>::execute] Results has 1 size
[13-01 19:16:20] [info] [] Send responce code 200 and body {"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}
[13-01 19:16:20] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"is_read":true,"message_id":7416890578660540416,"read_at":1768324580,"receiver_id":7416880777901654016}' to exchange 'app.events' with key 'direct'
[13-01 19:16:20] [info] [] Server::handleGetMessage took 0.003 s
[13-01 19:16:20] [info] [RabbitMQClient::publish] [rabbit] Published message '{"is_read":true,"message_id":7416890578660540416,"read_at":1768324580,"receiver_id":7416880777901654016}' to exchange 'app.events' with key 'direct'
[13-01 19:16:20] [info] [Controller::getMessageById] getMessageById 7416890578660540416
[13-01 19:16:20] [info] [GenericRepository::findOne] Id in dindOne 7416890578660540416
[13-01 19:16:20] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1613107140:params=2128590752'
[13-01 19:16:20] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 19:16:20] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1613107140:params=2128590752
[13-01 19:16:20] [info] [] Send responce code 200 and body {"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513}
[13-01 19:16:20] [info] [] Server::handleGetMessage took 0.001 s
[13-01 19:34:58] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 19:34:58] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 19:34:58] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 19:34:58] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 19:34:58] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830'
[13-01 19:34:58] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 19:34:58] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830'
[13-01 19:34:58] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 19:34:58] [info] [SqlExecutor::execute] Execute SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 19:34:58] [info] [SqlExecutor::execute] Execute SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 19:34:58] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 19:34:58] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 19:34:58] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20'
[13-01 19:34:58] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20'
[13-01 19:34:58] [info] [] SqlExecutor::execute took 0.013 s
[13-01 19:34:58] [info] [] SqlExecutor::execute took 0.013 s
[13-01 19:34:58] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20 succeed
[13-01 19:34:58] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20 succeed
[13-01 19:34:58] [info] [SqlBuilder::buildResults] Select {"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513}
[13-01 19:34:58] [info] [SqlBuilder::buildResults] Select {"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513}
[13-01 19:34:58] [info] [SqlBuilder::buildResults] Select {"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}
[13-01 19:34:58] [info] [SqlBuilder::buildResults] Select {"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}
[13-01 19:34:58] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830 - [{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513},{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}] for 932217 seconds
[13-01 19:34:58] [info] [SelectQuery<Message>::execute] Results has 2 size
[13-01 19:34:58] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 2 messages
[13-01 19:34:58] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830 - [{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513},{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}] for 1137162 seconds
[13-01 19:34:58] [info] [SelectQuery<Message>::execute] Results has 2 size
[13-01 19:34:58] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 2 messages
[13-01 19:34:58] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001'
[13-01 19:34:58] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:34:58] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:34:58] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:34:58] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001'
[13-01 19:34:58] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:34:58] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:34:58] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:34:58] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[13-01 19:34:58] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[13-01 19:34:58] [info] [] SqlExecutor::execute took 0.001 s
[13-01 19:34:58] [info] [] SqlExecutor::execute took 0.000 s
[13-01 19:34:58] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[13-01 19:34:58] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[13-01 19:34:58] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416890578660540416,"read_at":1768324580,"receiver_id":7416880777901654016}
[13-01 19:34:58] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416890578660540416,"read_at":1768324580,"receiver_id":7416880777901654016}
[13-01 19:34:58] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001 - [{"is_read":true,"message_id":7416890578660540416,"read_at":1768324580,"receiver_id":7416880777901654016}] for 1148466 seconds
[13-01 19:34:58] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[13-01 19:34:58] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001 - [{"is_read":true,"message_id":7416890578660540416,"read_at":1768324580,"receiver_id":7416880777901654016}] for 300 seconds
[13-01 19:34:58] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[13-01 19:34:58] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=2128590752'
[13-01 19:34:58] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=2128590752'
[13-01 19:34:58] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] Parsed successfully: '0'
[13-01 19:34:58] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] Parsed successfully: '0'
[13-01 19:34:58] [info] [SelectQuery<Reaction>::execute] Hit cache for key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=2128590752
[13-01 19:34:58] [info] [SelectQuery<Reaction>::execute] Hit cache for key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=2128590752
[13-01 19:34:58] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194'
[13-01 19:34:58] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:34:58] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:34:58] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:34:58] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[13-01 19:34:58] [info] [] SqlExecutor::execute took 0.000 s
[13-01 19:34:58] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[13-01 19:34:58] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416890526504370176,"read_at":1768324580,"receiver_id":7416880777901654016}
[13-01 19:34:58] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194'
[13-01 19:34:58] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:34:58] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:34:58] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:34:58] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[13-01 19:34:58] [info] [] SqlExecutor::execute took 0.000 s
[13-01 19:34:58] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[13-01 19:34:58] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416890526504370176,"read_at":1768324580,"receiver_id":7416880777901654016}
[13-01 19:34:58] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194 - [{"is_read":true,"message_id":7416890526504370176,"read_at":1768324580,"receiver_id":7416880777901654016}] for 340913 seconds
[13-01 19:34:58] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[13-01 19:34:58] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194 - [{"is_read":true,"message_id":7416890526504370176,"read_at":1768324580,"receiver_id":7416880777901654016}] for 300 seconds
[13-01 19:34:58] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[13-01 19:34:58] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=-610360561'
[13-01 19:34:58] [info] [SelectQuery<Reaction>::execute] Not hit cache for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 19:34:58] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 19:34:58] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 19:34:58] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_reaction WHERE message_id = ?'
[13-01 19:34:58] [info] [] SqlExecutor::execute took 0.000 s
[13-01 19:34:58] [info] [SelectQuery<Reaction>::execute] query SELECT * FROM messages_reaction WHERE message_id = ? succeed
[13-01 19:34:58] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=-610360561'
[13-01 19:34:58] [info] [SelectQuery<Reaction>::execute] Not hit cache for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 19:34:58] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 19:34:58] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 19:34:58] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_reaction WHERE message_id = ?'
[13-01 19:34:58] [info] [] SqlExecutor::execute took 0.000 s
[13-01 19:34:58] [info] [SelectQuery<Reaction>::execute] query SELECT * FROM messages_reaction WHERE message_id = ? succeed
[13-01 19:34:58] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=-610360561 - [] for 1388805 seconds
[13-01 19:34:58] [info] [SelectQuery<Reaction>::execute] Results has 0 size
[13-01 19:34:58] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=-610360561 - [] for 300 seconds
[13-01 19:34:58] [info] [SelectQuery<Reaction>::execute] Results has 0 size
[13-01 19:34:58] [info] [] Send responce code 200 and body [{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","reactions":{"counts":[],"receiver_reaction":null},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513},{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","reactions":{"counts":[],"receiver_reaction":null},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}]
[13-01 19:34:58] [info] [] Send responce code 200 and body [{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","reactions":{"counts":[],"receiver_reaction":null},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513},{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","reactions":{"counts":[],"receiver_reaction":null},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}]
[13-01 19:34:58] [info] [] Server::handleGetMessagesFromChat took 0.066 s
[13-01 19:34:58] [info] [] Server::handleGetMessagesFromChat took 0.066 s
[13-01 19:35:15] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 19:35:15] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 19:35:15] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 19:35:15] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 19:35:15] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830'
[13-01 19:35:15] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830'
[13-01 19:35:15] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '2'
[13-01 19:35:15] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '2'
[13-01 19:35:15] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830
[13-01 19:35:15] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830
[13-01 19:35:15] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 2 messages
[13-01 19:35:15] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 2 messages
[13-01 19:35:15] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001'
[13-01 19:35:15] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 19:35:15] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001
[13-01 19:35:15] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001'
[13-01 19:35:15] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 19:35:15] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001
[13-01 19:35:15] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=2128590752'
[13-01 19:35:15] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] Parsed successfully: '0'
[13-01 19:35:15] [info] [SelectQuery<Reaction>::execute] Hit cache for key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=2128590752
[13-01 19:35:15] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=2128590752'
[13-01 19:35:15] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] Parsed successfully: '0'
[13-01 19:35:15] [info] [SelectQuery<Reaction>::execute] Hit cache for key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=2128590752
[13-01 19:35:15] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194'
[13-01 19:35:15] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 19:35:15] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194
[13-01 19:35:15] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194'
[13-01 19:35:15] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 19:35:15] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194
[13-01 19:35:15] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=-610360561'
[13-01 19:35:15] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] Parsed successfully: '0'
[13-01 19:35:15] [info] [SelectQuery<Reaction>::execute] Hit cache for key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=-610360561
[13-01 19:35:15] [info] [] Send responce code 200 and body [{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","reactions":{"counts":[],"receiver_reaction":null},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513},{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","reactions":{"counts":[],"receiver_reaction":null},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}]
[13-01 19:35:15] [info] [] Server::handleGetMessagesFromChat took 0.011 s
[13-01 19:35:15] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=-610360561'
[13-01 19:35:15] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] Parsed successfully: '0'
[13-01 19:35:15] [info] [SelectQuery<Reaction>::execute] Hit cache for key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=-610360561
[13-01 19:35:15] [info] [] Send responce code 200 and body [{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","reactions":{"counts":[],"receiver_reaction":null},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513},{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","reactions":{"counts":[],"receiver_reaction":null},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}]
[13-01 19:35:15] [info] [] Server::handleGetMessagesFromChat took 0.012 s
[13-01 19:53:08] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 19:53:08] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 19:53:08] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 19:53:08] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 19:53:08] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830'
[13-01 19:53:08] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830'
[13-01 19:53:08] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '2'
[13-01 19:53:08] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '2'
[13-01 19:53:08] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830
[13-01 19:53:08] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830
[13-01 19:53:08] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 2 messages
[13-01 19:53:08] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 2 messages
[13-01 19:53:08] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001'
[13-01 19:53:08] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:53:08] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001'
[13-01 19:53:08] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:53:08] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:53:08] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:53:08] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:53:08] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:53:08] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[13-01 19:53:08] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[13-01 19:53:08] [info] [] SqlExecutor::execute took 0.007 s
[13-01 19:53:08] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[13-01 19:53:08] [info] [] SqlExecutor::execute took 0.007 s
[13-01 19:53:08] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[13-01 19:53:08] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416890578660540416,"read_at":1768324580,"receiver_id":7416880777901654016}
[13-01 19:53:08] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416890578660540416,"read_at":1768324580,"receiver_id":7416880777901654016}
[13-01 19:53:08] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001 - [{"is_read":true,"message_id":7416890578660540416,"read_at":1768324580,"receiver_id":7416880777901654016}] for 1359839 seconds
[13-01 19:53:08] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[13-01 19:53:08] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001 - [{"is_read":true,"message_id":7416890578660540416,"read_at":1768324580,"receiver_id":7416880777901654016}] for 1335816 seconds
[13-01 19:53:08] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[13-01 19:53:08] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=2128590752'
[13-01 19:53:08] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=2128590752'
[13-01 19:53:08] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] Parsed successfully: '0'
[13-01 19:53:08] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] Parsed successfully: '0'
[13-01 19:53:08] [info] [SelectQuery<Reaction>::execute] Hit cache for key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=2128590752
[13-01 19:53:08] [info] [SelectQuery<Reaction>::execute] Hit cache for key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=2128590752
[13-01 19:53:08] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194'
[13-01 19:53:08] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:53:08] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:53:08] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:53:08] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[13-01 19:53:08] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194'
[13-01 19:53:08] [info] [] SqlExecutor::execute took 0.000 s
[13-01 19:53:08] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[13-01 19:53:08] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:53:08] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:53:08] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416890526504370176,"read_at":1768324580,"receiver_id":7416880777901654016}
[13-01 19:53:08] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 19:53:08] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[13-01 19:53:08] [info] [] SqlExecutor::execute took 0.000 s
[13-01 19:53:08] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[13-01 19:53:08] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416890526504370176,"read_at":1768324580,"receiver_id":7416880777901654016}
[13-01 19:53:08] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194 - [{"is_read":true,"message_id":7416890526504370176,"read_at":1768324580,"receiver_id":7416880777901654016}] for 300 seconds
[13-01 19:53:08] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[13-01 19:53:08] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194 - [{"is_read":true,"message_id":7416890526504370176,"read_at":1768324580,"receiver_id":7416880777901654016}] for 300 seconds
[13-01 19:53:08] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[13-01 19:53:08] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=-610360561'
[13-01 19:53:08] [info] [SelectQuery<Reaction>::execute] Not hit cache for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 19:53:08] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 19:53:08] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 19:53:08] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_reaction WHERE message_id = ?'
[13-01 19:53:08] [info] [] SqlExecutor::execute took 0.000 s
[13-01 19:53:08] [info] [SelectQuery<Reaction>::execute] query SELECT * FROM messages_reaction WHERE message_id = ? succeed
[13-01 19:53:08] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=-610360561'
[13-01 19:53:08] [info] [SelectQuery<Reaction>::execute] Not hit cache for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 19:53:08] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 19:53:08] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 19:53:08] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_reaction WHERE message_id = ?'
[13-01 19:53:08] [info] [] SqlExecutor::execute took 0.001 s
[13-01 19:53:08] [info] [SelectQuery<Reaction>::execute] query SELECT * FROM messages_reaction WHERE message_id = ? succeed
[13-01 19:53:08] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=-610360561 - [] for 300 seconds
[13-01 19:53:08] [info] [SelectQuery<Reaction>::execute] Results has 0 size
[13-01 19:53:08] [info] [] Send responce code 200 and body [{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","reactions":{"counts":[],"receiver_reaction":null},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513},{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","reactions":{"counts":[],"receiver_reaction":null},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}]
[13-01 19:53:08] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=-610360561 - [] for 292985 seconds
[13-01 19:53:08] [info] [SelectQuery<Reaction>::execute] Results has 0 size
[13-01 19:53:08] [info] [] Send responce code 200 and body [{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","reactions":{"counts":[],"receiver_reaction":null},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513},{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","reactions":{"counts":[],"receiver_reaction":null},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}]
[13-01 19:53:08] [info] [] Server::handleGetMessagesFromChat took 0.086 s
[13-01 19:53:08] [info] [] Server::handleGetMessagesFromChat took 0.086 s
[13-01 20:52:36] [info] [] Logger initialized for service 'MessageService'
[13-01 20:52:36] [info] [SQLiteDatabase::initializeSchema] Database schema initialized successfully
[13-01 20:52:36] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message
[13-01 20:52:36] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_status
[13-01 20:52:36] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_reaction
[13-01 20:52:36] [info] [RabbitMQClient::subscribe] Subscrive: app.events | delete_message_reaction
[13-01 20:52:36] [info] [Server::run] [Message server is started on port '8082'
[13-01 20:52:36] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 20:52:36] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 20:52:36] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 20:52:36] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 20:52:36] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessageStatus' bound to exchange 'app.events' with key 'save_message_status'
[13-01 20:52:36] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessage' bound to exchange 'app.events' with key 'save_message'
[13-01 20:52:36] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'save_message_reaction' bound to exchange 'app.events' with key 'save_message_reaction'
[13-01 20:52:36] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message' in queue 'QueueSaveMessage'
[13-01 20:52:36] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message_status' in queue 'QueueSaveMessageStatus'
[13-01 20:52:36] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message_reaction' in queue 'save_message_reaction'
[13-01 20:52:36] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'delete_message_reaction' bound to exchange 'app.events' with key 'delete_message_reaction'
[13-01 20:52:36] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'delete_message_reaction' in queue 'delete_message_reaction'
[13-01 21:15:12] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 21:15:12] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 21:15:12] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 21:15:12] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 21:15:12] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830'
[13-01 21:15:26] [info] [] Logger initialized for service 'MessageService'
[13-01 21:15:26] [info] [SQLiteDatabase::initializeSchema] Database schema initialized successfully
[13-01 21:15:26] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message
[13-01 21:15:26] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_status
[13-01 21:15:26] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_reaction
[13-01 21:15:26] [info] [RabbitMQClient::subscribe] Subscrive: app.events | delete_message_reaction
[13-01 21:15:26] [info] [Server::run] [Message server is started on port '8082'
[13-01 21:15:26] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 21:15:26] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 21:15:26] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 21:15:26] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 21:15:26] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'delete_message_reaction' bound to exchange 'app.events' with key 'delete_message_reaction'
[13-01 21:15:26] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'save_message_reaction' bound to exchange 'app.events' with key 'save_message_reaction'
[13-01 21:15:26] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessageStatus' bound to exchange 'app.events' with key 'save_message_status'
[13-01 21:15:26] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'delete_message_reaction' in queue 'delete_message_reaction'
[13-01 21:15:26] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessage' bound to exchange 'app.events' with key 'save_message'
[13-01 21:15:26] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message_status' in queue 'QueueSaveMessageStatus'
[13-01 21:15:26] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message' in queue 'QueueSaveMessage'
[13-01 21:15:26] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message_reaction' in queue 'save_message_reaction'
[13-01 21:15:30] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 21:15:30] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 21:15:30] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 21:15:30] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 21:15:51] [info] [] Logger initialized for service 'MessageService'
[13-01 21:15:51] [info] [SQLiteDatabase::initializeSchema] Database schema initialized successfully
[13-01 21:15:51] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message
[13-01 21:15:51] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_status
[13-01 21:15:51] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_reaction
[13-01 21:15:51] [info] [RabbitMQClient::subscribe] Subscrive: app.events | delete_message_reaction
[13-01 21:15:51] [info] [Server::run] [Message server is started on port '8082'
[13-01 21:15:51] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 21:15:51] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 21:15:51] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 21:15:51] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 21:15:51] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'save_message_reaction' bound to exchange 'app.events' with key 'save_message_reaction'
[13-01 21:15:51] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message_reaction' in queue 'save_message_reaction'
[13-01 21:15:51] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'delete_message_reaction' bound to exchange 'app.events' with key 'delete_message_reaction'
[13-01 21:15:51] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessageStatus' bound to exchange 'app.events' with key 'save_message_status'
[13-01 21:15:51] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessage' bound to exchange 'app.events' with key 'save_message'
[13-01 21:15:51] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message' in queue 'QueueSaveMessage'
[13-01 21:15:51] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message_status' in queue 'QueueSaveMessageStatus'
[13-01 21:15:51] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'delete_message_reaction' in queue 'delete_message_reaction'
[13-01 21:15:57] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 21:15:57] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 21:15:57] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 21:15:57] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 21:16:29] [info] [] Logger initialized for service 'MessageService'
[13-01 21:16:29] [info] [SQLiteDatabase::initializeSchema] Database schema initialized successfully
[13-01 21:16:29] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message
[13-01 21:16:29] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_status
[13-01 21:16:29] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_reaction
[13-01 21:16:29] [info] [RabbitMQClient::subscribe] Subscrive: app.events | delete_message_reaction
[13-01 21:16:29] [info] [Server::run] [Message server is started on port '8082'
[13-01 21:16:29] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 21:16:29] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 21:16:29] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 21:16:29] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 21:16:29] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessageStatus' bound to exchange 'app.events' with key 'save_message_status'
[13-01 21:16:29] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message_status' in queue 'QueueSaveMessageStatus'
[13-01 21:16:29] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'delete_message_reaction' bound to exchange 'app.events' with key 'delete_message_reaction'
[13-01 21:16:29] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'save_message_reaction' bound to exchange 'app.events' with key 'save_message_reaction'
[13-01 21:16:29] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessage' bound to exchange 'app.events' with key 'save_message'
[13-01 21:16:29] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message_reaction' in queue 'save_message_reaction'
[13-01 21:16:29] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'delete_message_reaction' in queue 'delete_message_reaction'
[13-01 21:16:29] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message' in queue 'QueueSaveMessage'
[13-01 21:16:41] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 21:16:41] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 21:16:41] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 21:16:41] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 21:19:14] [info] [] Logger initialized for service 'MessageService'
[13-01 21:19:14] [info] [SQLiteDatabase::initializeSchema] Database schema initialized successfully
[13-01 21:19:14] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message
[13-01 21:19:14] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_status
[13-01 21:19:14] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_reaction
[13-01 21:19:14] [info] [RabbitMQClient::subscribe] Subscrive: app.events | delete_message_reaction
[13-01 21:19:14] [info] [Server::run] [Message server is started on port '8082'
[13-01 21:19:14] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 21:19:14] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 21:19:14] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 21:19:14] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 21:19:14] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessage' bound to exchange 'app.events' with key 'save_message'
[13-01 21:19:14] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessageStatus' bound to exchange 'app.events' with key 'save_message_status'
[13-01 21:19:14] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'save_message_reaction' bound to exchange 'app.events' with key 'save_message_reaction'
[13-01 21:19:14] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'delete_message_reaction' bound to exchange 'app.events' with key 'delete_message_reaction'
[13-01 21:19:14] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message_reaction' in queue 'save_message_reaction'
[13-01 21:19:14] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message' in queue 'QueueSaveMessage'
[13-01 21:19:14] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'delete_message_reaction' in queue 'delete_message_reaction'
[13-01 21:19:14] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message_status' in queue 'QueueSaveMessageStatus'
[13-01 21:19:27] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 21:19:27] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 21:19:27] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 21:19:27] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 21:19:27] [info] [Controller::getMessagesFromChat] Token is valid use_id 7416880777901654016
[13-01 21:19:27] [info] [Controller::getMessagesFromChat] Chat_id is valid 7416880792917278720
[13-01 21:19:27] [info] [Controller::getMessagesFromChat] Token is valid use_id 7416880777901654016
[13-01 21:19:27] [info] [Controller::getMessagesFromChat] Chat_id is valid 7416880792917278720
[13-01 21:21:40] [info] [] Logger initialized for service 'MessageService'
[13-01 21:21:40] [info] [SQLiteDatabase::initializeSchema] Database schema initialized successfully
[13-01 21:21:40] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message
[13-01 21:21:40] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_status
[13-01 21:21:40] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_reaction
[13-01 21:21:40] [info] [RabbitMQClient::subscribe] Subscrive: app.events | delete_message_reaction
[13-01 21:21:40] [info] [Server::run] [Message server is started on port '8082'
[13-01 21:21:40] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 21:21:40] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 21:21:40] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 21:21:40] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 21:21:40] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessage' bound to exchange 'app.events' with key 'save_message'
[13-01 21:21:40] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessageStatus' bound to exchange 'app.events' with key 'save_message_status'
[13-01 21:21:40] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'delete_message_reaction' bound to exchange 'app.events' with key 'delete_message_reaction'
[13-01 21:21:40] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'save_message_reaction' bound to exchange 'app.events' with key 'save_message_reaction'
[13-01 21:21:40] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message' in queue 'QueueSaveMessage'
[13-01 21:21:40] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'delete_message_reaction' in queue 'delete_message_reaction'
[13-01 21:21:40] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message_status' in queue 'QueueSaveMessageStatus'
[13-01 21:21:40] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message_reaction' in queue 'save_message_reaction'
[13-01 21:21:45] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 21:21:45] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 21:21:45] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 21:21:45] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 21:21:45] [info] [Controller::getMessagesFromChat] Token is valid use_id 7416880777901654016
[13-01 21:21:45] [info] [Controller::getMessagesFromChat] Token is valid use_id 7416880777901654016
[13-01 21:21:45] [info] [Controller::getMessagesFromChat] Chat_id is valid 7416880792917278720
[13-01 21:21:45] [info] [Controller::getMessagesFromChat] Pack is formed
[13-01 21:21:45] [info] [Controller::getMessagesFromChat] Chat_id is valid 7416880792917278720
[13-01 21:21:45] [info] [Controller::getMessagesFromChat] Pack is formed
[13-01 21:21:45] [info] [MessageManager::getChatMessages] Start MessageManager::getChatMessages
[13-01 21:21:45] [info] [MessageManager::getChatMessages] Start MessageManager::getChatMessages
[13-01 21:21:45] [info] [MessageManager::getChatMessages] Query to select fully created
[13-01 21:21:45] [info] [MessageManager::getChatMessages] Query to select fully created
[13-01 21:25:31] [info] [] Logger initialized for service 'MessageService'
[13-01 21:25:31] [info] [SQLiteDatabase::initializeSchema] Database schema initialized successfully
[13-01 21:25:31] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message
[13-01 21:25:31] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_status
[13-01 21:25:31] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_reaction
[13-01 21:25:31] [info] [RabbitMQClient::subscribe] Subscrive: app.events | delete_message_reaction
[13-01 21:25:31] [info] [Server::run] [Message server is started on port '8082'
[13-01 21:25:31] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 21:25:31] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 21:25:31] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 21:25:31] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 21:25:31] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'delete_message_reaction' bound to exchange 'app.events' with key 'delete_message_reaction'
[13-01 21:25:31] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessageStatus' bound to exchange 'app.events' with key 'save_message_status'
[13-01 21:25:31] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessage' bound to exchange 'app.events' with key 'save_message'
[13-01 21:25:31] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'save_message_reaction' bound to exchange 'app.events' with key 'save_message_reaction'
[13-01 21:25:31] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message_status' in queue 'QueueSaveMessageStatus'
[13-01 21:25:31] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'delete_message_reaction' in queue 'delete_message_reaction'
[13-01 21:25:32] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message_reaction' in queue 'save_message_reaction'
[13-01 21:25:32] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message' in queue 'QueueSaveMessage'
[13-01 21:25:36] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 21:25:36] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 21:25:36] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 21:25:36] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 21:25:36] [info] [Controller::getMessagesFromChat] Token is valid use_id 7416880777901654016
[13-01 21:25:36] [info] [Controller::getMessagesFromChat] Chat_id is valid 7416880792917278720
[13-01 21:25:36] [info] [Controller::getMessagesFromChat] Pack is formed
[13-01 21:25:36] [info] [Controller::getMessagesFromChat] Token is valid use_id 7416880777901654016
[13-01 21:25:36] [info] [MessageManager::getChatMessages] Start MessageManager::getChatMessages
[13-01 21:25:36] [info] [Controller::getMessagesFromChat] Chat_id is valid 7416880792917278720
[13-01 21:25:36] [info] [Controller::getMessagesFromChat] Pack is formed
[13-01 21:25:36] [info] [MessageManager::getChatMessages] Start MessageManager::getChatMessages
[13-01 21:25:36] [info] [MessageManager::getChatMessages] Query to select fully created
[13-01 21:25:36] [info] [MessageManager::getChatMessages] Query to select fully created
[13-01 21:25:36] [info] [SelectQuery<Message>::execute] Start select::execute
[13-01 21:25:36] [info] [SelectQuery<Message>::execute] Start select::execute
[13-01 21:25:36] [info] [SelectQuery<Message>::execute] Start select::execute for sql
[13-01 21:25:36] [info] [SelectQuery<Message>::execute] Start select::execute for sql
[13-01 21:25:36] [info] [SelectQuery<Message>::execute] cache_key
[13-01 21:25:36] [info] [SelectQuery<Message>::execute] cache_key
[13-01 21:25:36] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830'
[13-01 21:25:36] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '2'
[13-01 21:25:36] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830
[13-01 21:25:36] [info] [] SelectQuery<Message>::execute took 0.013 s
[13-01 21:25:36] [info] [MessageManager::getChatMessages] Query executed
[13-01 21:25:36] [info] [] MessageManager::getChatMessages took 0.014 s
[13-01 21:25:36] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 2 messages
[13-01 21:25:36] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 21:25:36] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql
[13-01 21:25:36] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830'
[13-01 21:25:36] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '2'
[13-01 21:25:36] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830
[13-01 21:25:36] [info] [] SelectQuery<Message>::execute took 0.015 s
[13-01 21:25:36] [info] [MessageManager::getChatMessages] Query executed
[13-01 21:25:36] [info] [] MessageManager::getChatMessages took 0.015 s
[13-01 21:25:36] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 2 messages
[13-01 21:25:36] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 21:25:36] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql
[13-01 21:25:36] [info] [SelectQuery<MessageStatus>::execute] cache_key
[13-01 21:25:36] [info] [SelectQuery<MessageStatus>::execute] cache_key
[13-01 21:25:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001'
[13-01 21:25:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:25:36] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001
[13-01 21:25:36] [info] [] SelectQuery<MessageStatus>::execute took 0.004 s
[13-01 21:25:36] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 21:25:36] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql
[13-01 21:25:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001'
[13-01 21:25:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:25:36] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001
[13-01 21:25:36] [info] [] SelectQuery<MessageStatus>::execute took 0.003 s
[13-01 21:25:36] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 21:25:36] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql
[13-01 21:25:36] [info] [SelectQuery<Reaction>::execute] cache_key
[13-01 21:25:36] [info] [SelectQuery<Reaction>::execute] cache_key
[13-01 21:25:36] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=2128590752'
[13-01 21:25:36] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] Parsed successfully: '0'
[13-01 21:25:36] [info] [SelectQuery<Reaction>::execute] Hit cache for key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=2128590752
[13-01 21:25:36] [info] [] SelectQuery<Reaction>::execute took 0.001 s
[13-01 21:25:36] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=2128590752'
[13-01 21:25:36] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 21:25:36] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] Parsed successfully: '0'
[13-01 21:25:36] [info] [SelectQuery<Reaction>::execute] Hit cache for key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=2128590752
[13-01 21:25:36] [info] [] SelectQuery<Reaction>::execute took 0.001 s
[13-01 21:25:36] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql
[13-01 21:25:36] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 21:25:36] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql
[13-01 21:25:36] [info] [SelectQuery<MessageStatus>::execute] cache_key
[13-01 21:25:36] [info] [SelectQuery<MessageStatus>::execute] cache_key
[13-01 21:25:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194'
[13-01 21:25:36] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 21:25:36] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 21:25:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194'
[13-01 21:25:36] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 21:25:36] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 21:25:36] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 21:25:36] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 21:25:36] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[13-01 21:25:36] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[13-01 21:25:36] [info] [] SqlExecutor::execute took 0.002 s
[13-01 21:25:36] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[13-01 21:25:36] [info] [] SqlExecutor::execute took 0.002 s
[13-01 21:25:36] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[13-01 21:25:36] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416890526504370176,"read_at":1768324580,"receiver_id":7416880777901654016}
[13-01 21:25:36] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416890526504370176,"read_at":1768324580,"receiver_id":7416880777901654016}
[13-01 21:25:36] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194 - [{"is_read":true,"message_id":7416890526504370176,"read_at":1768324580,"receiver_id":7416880777901654016}] for 1538432 seconds
[13-01 21:25:36] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[13-01 21:25:36] [info] [] SelectQuery<MessageStatus>::execute took 0.008 s
[13-01 21:25:36] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 21:25:36] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql
[13-01 21:25:36] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194 - [{"is_read":true,"message_id":7416890526504370176,"read_at":1768324580,"receiver_id":7416880777901654016}] for 300 seconds
[13-01 21:25:36] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[13-01 21:25:36] [info] [] SelectQuery<MessageStatus>::execute took 0.010 s
[13-01 21:25:36] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 21:25:36] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql
[13-01 21:25:36] [info] [SelectQuery<Reaction>::execute] cache_key
[13-01 21:25:36] [info] [SelectQuery<Reaction>::execute] cache_key
[13-01 21:25:36] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=-610360561'
[13-01 21:25:36] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] Parsed successfully: '0'
[13-01 21:25:36] [info] [SelectQuery<Reaction>::execute] Hit cache for key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=-610360561
[13-01 21:25:36] [info] [] SelectQuery<Reaction>::execute took 0.005 s
[13-01 21:25:36] [info] [] Send responce code 200 and body [{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","reactions":{"counts":[],"receiver_reaction":null},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513},{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","reactions":{"counts":[],"receiver_reaction":null},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}]
[13-01 21:25:36] [info] [] Server::handleGetMessagesFromChat took 0.069 s
[13-01 21:25:36] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=-610360561'
[13-01 21:25:36] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] Parsed successfully: '0'
[13-01 21:25:36] [info] [SelectQuery<Reaction>::execute] Hit cache for key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=246094326:params=-610360561
[13-01 21:25:36] [info] [] SelectQuery<Reaction>::execute took 0.004 s
[13-01 21:25:36] [info] [] Send responce code 200 and body [{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","reactions":{"counts":[],"receiver_reaction":null},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513},{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","reactions":{"counts":[],"receiver_reaction":null},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}]
[13-01 21:25:36] [info] [] Server::handleGetMessagesFromChat took 0.069 s
[13-01 21:25:46] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"message_id":7416890526504370176,"reaction_id":1,"receiver_id":7416880777901654016}
[13-01 21:25:46] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_reaction
[13-01 21:25:46] [info] [Controller::subscribeToSaveMessageReaction] Getted event in onSaveMessageReaction: save_message_reaction and payload {"message_id":7416890526504370176,"reaction_id":1,"receiver_id":7416880777901654016}
[13-01 21:25:46] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_reaction (message_id, receiver_id, reaction_id) VALUES (?, ?, ?); 
[13-01 21:25:46] [info] [SqlExecutor::execute] Execute INSERT OR REPLACE INTO messages_reaction (message_id, receiver_id, reaction_id) VALUES (?, ?, ?); 
[13-01 21:25:46] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_reaction (message_id, receiver_id, reaction_id) VALUES (?, ?, ?); 
[13-01 21:25:46] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_reaction (message_id, receiver_id, reaction_id) VALUES (?, ?, ?); '
[13-01 21:25:46] [info] [] SqlExecutor::execute took 0.002 s
[13-01 21:25:46] [info] [GenericRepository::save] Save succeed for json: {"message_id":7416890526504370176,"reaction_id":1,"receiver_id":7416880777901654016}
[13-01 21:25:46] [info] [RedisCache::set] Set entity_cache:messages_reaction:7416890526504370176, 7416880777901654016 - {"message_id":7416890526504370176,"reaction_id":1,"receiver_id":7416880777901654016} for 300 seconds
[13-01 21:25:46] [info] [RabbitMQClient::publish] Publish: app.events | message_reaction_saved
[13-01 21:25:46] [info] [RabbitMQClient::declareExchange] app.events already exist
[13-01 21:25:46] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"message_id":7416890526504370176,"reaction_id":1,"receiver_id":7416880777901654016}' to exchange 'app.events' with key 'direct'
[13-01 21:25:46] [info] [RabbitMQClient::publish] [rabbit] Published message '{"message_id":7416890526504370176,"reaction_id":1,"receiver_id":7416880777901654016}' to exchange 'app.events' with key 'direct'
[13-01 21:25:46] [info] [Controller::getMessageById] getMessageById 7416890526504370176
[13-01 21:25:46] [info] [GenericRepository::findOne] Id in dindOne 7416890526504370176
[13-01 21:25:46] [info] [SelectQuery<Message>::execute] Start select::execute
[13-01 21:25:46] [info] [SelectQuery<Message>::execute] Start select::execute for sql
[13-01 21:25:46] [info] [SelectQuery<Message>::execute] cache_key
[13-01 21:25:46] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1613107140:params=-610360561'
[13-01 21:25:46] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:25:46] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1613107140:params=-610360561
[13-01 21:25:46] [info] [] SelectQuery<Message>::execute took 0.001 s
[13-01 21:25:46] [info] [] Send responce code 200 and body {"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}
[13-01 21:25:46] [info] [] Server::handleGetMessage took 0.001 s
[13-01 21:26:27] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"message_id":7416890578660540416,"reaction_id":2,"receiver_id":7416880777901654016}
[13-01 21:26:27] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_reaction
[13-01 21:26:27] [info] [Controller::subscribeToSaveMessageReaction] Getted event in onSaveMessageReaction: save_message_reaction and payload {"message_id":7416890578660540416,"reaction_id":2,"receiver_id":7416880777901654016}
[13-01 21:26:27] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_reaction (message_id, receiver_id, reaction_id) VALUES (?, ?, ?); 
[13-01 21:26:27] [info] [SqlExecutor::execute] Execute INSERT OR REPLACE INTO messages_reaction (message_id, receiver_id, reaction_id) VALUES (?, ?, ?); 
[13-01 21:26:27] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_reaction (message_id, receiver_id, reaction_id) VALUES (?, ?, ?); 
[13-01 21:26:27] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_reaction (message_id, receiver_id, reaction_id) VALUES (?, ?, ?); '
[13-01 21:26:27] [info] [] SqlExecutor::execute took 0.002 s
[13-01 21:26:27] [info] [GenericRepository::save] Save succeed for json: {"message_id":7416890578660540416,"reaction_id":2,"receiver_id":7416880777901654016}
[13-01 21:26:27] [info] [RedisCache::set] Set entity_cache:messages_reaction:7416890578660540416, 7416880777901654016 - {"message_id":7416890578660540416,"reaction_id":2,"receiver_id":7416880777901654016} for 899901 seconds
[13-01 21:26:27] [info] [RabbitMQClient::publish] Publish: app.events | message_reaction_saved
[13-01 21:26:27] [info] [RabbitMQClient::declareExchange] app.events already exist
[13-01 21:26:27] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"message_id":7416890578660540416,"reaction_id":2,"receiver_id":7416880777901654016}' to exchange 'app.events' with key 'direct'
[13-01 21:26:27] [info] [RabbitMQClient::publish] [rabbit] Published message '{"message_id":7416890578660540416,"reaction_id":2,"receiver_id":7416880777901654016}' to exchange 'app.events' with key 'direct'
[13-01 21:26:27] [info] [Controller::getMessageById] getMessageById 7416890578660540416
[13-01 21:26:27] [info] [GenericRepository::findOne] Id in dindOne 7416890578660540416
[13-01 21:26:27] [info] [SelectQuery<Message>::execute] Start select::execute
[13-01 21:26:27] [info] [SelectQuery<Message>::execute] Start select::execute for sql
[13-01 21:26:27] [info] [SelectQuery<Message>::execute] cache_key
[13-01 21:26:27] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1613107140:params=2128590752'
[13-01 21:26:27] [info] [SelectQuery<Message>::execute] Not hit cache for sql SELECT * FROM messages WHERE id = ? LIMIT 1
[13-01 21:26:27] [info] [SqlExecutor::execute] Execute SELECT * FROM messages WHERE id = ? LIMIT 1
[13-01 21:26:27] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages WHERE id = ? LIMIT 1
[13-01 21:26:27] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages WHERE id = ? LIMIT 1'
[13-01 21:26:27] [info] [] SqlExecutor::execute took 0.001 s
[13-01 21:26:27] [info] [SelectQuery<Message>::execute] query SELECT * FROM messages WHERE id = ? LIMIT 1 succeed
[13-01 21:26:27] [info] [SqlBuilder::buildResults] Select {"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513}
[13-01 21:26:27] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1613107140:params=2128590752 - [{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513}] for 1731677 seconds
[13-01 21:26:27] [info] [SelectQuery<Message>::execute] Results has 1 size
[13-01 21:26:27] [info] [] SelectQuery<Message>::execute took 0.004 s
[13-01 21:26:27] [info] [] Send responce code 200 and body {"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513}
[13-01 21:26:27] [info] [] Server::handleGetMessage took 0.004 s
[13-01 21:26:33] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 21:26:33] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 21:26:33] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 21:26:33] [info] [Controller::getMessagesFromChat] Token is valid use_id 7416880777901654016
[13-01 21:26:33] [info] [Controller::getMessagesFromChat] Chat_id is valid 7416880792917278720
[13-01 21:26:33] [info] [Controller::getMessagesFromChat] Pack is formed
[13-01 21:26:33] [info] [MessageManager::getChatMessages] Start MessageManager::getChatMessages
[13-01 21:26:33] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 21:26:33] [info] [Controller::getMessagesFromChat] Token is valid use_id 7416880777901654016
[13-01 21:26:33] [info] [MessageManager::getChatMessages] Query to select fully created
[13-01 21:26:33] [info] [Controller::getMessagesFromChat] Chat_id is valid 7416880792917278720
[13-01 21:26:33] [info] [SelectQuery<Message>::execute] Start select::execute
[13-01 21:26:33] [info] [Controller::getMessagesFromChat] Pack is formed
[13-01 21:26:33] [info] [SelectQuery<Message>::execute] Start select::execute for sql
[13-01 21:26:33] [info] [MessageManager::getChatMessages] Start MessageManager::getChatMessages
[13-01 21:26:33] [info] [MessageManager::getChatMessages] Query to select fully created
[13-01 21:26:33] [info] [SelectQuery<Message>::execute] Start select::execute
[13-01 21:26:33] [info] [SelectQuery<Message>::execute] Start select::execute for sql
[13-01 21:26:33] [info] [SelectQuery<Message>::execute] cache_key
[13-01 21:26:33] [info] [SelectQuery<Message>::execute] cache_key
[13-01 21:26:33] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830'
[13-01 21:26:33] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '2'
[13-01 21:26:33] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830
[13-01 21:26:33] [info] [] SelectQuery<Message>::execute took 0.002 s
[13-01 21:26:33] [info] [MessageManager::getChatMessages] Query executed
[13-01 21:26:33] [info] [] MessageManager::getChatMessages took 0.003 s
[13-01 21:26:33] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 2 messages
[13-01 21:26:33] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 21:26:33] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql
[13-01 21:26:33] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830'
[13-01 21:26:33] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '2'
[13-01 21:26:33] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830
[13-01 21:26:33] [info] [] SelectQuery<Message>::execute took 0.003 s
[13-01 21:26:33] [info] [MessageManager::getChatMessages] Query executed
[13-01 21:26:33] [info] [] MessageManager::getChatMessages took 0.003 s
[13-01 21:26:33] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 2 messages
[13-01 21:26:33] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 21:26:33] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql
[13-01 21:26:33] [info] [SelectQuery<MessageStatus>::execute] cache_key
[13-01 21:26:33] [info] [SelectQuery<MessageStatus>::execute] cache_key
[13-01 21:26:33] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001'
[13-01 21:26:33] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:26:33] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001
[13-01 21:26:33] [info] [] SelectQuery<MessageStatus>::execute took 0.002 s
[13-01 21:26:33] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 21:26:33] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql
[13-01 21:26:33] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001'
[13-01 21:26:33] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:26:33] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001
[13-01 21:26:33] [info] [] SelectQuery<MessageStatus>::execute took 0.002 s
[13-01 21:26:33] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 21:26:33] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql
[13-01 21:26:33] [info] [SelectQuery<Reaction>::execute] cache_key
[13-01 21:26:33] [info] [SelectQuery<Reaction>::execute] cache_key
[13-01 21:26:33] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=2128590752'
[13-01 21:26:33] [info] [SelectQuery<Reaction>::execute] Not hit cache for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:26:33] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:26:33] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:26:33] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_reaction WHERE message_id = ?'
[13-01 21:26:33] [info] [] SqlExecutor::execute took 0.001 s
[13-01 21:26:33] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=2128590752'
[13-01 21:26:33] [info] [SelectQuery<Reaction>::execute] Not hit cache for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:26:33] [info] [SelectQuery<Reaction>::execute] query SELECT * FROM messages_reaction WHERE message_id = ? succeed
[13-01 21:26:33] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:26:33] [info] [SqlBuilder::buildResults] Select {"message_id":7416890578660540416,"reaction_id":2,"receiver_id":7416880777901654016}
[13-01 21:26:33] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:26:33] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_reaction WHERE message_id = ?'
[13-01 21:26:33] [info] [] SqlExecutor::execute took 0.000 s
[13-01 21:26:33] [info] [SelectQuery<Reaction>::execute] query SELECT * FROM messages_reaction WHERE message_id = ? succeed
[13-01 21:26:33] [info] [SqlBuilder::buildResults] Select {"message_id":7416890578660540416,"reaction_id":2,"receiver_id":7416880777901654016}
[13-01 21:26:33] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=2128590752 - [{"message_id":7416890578660540416,"reaction_id":2,"receiver_id":7416880777901654016}] for 300 seconds
[13-01 21:26:33] [info] [SelectQuery<Reaction>::execute] Results has 1 size
[13-01 21:26:33] [info] [] SelectQuery<Reaction>::execute took 0.006 s
[13-01 21:26:33] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 21:26:33] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql
[13-01 21:26:33] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=2128590752 - [{"message_id":7416890578660540416,"reaction_id":2,"receiver_id":7416880777901654016}] for 300 seconds
[13-01 21:26:33] [info] [SelectQuery<Reaction>::execute] Results has 1 size
[13-01 21:26:33] [info] [] SelectQuery<Reaction>::execute took 0.008 s
[13-01 21:26:33] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 21:26:33] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql
[13-01 21:26:33] [info] [SelectQuery<MessageStatus>::execute] cache_key
[13-01 21:26:33] [info] [SelectQuery<MessageStatus>::execute] cache_key
[13-01 21:26:33] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194'
[13-01 21:26:33] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:26:33] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194
[13-01 21:26:33] [info] [] SelectQuery<MessageStatus>::execute took 0.002 s
[13-01 21:26:33] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 21:26:33] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql
[13-01 21:26:33] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194'
[13-01 21:26:33] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:26:33] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194
[13-01 21:26:33] [info] [] SelectQuery<MessageStatus>::execute took 0.002 s
[13-01 21:26:33] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 21:26:33] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql
[13-01 21:26:33] [info] [SelectQuery<Reaction>::execute] cache_key
[13-01 21:26:33] [info] [SelectQuery<Reaction>::execute] cache_key
[13-01 21:26:33] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=-610360561'
[13-01 21:26:33] [info] [SelectQuery<Reaction>::execute] Not hit cache for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:26:33] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:26:33] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:26:33] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_reaction WHERE message_id = ?'
[13-01 21:26:33] [info] [] SqlExecutor::execute took 0.001 s
[13-01 21:26:33] [info] [SelectQuery<Reaction>::execute] query SELECT * FROM messages_reaction WHERE message_id = ? succeed
[13-01 21:26:33] [info] [SqlBuilder::buildResults] Select {"message_id":7416890526504370176,"reaction_id":1,"receiver_id":7416880777901654016}
[13-01 21:26:33] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=-610360561'
[13-01 21:26:33] [info] [SelectQuery<Reaction>::execute] Not hit cache for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:26:33] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:26:33] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:26:33] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_reaction WHERE message_id = ?'
[13-01 21:26:33] [info] [] SqlExecutor::execute took 0.002 s
[13-01 21:26:33] [info] [SelectQuery<Reaction>::execute] query SELECT * FROM messages_reaction WHERE message_id = ? succeed
[13-01 21:26:33] [info] [SqlBuilder::buildResults] Select {"message_id":7416890526504370176,"reaction_id":1,"receiver_id":7416880777901654016}
[13-01 21:26:33] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=-610360561 - [{"message_id":7416890526504370176,"reaction_id":1,"receiver_id":7416880777901654016}] for 657151 seconds
[13-01 21:26:33] [info] [SelectQuery<Reaction>::execute] Results has 1 size
[13-01 21:26:33] [info] [] SelectQuery<Reaction>::execute took 0.047 s
[13-01 21:26:33] [info] [] Send responce code 200 and body [{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","reactions":{"counts":[[2,1]],"receiver_reaction":2},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513},{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","reactions":{"counts":[[1,1]],"receiver_reaction":1},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}]
[13-01 21:26:33] [info] [] Server::handleGetMessagesFromChat took 0.062 s
[13-01 21:26:33] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=-610360561 - [{"message_id":7416890526504370176,"reaction_id":1,"receiver_id":7416880777901654016}] for 616699 seconds
[13-01 21:26:33] [info] [SelectQuery<Reaction>::execute] Results has 1 size
[13-01 21:26:33] [info] [] SelectQuery<Reaction>::execute took 0.049 s
[13-01 21:26:33] [info] [] Send responce code 200 and body [{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","reactions":{"counts":[[2,1]],"receiver_reaction":2},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513},{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","reactions":{"counts":[[1,1]],"receiver_reaction":1},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}]
[13-01 21:26:33] [info] [] Server::handleGetMessagesFromChat took 0.065 s
[13-01 21:26:59] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 21:26:59] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 21:26:59] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 21:26:59] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 21:26:59] [info] [Controller::getMessagesFromChat] Token is valid use_id 7416880777901654016
[13-01 21:26:59] [info] [Controller::getMessagesFromChat] Chat_id is valid 7416880792917278720
[13-01 21:26:59] [info] [Controller::getMessagesFromChat] Pack is formed
[13-01 21:26:59] [info] [MessageManager::getChatMessages] Start MessageManager::getChatMessages
[13-01 21:26:59] [info] [Controller::getMessagesFromChat] Token is valid use_id 7416880777901654016
[13-01 21:26:59] [info] [Controller::getMessagesFromChat] Chat_id is valid 7416880792917278720
[13-01 21:26:59] [info] [Controller::getMessagesFromChat] Pack is formed
[13-01 21:26:59] [info] [MessageManager::getChatMessages] Query to select fully created
[13-01 21:26:59] [info] [MessageManager::getChatMessages] Start MessageManager::getChatMessages
[13-01 21:26:59] [info] [SelectQuery<Message>::execute] Start select::execute
[13-01 21:26:59] [info] [SelectQuery<Message>::execute] Start select::execute for sql
[13-01 21:26:59] [info] [MessageManager::getChatMessages] Query to select fully created
[13-01 21:26:59] [info] [SelectQuery<Message>::execute] Start select::execute
[13-01 21:26:59] [info] [SelectQuery<Message>::execute] Start select::execute for sql
[13-01 21:26:59] [info] [SelectQuery<Message>::execute] cache_key
[13-01 21:26:59] [info] [SelectQuery<Message>::execute] cache_key
[13-01 21:26:59] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830'
[13-01 21:26:59] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '2'
[13-01 21:26:59] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830
[13-01 21:26:59] [info] [] SelectQuery<Message>::execute took 0.002 s
[13-01 21:26:59] [info] [MessageManager::getChatMessages] Query executed
[13-01 21:26:59] [info] [] MessageManager::getChatMessages took 0.003 s
[13-01 21:26:59] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 2 messages
[13-01 21:26:59] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 21:26:59] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql
[13-01 21:26:59] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830'
[13-01 21:26:59] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '2'
[13-01 21:26:59] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830
[13-01 21:26:59] [info] [] SelectQuery<Message>::execute took 0.003 s
[13-01 21:26:59] [info] [MessageManager::getChatMessages] Query executed
[13-01 21:26:59] [info] [] MessageManager::getChatMessages took 0.003 s
[13-01 21:26:59] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 2 messages
[13-01 21:26:59] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 21:26:59] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql
[13-01 21:26:59] [info] [SelectQuery<MessageStatus>::execute] cache_key
[13-01 21:26:59] [info] [SelectQuery<MessageStatus>::execute] cache_key
[13-01 21:26:59] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001'
[13-01 21:26:59] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:26:59] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001
[13-01 21:26:59] [info] [] SelectQuery<MessageStatus>::execute took 0.002 s
[13-01 21:26:59] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 21:26:59] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001'
[13-01 21:26:59] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql
[13-01 21:26:59] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:26:59] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001
[13-01 21:26:59] [info] [] SelectQuery<MessageStatus>::execute took 0.002 s
[13-01 21:26:59] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 21:26:59] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql
[13-01 21:26:59] [info] [SelectQuery<Reaction>::execute] cache_key
[13-01 21:26:59] [info] [SelectQuery<Reaction>::execute] cache_key
[13-01 21:26:59] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=2128590752'
[13-01 21:26:59] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:26:59] [info] [SelectQuery<Reaction>::execute] Hit cache for key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=2128590752
[13-01 21:26:59] [info] [] SelectQuery<Reaction>::execute took 0.001 s
[13-01 21:26:59] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 21:26:59] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql
[13-01 21:26:59] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=2128590752'
[13-01 21:26:59] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:26:59] [info] [SelectQuery<Reaction>::execute] Hit cache for key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=2128590752
[13-01 21:26:59] [info] [] SelectQuery<Reaction>::execute took 0.001 s
[13-01 21:26:59] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 21:26:59] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql
[13-01 21:26:59] [info] [SelectQuery<MessageStatus>::execute] cache_key
[13-01 21:26:59] [info] [SelectQuery<MessageStatus>::execute] cache_key
[13-01 21:26:59] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194'
[13-01 21:26:59] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:26:59] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194
[13-01 21:26:59] [info] [] SelectQuery<MessageStatus>::execute took 0.001 s
[13-01 21:26:59] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 21:26:59] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql
[13-01 21:26:59] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194'
[13-01 21:26:59] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:26:59] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194
[13-01 21:26:59] [info] [] SelectQuery<MessageStatus>::execute took 0.001 s
[13-01 21:26:59] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 21:26:59] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql
[13-01 21:26:59] [info] [SelectQuery<Reaction>::execute] cache_key
[13-01 21:26:59] [info] [SelectQuery<Reaction>::execute] cache_key
[13-01 21:26:59] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=-610360561'
[13-01 21:26:59] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:26:59] [info] [SelectQuery<Reaction>::execute] Hit cache for key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=-610360561
[13-01 21:26:59] [info] [] SelectQuery<Reaction>::execute took 0.001 s
[13-01 21:26:59] [info] [] Send responce code 200 and body [{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","reactions":{"counts":[[2,1]],"receiver_reaction":2},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513},{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","reactions":{"counts":[[1,1]],"receiver_reaction":1},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}]
[13-01 21:26:59] [info] [] Server::handleGetMessagesFromChat took 0.009 s
[13-01 21:26:59] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=-610360561'
[13-01 21:26:59] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:26:59] [info] [SelectQuery<Reaction>::execute] Hit cache for key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=-610360561
[13-01 21:26:59] [info] [] SelectQuery<Reaction>::execute took 0.002 s
[13-01 21:26:59] [info] [] Send responce code 200 and body [{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","reactions":{"counts":[[2,1]],"receiver_reaction":2},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513},{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","reactions":{"counts":[[1,1]],"receiver_reaction":1},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}]
[13-01 21:26:59] [info] [] Server::handleGetMessagesFromChat took 0.009 s
[13-01 21:39:12] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 21:39:12] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 21:39:12] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 21:39:12] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 21:39:12] [info] [Controller::getMessagesFromChat] Token is valid use_id 7416880777901654016
[13-01 21:39:12] [info] [Controller::getMessagesFromChat] Token is valid use_id 7416880777901654016
[13-01 21:39:12] [info] [Controller::getMessagesFromChat] Chat_id is valid 7416880792917278720
[13-01 21:39:12] [info] [Controller::getMessagesFromChat] Chat_id is valid 7416880792917278720
[13-01 21:39:12] [info] [Controller::getMessagesFromChat] Pack is formed
[13-01 21:39:12] [info] [Controller::getMessagesFromChat] Pack is formed
[13-01 21:39:12] [info] [MessageManager::getChatMessages] Start MessageManager::getChatMessages
[13-01 21:39:12] [info] [MessageManager::getChatMessages] Start MessageManager::getChatMessages
[13-01 21:39:12] [info] [MessageManager::getChatMessages] Query to select fully created
[13-01 21:39:12] [info] [MessageManager::getChatMessages] Query to select fully created
[13-01 21:39:12] [info] [SelectQuery<Message>::execute] Start select::execute
[13-01 21:39:12] [info] [SelectQuery<Message>::execute] Start select::execute
[13-01 21:39:12] [info] [SelectQuery<Message>::execute] Start select::execute for sql
[13-01 21:39:12] [info] [SelectQuery<Message>::execute] Start select::execute for sql
[13-01 21:39:12] [info] [SelectQuery<Message>::execute] cache_key
[13-01 21:39:12] [info] [SelectQuery<Message>::execute] cache_key
[13-01 21:39:12] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830'
[13-01 21:39:12] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830'
[13-01 21:39:12] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '2'
[13-01 21:39:12] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '2'
[13-01 21:39:12] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830
[13-01 21:39:12] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830
[13-01 21:39:12] [info] [] SelectQuery<Message>::execute took 0.009 s
[13-01 21:39:12] [info] [] SelectQuery<Message>::execute took 0.009 s
[13-01 21:39:12] [info] [MessageManager::getChatMessages] Query executed
[13-01 21:39:12] [info] [] MessageManager::getChatMessages took 0.015 s
[13-01 21:39:12] [info] [MessageManager::getChatMessages] Query executed
[13-01 21:39:12] [info] [] MessageManager::getChatMessages took 0.015 s
[13-01 21:39:12] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 2 messages
[13-01 21:39:12] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 2 messages
[13-01 21:39:12] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 21:39:12] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 21:39:12] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql
[13-01 21:39:12] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql
[13-01 21:39:12] [info] [SelectQuery<MessageStatus>::execute] cache_key
[13-01 21:39:12] [info] [SelectQuery<MessageStatus>::execute] cache_key
[13-01 21:39:12] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001'
[13-01 21:39:12] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:39:12] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001
[13-01 21:39:12] [info] [] SelectQuery<MessageStatus>::execute took 0.001 s
[13-01 21:39:12] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001'
[13-01 21:39:12] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:39:12] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001
[13-01 21:39:12] [info] [] SelectQuery<MessageStatus>::execute took 0.002 s
[13-01 21:39:12] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 21:39:12] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 21:39:12] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql
[13-01 21:39:12] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql
[13-01 21:39:12] [info] [SelectQuery<Reaction>::execute] cache_key
[13-01 21:39:12] [info] [SelectQuery<Reaction>::execute] cache_key
[13-01 21:39:12] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=2128590752'
[13-01 21:39:12] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=2128590752'
[13-01 21:39:12] [info] [SelectQuery<Reaction>::execute] Not hit cache for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:39:12] [info] [SelectQuery<Reaction>::execute] Not hit cache for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:39:12] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:39:12] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:39:12] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:39:12] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:39:12] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_reaction WHERE message_id = ?'
[13-01 21:39:12] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_reaction WHERE message_id = ?'
[13-01 21:39:12] [info] [] SqlExecutor::execute took 0.011 s
[13-01 21:39:12] [info] [] SqlExecutor::execute took 0.011 s
[13-01 21:39:12] [info] [SelectQuery<Reaction>::execute] query SELECT * FROM messages_reaction WHERE message_id = ? succeed
[13-01 21:39:12] [info] [SelectQuery<Reaction>::execute] query SELECT * FROM messages_reaction WHERE message_id = ? succeed
[13-01 21:39:12] [info] [SqlBuilder::buildResults] Select {"message_id":7416890578660540416,"reaction_id":2,"receiver_id":7416880777901654016}
[13-01 21:39:12] [info] [SqlBuilder::buildResults] Select {"message_id":7416890578660540416,"reaction_id":2,"receiver_id":7416880777901654016}
[13-01 21:39:12] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=2128590752 - [{"message_id":7416890578660540416,"reaction_id":2,"receiver_id":7416880777901654016}] for 300 seconds
[13-01 21:39:12] [info] [SelectQuery<Reaction>::execute] Results has 1 size
[13-01 21:39:12] [info] [] SelectQuery<Reaction>::execute took 0.017 s
[13-01 21:39:12] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 21:39:12] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql
[13-01 21:39:12] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=2128590752 - [{"message_id":7416890578660540416,"reaction_id":2,"receiver_id":7416880777901654016}] for 1479732 seconds
[13-01 21:39:12] [info] [SelectQuery<Reaction>::execute] Results has 1 size
[13-01 21:39:12] [info] [] SelectQuery<Reaction>::execute took 0.018 s
[13-01 21:39:12] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 21:39:12] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql
[13-01 21:39:12] [info] [SelectQuery<MessageStatus>::execute] cache_key
[13-01 21:39:12] [info] [SelectQuery<MessageStatus>::execute] cache_key
[13-01 21:39:12] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194'
[13-01 21:39:12] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 21:39:12] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 21:39:12] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 21:39:12] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194'
[13-01 21:39:12] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 21:39:12] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 21:39:12] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 21:39:12] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[13-01 21:39:12] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[13-01 21:39:12] [info] [] SqlExecutor::execute took 0.001 s
[13-01 21:39:12] [info] [] SqlExecutor::execute took 0.001 s
[13-01 21:39:12] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[13-01 21:39:12] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[13-01 21:39:12] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416890526504370176,"read_at":1768324580,"receiver_id":7416880777901654016}
[13-01 21:39:12] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416890526504370176,"read_at":1768324580,"receiver_id":7416880777901654016}
[13-01 21:39:12] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194 - [{"is_read":true,"message_id":7416890526504370176,"read_at":1768324580,"receiver_id":7416880777901654016}] for 759155 seconds
[13-01 21:39:12] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[13-01 21:39:12] [info] [] SelectQuery<MessageStatus>::execute took 0.004 s
[13-01 21:39:12] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 21:39:12] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql
[13-01 21:39:12] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194 - [{"is_read":true,"message_id":7416890526504370176,"read_at":1768324580,"receiver_id":7416880777901654016}] for 300 seconds
[13-01 21:39:12] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[13-01 21:39:12] [info] [] SelectQuery<MessageStatus>::execute took 0.005 s
[13-01 21:39:12] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 21:39:12] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql
[13-01 21:39:12] [info] [SelectQuery<Reaction>::execute] cache_key
[13-01 21:39:12] [info] [SelectQuery<Reaction>::execute] cache_key
[13-01 21:39:12] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=-610360561'
[13-01 21:39:12] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:39:12] [info] [SelectQuery<Reaction>::execute] Hit cache for key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=-610360561
[13-01 21:39:12] [info] [] SelectQuery<Reaction>::execute took 0.002 s
[13-01 21:39:12] [info] [] Send responce code 200 and body [{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","reactions":{"counts":[[2,1]],"receiver_reaction":2},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513},{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","reactions":{"counts":[[1,1]],"receiver_reaction":1},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}]
[13-01 21:39:12] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=-610360561'
[13-01 21:39:12] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:39:12] [info] [SelectQuery<Reaction>::execute] Hit cache for key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=-610360561
[13-01 21:39:12] [info] [] SelectQuery<Reaction>::execute took 0.003 s
[13-01 21:39:12] [info] [] Send responce code 200 and body [{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","reactions":{"counts":[[2,1]],"receiver_reaction":2},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513},{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","reactions":{"counts":[[1,1]],"receiver_reaction":1},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}]
[13-01 21:39:12] [info] [] Server::handleGetMessagesFromChat took 0.056 s
[13-01 21:39:12] [info] [] Server::handleGetMessagesFromChat took 0.056 s
[13-01 21:39:15] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"message_id":7416890526504370176,"reaction_id":1,"receiver_id":7416880777901654016}
[13-01 21:39:15] [info] [RabbitMQClient::subscribe] [rabbit] Received event: delete_message_reaction
[13-01 21:39:15] [info] [Controller::subscribeToDeleteMessageReaction] Getted event in onDeleteMessageReaction: delete_message_reaction and payload {"message_id":7416890526504370176,"reaction_id":1,"receiver_id":7416880777901654016}
[13-01 21:39:15] [info] [SqlExecutor::execute] Execute DELETE * FROM messages_reaction WHERE message_id = ? AND receiver_id = ?
[13-01 21:39:15] [error] [SQLiteQuery::prepare] [SQLiteQuery] Prepare failed for sql DELETE * FROM messages_reaction WHERE message_id = ? AND receiver_id = ?: near "*": syntax error Unable to execute statement
[13-01 21:39:15] [error] [SQLiteDatabase::prepare] For sql DELETE * FROM messages_reaction WHERE message_id = ? AND receiver_id = ? prepare failed: near "*": syntax error Unable to execute statement
[13-01 21:39:15] [error] [SqlExecutor::execute] Error prepare outQuery
[13-01 21:39:15] [info] [] SqlExecutor::execute took 0.004 s
[13-01 21:39:15] [error] [DeleteQuery<Reaction>::execute] query DELETE * FROM messages_reaction WHERE message_id = ? AND receiver_id = ? failed, reason - Failed to prepare
[13-01 21:39:15] [error] [Controller::onDeleteMessageReaction] Error deleting message_reaction id 7416890526504370176
[13-01 21:39:22] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 21:39:22] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 21:39:22] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 21:39:22] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 21:39:22] [info] [Controller::getMessagesFromChat] Token is valid use_id 7416880777901654016
[13-01 21:39:22] [info] [Controller::getMessagesFromChat] Token is valid use_id 7416880777901654016
[13-01 21:39:22] [info] [Controller::getMessagesFromChat] Chat_id is valid 7416880792917278720
[13-01 21:39:22] [info] [Controller::getMessagesFromChat] Pack is formed
[13-01 21:39:22] [info] [Controller::getMessagesFromChat] Chat_id is valid 7416880792917278720
[13-01 21:39:22] [info] [Controller::getMessagesFromChat] Pack is formed
[13-01 21:39:22] [info] [MessageManager::getChatMessages] Start MessageManager::getChatMessages
[13-01 21:39:22] [info] [MessageManager::getChatMessages] Start MessageManager::getChatMessages
[13-01 21:39:22] [info] [MessageManager::getChatMessages] Query to select fully created
[13-01 21:39:22] [info] [MessageManager::getChatMessages] Query to select fully created
[13-01 21:39:22] [info] [SelectQuery<Message>::execute] Start select::execute
[13-01 21:39:22] [info] [SelectQuery<Message>::execute] Start select::execute
[13-01 21:39:22] [info] [SelectQuery<Message>::execute] Start select::execute for sql
[13-01 21:39:22] [info] [SelectQuery<Message>::execute] Start select::execute for sql
[13-01 21:39:22] [info] [SelectQuery<Message>::execute] cache_key
[13-01 21:39:22] [info] [SelectQuery<Message>::execute] cache_key
[13-01 21:39:22] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830'
[13-01 21:39:22] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '2'
[13-01 21:39:22] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830
[13-01 21:39:22] [info] [] SelectQuery<Message>::execute took 0.004 s
[13-01 21:39:22] [info] [MessageManager::getChatMessages] Query executed
[13-01 21:39:22] [info] [] MessageManager::getChatMessages took 0.004 s
[13-01 21:39:22] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 2 messages
[13-01 21:39:22] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 21:39:22] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql
[13-01 21:39:22] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830'
[13-01 21:39:22] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '2'
[13-01 21:39:22] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830
[13-01 21:39:22] [info] [] SelectQuery<Message>::execute took 0.004 s
[13-01 21:39:22] [info] [MessageManager::getChatMessages] Query executed
[13-01 21:39:22] [info] [] MessageManager::getChatMessages took 0.004 s
[13-01 21:39:22] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 2 messages
[13-01 21:39:22] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 21:39:22] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql
[13-01 21:39:22] [info] [SelectQuery<MessageStatus>::execute] cache_key
[13-01 21:39:22] [info] [SelectQuery<MessageStatus>::execute] cache_key
[13-01 21:39:22] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001'
[13-01 21:39:22] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:39:22] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001
[13-01 21:39:22] [info] [] SelectQuery<MessageStatus>::execute took 0.001 s
[13-01 21:39:22] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 21:39:22] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql
[13-01 21:39:22] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001'
[13-01 21:39:22] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:39:22] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001
[13-01 21:39:22] [info] [] SelectQuery<MessageStatus>::execute took 0.001 s
[13-01 21:39:22] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 21:39:22] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql
[13-01 21:39:22] [info] [SelectQuery<Reaction>::execute] cache_key
[13-01 21:39:22] [info] [SelectQuery<Reaction>::execute] cache_key
[13-01 21:39:22] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=2128590752'
[13-01 21:39:22] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:39:22] [info] [SelectQuery<Reaction>::execute] Hit cache for key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=2128590752
[13-01 21:39:22] [info] [] SelectQuery<Reaction>::execute took 0.001 s
[13-01 21:39:22] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 21:39:22] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql
[13-01 21:39:22] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=2128590752'
[13-01 21:39:22] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:39:22] [info] [SelectQuery<Reaction>::execute] Hit cache for key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=2128590752
[13-01 21:39:22] [info] [] SelectQuery<Reaction>::execute took 0.001 s
[13-01 21:39:22] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 21:39:22] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql
[13-01 21:39:22] [info] [SelectQuery<MessageStatus>::execute] cache_key
[13-01 21:39:22] [info] [SelectQuery<MessageStatus>::execute] cache_key
[13-01 21:39:22] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194'
[13-01 21:39:22] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:39:22] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194
[13-01 21:39:22] [info] [] SelectQuery<MessageStatus>::execute took 0.001 s
[13-01 21:39:22] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 21:39:22] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql
[13-01 21:39:22] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194'
[13-01 21:39:22] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:39:22] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194
[13-01 21:39:22] [info] [] SelectQuery<MessageStatus>::execute took 0.001 s
[13-01 21:39:22] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 21:39:22] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql
[13-01 21:39:22] [info] [SelectQuery<Reaction>::execute] cache_key
[13-01 21:39:22] [info] [SelectQuery<Reaction>::execute] cache_key
[13-01 21:39:22] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=-610360561'
[13-01 21:39:22] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:39:22] [info] [SelectQuery<Reaction>::execute] Hit cache for key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=-610360561
[13-01 21:39:22] [info] [] SelectQuery<Reaction>::execute took 0.001 s
[13-01 21:39:22] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=-610360561'
[13-01 21:39:22] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:39:22] [info] [SelectQuery<Reaction>::execute] Hit cache for key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=-610360561
[13-01 21:39:22] [info] [] SelectQuery<Reaction>::execute took 0.001 s
[13-01 21:39:22] [info] [] Send responce code 200 and body [{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","reactions":{"counts":[[2,1]],"receiver_reaction":2},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513},{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","reactions":{"counts":[[1,1]],"receiver_reaction":1},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}]
[13-01 21:39:22] [info] [] Send responce code 200 and body [{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","reactions":{"counts":[[2,1]],"receiver_reaction":2},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513},{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","reactions":{"counts":[[1,1]],"receiver_reaction":1},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}]
[13-01 21:39:22] [info] [] Server::handleGetMessagesFromChat took 0.009 s
[13-01 21:39:22] [info] [] Server::handleGetMessagesFromChat took 0.009 s
[13-01 21:45:44] [info] [] Logger initialized for service 'MessageService'
[13-01 21:45:44] [info] [SQLiteDatabase::initializeSchema] Database schema initialized successfully
[13-01 21:45:44] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message
[13-01 21:45:44] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_status
[13-01 21:45:44] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_reaction
[13-01 21:45:44] [info] [RabbitMQClient::subscribe] Subscrive: app.events | delete_message_reaction
[13-01 21:45:44] [info] [Server::run] [Message server is started on port '8082'
[13-01 21:45:44] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 21:45:44] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 21:45:44] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 21:45:44] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 21:45:44] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'save_message_reaction' bound to exchange 'app.events' with key 'save_message_reaction'
[13-01 21:45:44] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message_reaction' in queue 'save_message_reaction'
[13-01 21:45:44] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessage' bound to exchange 'app.events' with key 'save_message'
[13-01 21:45:44] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessageStatus' bound to exchange 'app.events' with key 'save_message_status'
[13-01 21:45:44] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'delete_message_reaction' bound to exchange 'app.events' with key 'delete_message_reaction'
[13-01 21:45:44] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message' in queue 'QueueSaveMessage'
[13-01 21:45:44] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message_status' in queue 'QueueSaveMessageStatus'
[13-01 21:45:44] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'delete_message_reaction' in queue 'delete_message_reaction'
[13-01 21:45:49] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 21:45:49] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 21:45:49] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 21:45:49] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 21:45:49] [info] [Controller::getMessagesFromChat] Token is valid use_id 7416880777901654016
[13-01 21:45:49] [info] [Controller::getMessagesFromChat] Chat_id is valid 7416880792917278720
[13-01 21:45:49] [info] [Controller::getMessagesFromChat] Token is valid use_id 7416880777901654016
[13-01 21:45:49] [info] [Controller::getMessagesFromChat] Pack is formed
[13-01 21:45:49] [info] [Controller::getMessagesFromChat] Chat_id is valid 7416880792917278720
[13-01 21:45:49] [info] [Controller::getMessagesFromChat] Pack is formed
[13-01 21:45:49] [info] [MessageManager::getChatMessages] Start MessageManager::getChatMessages
[13-01 21:45:49] [info] [MessageManager::getChatMessages] Start MessageManager::getChatMessages
[13-01 21:45:49] [info] [MessageManager::getChatMessages] Query to select fully created
[13-01 21:45:49] [info] [MessageManager::getChatMessages] Query to select fully created
[13-01 21:45:49] [info] [SelectQuery<Message>::execute] Start select::execute
[13-01 21:45:49] [info] [SelectQuery<Message>::execute] Start select::execute
[13-01 21:45:49] [info] [SelectQuery<Message>::execute] Start select::execute for sql
[13-01 21:45:49] [info] [SelectQuery<Message>::execute] Start select::execute for sql
[13-01 21:45:49] [info] [SelectQuery<Message>::execute] cache_key
[13-01 21:52:29] [info] [] Logger initialized for service 'MessageService'
[13-01 21:52:29] [info] [SQLiteDatabase::initializeSchema] Database schema initialized successfully
[13-01 21:52:29] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message
[13-01 21:52:29] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_status
[13-01 21:52:29] [info] [RabbitMQClient::subscribe] Subscrive: app.events | save_message_reaction
[13-01 21:52:29] [info] [RabbitMQClient::subscribe] Subscrive: app.events | delete_message_reaction
[13-01 21:52:29] [info] [Server::run] [Message server is started on port '8082'
[13-01 21:52:30] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 21:52:30] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 21:52:30] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 21:52:30] [info] [RabbitMQClient::declareExchange] [rabbit] Declared exchange 'app.events'
[13-01 21:52:30] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessage' bound to exchange 'app.events' with key 'save_message'
[13-01 21:52:30] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'delete_message_reaction' bound to exchange 'app.events' with key 'delete_message_reaction'
[13-01 21:52:30] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'QueueSaveMessageStatus' bound to exchange 'app.events' with key 'save_message_status'
[13-01 21:52:30] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message' in queue 'QueueSaveMessage'
[13-01 21:52:30] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'delete_message_reaction' in queue 'delete_message_reaction'
[13-01 21:52:30] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message_status' in queue 'QueueSaveMessageStatus'
[13-01 21:52:30] [info] [RabbitMQClient::subscribe] [rabbit] Queue 'save_message_reaction' bound to exchange 'app.events' with key 'save_message_reaction'
[13-01 21:52:30] [info] [RabbitMQClient::subscribe] [rabbit] Subscribed to 'app.events':'save_message_reaction' in queue 'save_message_reaction'
[13-01 21:52:36] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 21:52:36] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 21:52:36] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 21:52:36] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 21:52:36] [info] [Controller::getMessagesFromChat] Token is valid use_id 7416880777901654016
[13-01 21:52:36] [info] [Controller::getMessagesFromChat] Chat_id is valid 7416880792917278720
[13-01 21:52:36] [info] [Controller::getMessagesFromChat] Token is valid use_id 7416880777901654016
[13-01 21:52:36] [info] [Controller::getMessagesFromChat] Chat_id is valid 7416880792917278720
[13-01 21:52:36] [info] [Controller::getMessagesFromChat] Pack is formed
[13-01 21:52:36] [info] [Controller::getMessagesFromChat] Pack is formed
[13-01 21:52:36] [info] [MessageManager::getChatMessages] Start MessageManager::getChatMessages
[13-01 21:52:36] [info] [MessageManager::getChatMessages] Start MessageManager::getChatMessages
[13-01 21:52:36] [info] [MessageManager::getChatMessages] Query to select fully created
[13-01 21:52:36] [info] [MessageManager::getChatMessages] Query to select fully created
[13-01 21:52:36] [info] [SelectQuery<Message>::execute] Start select::execute
[13-01 21:52:36] [info] [SelectQuery<Message>::execute] Start select::execute
[13-01 21:52:36] [info] [SelectQuery<Message>::execute] Start select::execute for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 21:52:36] [info] [SelectQuery<Message>::execute] Start select::execute for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 21:52:36] [info] [SelectQuery<Message>::execute] cache_key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830
[13-01 21:52:36] [info] [SelectQuery<Message>::execute] cache_key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830
[13-01 21:52:36] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830'
[13-01 21:52:36] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '2'
[13-01 21:52:36] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830
[13-01 21:52:36] [info] [] SelectQuery<Message>::execute took 0.006 s
[13-01 21:52:36] [info] [MessageManager::getChatMessages] Query executed
[13-01 21:52:36] [info] [] MessageManager::getChatMessages took 0.007 s
[13-01 21:52:36] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 2 messages
[13-01 21:52:36] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830'
[13-01 21:52:36] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '2'
[13-01 21:52:36] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830
[13-01 21:52:36] [info] [] SelectQuery<Message>::execute took 0.008 s
[13-01 21:52:36] [info] [MessageManager::getChatMessages] Query executed
[13-01 21:52:36] [info] [] MessageManager::getChatMessages took 0.008 s
[13-01 21:52:36] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 2 messages
[13-01 21:52:36] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 21:52:36] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 21:52:36] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 21:52:36] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 21:52:36] [info] [SelectQuery<MessageStatus>::execute] cache_key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001
[13-01 21:52:36] [info] [SelectQuery<MessageStatus>::execute] cache_key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001
[13-01 21:52:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001'
[13-01 21:52:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:52:36] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001
[13-01 21:52:36] [info] [] SelectQuery<MessageStatus>::execute took 0.004 s
[13-01 21:52:36] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 21:52:36] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:52:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001'
[13-01 21:52:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:52:36] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001
[13-01 21:52:36] [info] [] SelectQuery<MessageStatus>::execute took 0.006 s
[13-01 21:52:36] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 21:52:36] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:52:36] [info] [SelectQuery<Reaction>::execute] cache_key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=2128590752
[13-01 21:52:36] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=2128590752'
[13-01 21:52:36] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:52:36] [info] [SelectQuery<Reaction>::execute] Hit cache for key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=2128590752
[13-01 21:52:36] [info] [] SelectQuery<Reaction>::execute took 0.002 s
[13-01 21:52:36] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 21:52:36] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 21:52:36] [info] [SelectQuery<Reaction>::execute] cache_key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=2128590752
[13-01 21:52:36] [info] [SelectQuery<MessageStatus>::execute] cache_key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194
[13-01 21:52:36] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=2128590752'
[13-01 21:52:36] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:52:36] [info] [SelectQuery<Reaction>::execute] Hit cache for key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=2128590752
[13-01 21:52:36] [info] [] SelectQuery<Reaction>::execute took 0.005 s
[13-01 21:52:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194'
[13-01 21:52:36] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 21:52:36] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 21:52:36] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 21:52:36] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 21:52:36] [info] [SelectQuery<MessageStatus>::execute] cache_key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194
[13-01 21:52:36] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194'
[13-01 21:52:36] [info] [SelectQuery<MessageStatus>::execute] Not hit cache for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 21:52:36] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 21:52:36] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 21:52:36] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 21:52:36] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[13-01 21:52:36] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?'
[13-01 21:52:36] [info] [] SqlExecutor::execute took 0.002 s
[13-01 21:52:36] [info] [] SqlExecutor::execute took 0.001 s
[13-01 21:52:36] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[13-01 21:52:36] [info] [SelectQuery<MessageStatus>::execute] query SELECT * FROM messages_status WHERE message_id = ? AND is_read = ? succeed
[13-01 21:52:36] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416890526504370176,"read_at":1768324580,"receiver_id":7416880777901654016}
[13-01 21:52:36] [info] [SqlBuilder::buildResults] Select {"is_read":true,"message_id":7416890526504370176,"read_at":1768324580,"receiver_id":7416880777901654016}
[13-01 21:52:36] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194 - [{"is_read":true,"message_id":7416890526504370176,"read_at":1768324580,"receiver_id":7416880777901654016}] for 859716 seconds
[13-01 21:52:36] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[13-01 21:52:36] [info] [] SelectQuery<MessageStatus>::execute took 0.011 s
[13-01 21:52:36] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 21:52:36] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:52:36] [info] [SelectQuery<Reaction>::execute] cache_key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=-610360561
[13-01 21:52:36] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=-610360561'
[13-01 21:52:36] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:52:36] [info] [SelectQuery<Reaction>::execute] Hit cache for key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=-610360561
[13-01 21:52:36] [info] [] SelectQuery<Reaction>::execute took 0.001 s
[13-01 21:52:36] [info] [] Send responce code 200 and body [{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","reactions":{"counts":[[2,1]],"receiver_reaction":2},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513},{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","reactions":{"counts":[[1,1]],"receiver_reaction":1},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}]
[13-01 21:52:36] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194 - [{"is_read":true,"message_id":7416890526504370176,"read_at":1768324580,"receiver_id":7416880777901654016}] for 181081 seconds
[13-01 21:52:36] [info] [SelectQuery<MessageStatus>::execute] Results has 1 size
[13-01 21:52:36] [info] [] SelectQuery<MessageStatus>::execute took 0.010 s
[13-01 21:52:36] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 21:52:36] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:52:36] [info] [SelectQuery<Reaction>::execute] cache_key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=-610360561
[13-01 21:52:36] [info] [] Server::handleGetMessagesFromChat took 0.044 s
[13-01 21:52:36] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=-610360561'
[13-01 21:52:36] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:52:36] [info] [SelectQuery<Reaction>::execute] Hit cache for key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=-803252410:params=-610360561
[13-01 21:52:36] [info] [] SelectQuery<Reaction>::execute took 0.001 s
[13-01 21:52:36] [info] [] Send responce code 200 and body [{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","reactions":{"counts":[[2,1]],"receiver_reaction":2},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513},{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","reactions":{"counts":[[1,1]],"receiver_reaction":1},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}]
[13-01 21:52:36] [info] [] Server::handleGetMessagesFromChat took 0.045 s
[13-01 21:52:40] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"message_id":7416890526504370176,"reaction_id":1,"receiver_id":7416880777901654016}
[13-01 21:52:40] [info] [RabbitMQClient::subscribe] [rabbit] Received event: delete_message_reaction
[13-01 21:52:40] [info] [Controller::subscribeToDeleteMessageReaction] Getted event in onDeleteMessageReaction: delete_message_reaction and payload {"message_id":7416890526504370176,"reaction_id":1,"receiver_id":7416880777901654016}
[13-01 21:52:40] [info] [SqlExecutor::execute] Execute DELETE FROM messages_reaction WHERE message_id = ? AND receiver_id = ?
[13-01 21:52:40] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: DELETE FROM messages_reaction WHERE message_id = ? AND receiver_id = ?
[13-01 21:52:40] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'DELETE FROM messages_reaction WHERE message_id = ? AND receiver_id = ?'
[13-01 21:52:40] [info] [] SqlExecutor::execute took 0.002 s
[13-01 21:52:40] [info] [DeleteQuery<Reaction>::execute] query DELETE FROM messages_reaction WHERE message_id = ? AND receiver_id = ? succeed
[13-01 21:52:40] [info] [RabbitMQClient::publish] Publish: app.events | message_reaction_deleted
[13-01 21:52:40] [info] [RabbitMQClient::declareExchange] app.events already exist
[13-01 21:52:40] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"message_id":7416890526504370176,"reaction_id":1,"receiver_id":7416880777901654016}' to exchange 'app.events' with key 'direct'
[13-01 21:52:40] [info] [RabbitMQClient::publish] [rabbit] Published message '{"message_id":7416890526504370176,"reaction_id":1,"receiver_id":7416880777901654016}' to exchange 'app.events' with key 'direct'
[13-01 21:52:40] [info] [Controller::getMessageById] getMessageById 7416890526504370176
[13-01 21:52:40] [info] [GenericRepository::findOne] Id in dindOne 7416890526504370176
[13-01 21:52:40] [info] [SelectQuery<Message>::execute] Start select::execute
[13-01 21:52:40] [info] [SelectQuery<Message>::execute] Start select::execute for sql SELECT * FROM messages WHERE id = ? LIMIT 1
[13-01 21:52:40] [info] [SelectQuery<Message>::execute] cache_key query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1613107140:params=-610360561
[13-01 21:52:40] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1613107140:params=-610360561'
[13-01 21:52:40] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:52:40] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1613107140:params=-610360561
[13-01 21:52:40] [info] [] SelectQuery<Message>::execute took 0.001 s
[13-01 21:52:40] [info] [] Send responce code 200 and body {"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}
[13-01 21:52:40] [info] [] Server::handleGetMessage took 0.001 s
[13-01 21:52:45] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 21:52:45] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 21:52:45] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 21:52:45] [info] [Controller::getMessagesFromChat] Token is valid use_id 7416880777901654016
[13-01 21:52:45] [info] [Controller::getMessagesFromChat] Chat_id is valid 7416880792917278720
[13-01 21:52:45] [info] [Controller::getMessagesFromChat] Pack is formed
[13-01 21:52:45] [info] [MessageManager::getChatMessages] Start MessageManager::getChatMessages
[13-01 21:52:45] [info] [MessageManager::getChatMessages] Query to select fully created
[13-01 21:52:45] [info] [SelectQuery<Message>::execute] Start select::execute
[13-01 21:52:45] [info] [SelectQuery<Message>::execute] Start select::execute for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 21:52:45] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 21:52:45] [info] [Controller::getMessagesFromChat] Token is valid use_id 7416880777901654016
[13-01 21:52:45] [info] [Controller::getMessagesFromChat] Chat_id is valid 7416880792917278720
[13-01 21:52:45] [info] [Controller::getMessagesFromChat] Pack is formed
[13-01 21:52:45] [info] [MessageManager::getChatMessages] Start MessageManager::getChatMessages
[13-01 21:52:45] [info] [MessageManager::getChatMessages] Query to select fully created
[13-01 21:52:45] [info] [SelectQuery<Message>::execute] Start select::execute
[13-01 21:52:45] [info] [SelectQuery<Message>::execute] Start select::execute for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 21:52:45] [info] [SelectQuery<Message>::execute] cache_key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830
[13-01 21:52:45] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830'
[13-01 21:52:45] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '2'
[13-01 21:52:45] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830
[13-01 21:52:45] [info] [] SelectQuery<Message>::execute took 0.006 s
[13-01 21:52:45] [info] [MessageManager::getChatMessages] Query executed
[13-01 21:52:45] [info] [] MessageManager::getChatMessages took 0.006 s
[13-01 21:52:45] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 2 messages
[13-01 21:52:45] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 21:52:45] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 21:52:45] [info] [SelectQuery<Message>::execute] cache_key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830
[13-01 21:52:45] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830'
[13-01 21:52:45] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '2'
[13-01 21:52:45] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830
[13-01 21:52:45] [info] [] SelectQuery<Message>::execute took 0.010 s
[13-01 21:52:45] [info] [MessageManager::getChatMessages] Query executed
[13-01 21:52:45] [info] [] MessageManager::getChatMessages took 0.010 s
[13-01 21:52:45] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 2 messages
[13-01 21:52:45] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 21:52:45] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 21:52:45] [info] [SelectQuery<MessageStatus>::execute] cache_key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001
[13-01 21:52:45] [info] [SelectQuery<MessageStatus>::execute] cache_key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001
[13-01 21:52:45] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001'
[13-01 21:52:45] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:52:45] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001
[13-01 21:52:45] [info] [] SelectQuery<MessageStatus>::execute took 0.007 s
[13-01 21:52:45] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 21:52:45] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001'
[13-01 21:52:45] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:52:45] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:52:45] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001
[13-01 21:52:45] [info] [] SelectQuery<MessageStatus>::execute took 0.003 s
[13-01 21:52:45] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 21:52:45] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:52:45] [info] [SelectQuery<Reaction>::execute] cache_key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=2128590752
[13-01 21:52:45] [info] [SelectQuery<Reaction>::execute] cache_key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=2128590752
[13-01 21:52:45] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=2128590752'
[13-01 21:52:45] [info] [SelectQuery<Reaction>::execute] Not hit cache for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:52:45] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:52:45] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=2128590752'
[13-01 21:52:45] [info] [SelectQuery<Reaction>::execute] Not hit cache for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:52:45] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:52:45] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:52:45] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:52:45] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_reaction WHERE message_id = ?'
[13-01 21:52:45] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_reaction WHERE message_id = ?'
[13-01 21:52:45] [info] [] SqlExecutor::execute took 0.000 s
[13-01 21:52:45] [info] [] SqlExecutor::execute took 0.001 s
[13-01 21:52:45] [info] [SelectQuery<Reaction>::execute] query SELECT * FROM messages_reaction WHERE message_id = ? succeed
[13-01 21:52:45] [info] [SelectQuery<Reaction>::execute] query SELECT * FROM messages_reaction WHERE message_id = ? succeed
[13-01 21:52:45] [info] [SqlBuilder::buildResults] Select {"message_id":7416890578660540416,"reaction_id":2,"receiver_id":7416880777901654016}
[13-01 21:52:45] [info] [SqlBuilder::buildResults] Select {"message_id":7416890578660540416,"reaction_id":2,"receiver_id":7416880777901654016}
[13-01 21:52:45] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=2128590752 - [{"message_id":7416890578660540416,"reaction_id":2,"receiver_id":7416880777901654016}] for 300 seconds
[13-01 21:52:45] [info] [SelectQuery<Reaction>::execute] Results has 1 size
[13-01 21:52:45] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=2128590752 - [{"message_id":7416890578660540416,"reaction_id":2,"receiver_id":7416880777901654016}] for 551683 seconds
[13-01 21:52:45] [info] [SelectQuery<Reaction>::execute] Results has 1 size
[13-01 21:52:45] [info] [] SelectQuery<Reaction>::execute took 0.008 s
[13-01 21:52:45] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 21:52:45] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 21:52:45] [info] [] SelectQuery<Reaction>::execute took 0.008 s
[13-01 21:52:45] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 21:52:45] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 21:52:45] [info] [SelectQuery<MessageStatus>::execute] cache_key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194
[13-01 21:52:45] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194'
[13-01 21:52:45] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:52:45] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194
[13-01 21:52:45] [info] [] SelectQuery<MessageStatus>::execute took 0.002 s
[13-01 21:52:45] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 21:52:45] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:52:45] [info] [SelectQuery<MessageStatus>::execute] cache_key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194
[13-01 21:52:45] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194'
[13-01 21:52:45] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:52:45] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194
[13-01 21:52:45] [info] [] SelectQuery<MessageStatus>::execute took 0.003 s
[13-01 21:52:45] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 21:52:45] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:52:45] [info] [SelectQuery<Reaction>::execute] cache_key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=-610360561
[13-01 21:52:45] [info] [SelectQuery<Reaction>::execute] cache_key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=-610360561
[13-01 21:52:45] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=-610360561'
[13-01 21:52:45] [info] [SelectQuery<Reaction>::execute] Not hit cache for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:52:45] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:52:45] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:52:45] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_reaction WHERE message_id = ?'
[13-01 21:52:45] [info] [] SqlExecutor::execute took 0.000 s
[13-01 21:52:45] [info] [SelectQuery<Reaction>::execute] query SELECT * FROM messages_reaction WHERE message_id = ? succeed
[13-01 21:52:45] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=-610360561'
[13-01 21:52:45] [info] [SelectQuery<Reaction>::execute] Not hit cache for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:52:45] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:52:45] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:52:45] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_reaction WHERE message_id = ?'
[13-01 21:52:45] [info] [] SqlExecutor::execute took 0.000 s
[13-01 21:52:45] [info] [SelectQuery<Reaction>::execute] query SELECT * FROM messages_reaction WHERE message_id = ? succeed
[13-01 21:52:45] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=-610360561 - [] for 14075 seconds
[13-01 21:52:45] [info] [SelectQuery<Reaction>::execute] Results has 0 size
[13-01 21:52:45] [info] [] SelectQuery<Reaction>::execute took 0.004 s
[13-01 21:52:45] [info] [] Send responce code 200 and body [{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","reactions":{"counts":[[2,1]],"receiver_reaction":2},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513},{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","reactions":{"counts":[],"receiver_reaction":null},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}]
[13-01 21:52:45] [info] [] Server::handleGetMessagesFromChat took 0.028 s
[13-01 21:52:45] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=-610360561 - [] for 300 seconds
[13-01 21:52:45] [info] [SelectQuery<Reaction>::execute] Results has 0 size
[13-01 21:52:45] [info] [] SelectQuery<Reaction>::execute took 0.004 s
[13-01 21:52:45] [info] [] Send responce code 200 and body [{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","reactions":{"counts":[[2,1]],"receiver_reaction":2},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513},{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","reactions":{"counts":[],"receiver_reaction":null},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}]
[13-01 21:52:45] [info] [] Server::handleGetMessagesFromChat took 0.029 s
[13-01 21:52:57] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 21:52:57] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 21:52:57] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 21:52:57] [info] [Controller::getMessagesFromChat] Token is valid use_id 7416880777901654016
[13-01 21:52:57] [info] [Controller::getMessagesFromChat] Chat_id is valid 7416880792917278720
[13-01 21:52:57] [info] [Controller::getMessagesFromChat] Pack is formed
[13-01 21:52:57] [info] [MessageManager::getChatMessages] Start MessageManager::getChatMessages
[13-01 21:52:57] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 21:52:57] [info] [MessageManager::getChatMessages] Query to select fully created
[13-01 21:52:57] [info] [Controller::getMessagesFromChat] Token is valid use_id 7416880777901654016
[13-01 21:52:57] [info] [Controller::getMessagesFromChat] Chat_id is valid 7416880792917278720
[13-01 21:52:57] [info] [SelectQuery<Message>::execute] Start select::execute
[13-01 21:52:57] [info] [SelectQuery<Message>::execute] Start select::execute for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 21:52:57] [info] [Controller::getMessagesFromChat] Pack is formed
[13-01 21:52:57] [info] [MessageManager::getChatMessages] Start MessageManager::getChatMessages
[13-01 21:52:57] [info] [MessageManager::getChatMessages] Query to select fully created
[13-01 21:52:57] [info] [SelectQuery<Message>::execute] Start select::execute
[13-01 21:52:57] [info] [SelectQuery<Message>::execute] Start select::execute for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 21:52:57] [info] [SelectQuery<Message>::execute] cache_key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830
[13-01 21:52:57] [info] [SelectQuery<Message>::execute] cache_key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830
[13-01 21:52:57] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830'
[13-01 21:52:57] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '2'
[13-01 21:52:57] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830'
[13-01 21:52:57] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830
[13-01 21:52:57] [info] [] SelectQuery<Message>::execute took 0.005 s
[13-01 21:52:57] [info] [MessageManager::getChatMessages] Query executed
[13-01 21:52:57] [info] [] MessageManager::getChatMessages took 0.005 s
[13-01 21:52:57] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 2 messages
[13-01 21:52:57] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 21:52:57] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 21:52:57] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '2'
[13-01 21:52:57] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830
[13-01 21:52:57] [info] [] SelectQuery<Message>::execute took 0.006 s
[13-01 21:52:57] [info] [MessageManager::getChatMessages] Query executed
[13-01 21:52:57] [info] [] MessageManager::getChatMessages took 0.006 s
[13-01 21:52:57] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 2 messages
[13-01 21:52:57] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 21:52:57] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 21:52:57] [info] [SelectQuery<MessageStatus>::execute] cache_key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001
[13-01 21:52:57] [info] [SelectQuery<MessageStatus>::execute] cache_key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001
[13-01 21:52:57] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001'
[13-01 21:52:57] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:52:57] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001
[13-01 21:52:57] [info] [] SelectQuery<MessageStatus>::execute took 0.003 s
[13-01 21:52:57] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 21:52:57] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:52:57] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001'
[13-01 21:52:57] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:52:57] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001
[13-01 21:52:57] [info] [] SelectQuery<MessageStatus>::execute took 0.003 s
[13-01 21:52:57] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 21:52:57] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:52:57] [info] [SelectQuery<Reaction>::execute] cache_key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=2128590752
[13-01 21:52:57] [info] [SelectQuery<Reaction>::execute] cache_key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=2128590752
[13-01 21:52:57] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=2128590752'
[13-01 21:52:57] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:52:57] [info] [SelectQuery<Reaction>::execute] Hit cache for key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=2128590752
[13-01 21:52:57] [info] [] SelectQuery<Reaction>::execute took 0.005 s
[13-01 21:52:57] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 21:52:57] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 21:52:57] [info] [SelectQuery<MessageStatus>::execute] cache_key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194
[13-01 21:52:57] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=2128590752'
[13-01 21:52:57] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:52:57] [info] [SelectQuery<Reaction>::execute] Hit cache for key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=2128590752
[13-01 21:52:57] [info] [] SelectQuery<Reaction>::execute took 0.008 s
[13-01 21:52:57] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 21:52:57] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 21:52:57] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194'
[13-01 21:52:57] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:52:57] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194
[13-01 21:52:57] [info] [] SelectQuery<MessageStatus>::execute took 0.003 s
[13-01 21:52:57] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 21:52:57] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:52:57] [info] [SelectQuery<MessageStatus>::execute] cache_key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194
[13-01 21:52:57] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194'
[13-01 21:52:57] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 21:52:57] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194
[13-01 21:52:57] [info] [] SelectQuery<MessageStatus>::execute took 0.003 s
[13-01 21:52:57] [info] [SelectQuery<Reaction>::execute] cache_key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=-610360561
[13-01 21:52:57] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 21:52:57] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 21:52:57] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=-610360561'
[13-01 21:52:57] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] Parsed successfully: '0'
[13-01 21:52:57] [info] [SelectQuery<Reaction>::execute] Hit cache for key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=-610360561
[13-01 21:52:57] [info] [] SelectQuery<Reaction>::execute took 0.003 s
[13-01 21:52:57] [info] [] Send responce code 200 and body [{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","reactions":{"counts":[[2,1]],"receiver_reaction":2},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513},{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","reactions":{"counts":[],"receiver_reaction":null},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}]
[13-01 21:52:57] [info] [] Server::handleGetMessagesFromChat took 0.031 s
[13-01 21:52:57] [info] [SelectQuery<Reaction>::execute] cache_key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=-610360561
[13-01 21:52:57] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=-610360561'
[13-01 21:52:57] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] Parsed successfully: '0'
[13-01 21:52:57] [info] [SelectQuery<Reaction>::execute] Hit cache for key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=-610360561
[13-01 21:52:57] [info] [] SelectQuery<Reaction>::execute took 0.002 s
[13-01 21:52:57] [info] [] Send responce code 200 and body [{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","reactions":{"counts":[[2,1]],"receiver_reaction":2},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513},{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","reactions":{"counts":[],"receiver_reaction":null},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}]
[13-01 21:52:57] [info] [] Server::handleGetMessagesFromChat took 0.033 s
[13-01 22:01:31] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 22:01:31] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 22:01:31] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 22:01:31] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 22:01:31] [info] [Controller::getMessagesFromChat] Token is valid use_id 7416880777901654016
[13-01 22:01:31] [info] [Controller::getMessagesFromChat] Chat_id is valid 7416880792917278720
[13-01 22:01:31] [info] [Controller::getMessagesFromChat] Token is valid use_id 7416880777901654016
[13-01 22:01:31] [info] [Controller::getMessagesFromChat] Chat_id is valid 7416880792917278720
[13-01 22:01:31] [info] [Controller::getMessagesFromChat] Pack is formed
[13-01 22:01:31] [info] [Controller::getMessagesFromChat] Pack is formed
[13-01 22:01:31] [info] [MessageManager::getChatMessages] Start MessageManager::getChatMessages
[13-01 22:01:31] [info] [MessageManager::getChatMessages] Start MessageManager::getChatMessages
[13-01 22:01:32] [info] [MessageManager::getChatMessages] Query to select fully created
[13-01 22:01:32] [info] [MessageManager::getChatMessages] Query to select fully created
[13-01 22:01:32] [info] [SelectQuery<Message>::execute] Start select::execute
[13-01 22:01:32] [info] [SelectQuery<Message>::execute] Start select::execute
[13-01 22:01:32] [info] [SelectQuery<Message>::execute] Start select::execute for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 22:01:32] [info] [SelectQuery<Message>::execute] Start select::execute for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 22:01:32] [info] [SelectQuery<Message>::execute] cache_key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830
[13-01 22:01:32] [info] [SelectQuery<Message>::execute] cache_key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830
[13-01 22:01:32] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830'
[13-01 22:01:32] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830'
[13-01 22:01:32] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '2'
[13-01 22:01:32] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '2'
[13-01 22:01:32] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830
[13-01 22:01:32] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830
[13-01 22:01:32] [info] [] SelectQuery<Message>::execute took 0.006 s
[13-01 22:01:32] [info] [MessageManager::getChatMessages] Query executed
[13-01 22:01:32] [info] [] MessageManager::getChatMessages took 0.012 s
[13-01 22:01:32] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 2 messages
[13-01 22:01:32] [info] [] SelectQuery<Message>::execute took 0.006 s
[13-01 22:01:32] [info] [MessageManager::getChatMessages] Query executed
[13-01 22:01:32] [info] [] MessageManager::getChatMessages took 0.012 s
[13-01 22:01:32] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 2 messages
[13-01 22:01:32] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 22:01:32] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 22:01:32] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 22:01:32] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 22:01:32] [info] [SelectQuery<MessageStatus>::execute] cache_key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001
[13-01 22:01:32] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001'
[13-01 22:01:32] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 22:01:32] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001
[13-01 22:01:32] [info] [] SelectQuery<MessageStatus>::execute took 0.002 s
[13-01 22:01:32] [info] [SelectQuery<MessageStatus>::execute] cache_key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001
[13-01 22:01:32] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001'
[13-01 22:01:32] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 22:01:32] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001
[13-01 22:01:32] [info] [] SelectQuery<MessageStatus>::execute took 0.003 s
[13-01 22:01:32] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 22:01:32] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 22:01:32] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 22:01:32] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 22:01:32] [info] [SelectQuery<Reaction>::execute] cache_key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=2128590752
[13-01 22:01:32] [info] [SelectQuery<Reaction>::execute] cache_key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=2128590752
[13-01 22:01:32] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=2128590752'
[13-01 22:01:32] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 22:01:32] [info] [SelectQuery<Reaction>::execute] Hit cache for key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=2128590752
[13-01 22:01:32] [info] [] SelectQuery<Reaction>::execute took 0.001 s
[13-01 22:01:32] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=2128590752'
[13-01 22:01:32] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 22:01:32] [info] [SelectQuery<Reaction>::execute] Hit cache for key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=2128590752
[13-01 22:01:32] [info] [] SelectQuery<Reaction>::execute took 0.002 s
[13-01 22:01:32] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 22:01:32] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 22:01:32] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 22:01:32] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 22:01:32] [info] [SelectQuery<MessageStatus>::execute] cache_key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194
[13-01 22:01:32] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194'
[13-01 22:01:32] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 22:01:32] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194
[13-01 22:01:32] [info] [] SelectQuery<MessageStatus>::execute took 0.001 s
[13-01 22:01:32] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 22:01:32] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 22:01:32] [info] [SelectQuery<MessageStatus>::execute] cache_key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194
[13-01 22:01:32] [info] [SelectQuery<Reaction>::execute] cache_key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=-610360561
[13-01 22:01:32] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=-610360561'
[13-01 22:01:32] [info] [SelectQuery<Reaction>::execute] Not hit cache for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 22:01:32] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194'
[13-01 22:01:32] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 22:01:32] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194
[13-01 22:01:32] [info] [] SelectQuery<MessageStatus>::execute took 0.003 s
[13-01 22:01:32] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 22:01:32] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 22:01:32] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 22:01:32] [info] [SelectQuery<Reaction>::execute] cache_key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=-610360561
[13-01 22:01:32] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=-610360561'
[13-01 22:01:32] [info] [SelectQuery<Reaction>::execute] Not hit cache for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 22:01:32] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 22:01:32] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 22:01:32] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 22:01:32] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_reaction WHERE message_id = ?'
[13-01 22:01:32] [info] [] SqlExecutor::execute took 0.010 s
[13-01 22:01:32] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_reaction WHERE message_id = ?'
[13-01 22:01:32] [info] [] SqlExecutor::execute took 0.010 s
[13-01 22:01:32] [info] [SelectQuery<Reaction>::execute] query SELECT * FROM messages_reaction WHERE message_id = ? succeed
[13-01 22:01:32] [info] [SelectQuery<Reaction>::execute] query SELECT * FROM messages_reaction WHERE message_id = ? succeed
[13-01 22:01:32] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=-610360561 - [] for 300 seconds
[13-01 22:01:32] [info] [SelectQuery<Reaction>::execute] Results has 0 size
[13-01 22:01:32] [info] [] SelectQuery<Reaction>::execute took 0.015 s
[13-01 22:01:32] [info] [] Send responce code 200 and body [{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","reactions":{"counts":[[2,1]],"receiver_reaction":2},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513},{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","reactions":{"counts":[],"receiver_reaction":null},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}]
[13-01 22:01:32] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=135119685:params=-610360561 - [] for 1484068 seconds
[13-01 22:01:32] [info] [SelectQuery<Reaction>::execute] Results has 0 size
[13-01 22:01:32] [info] [] SelectQuery<Reaction>::execute took 0.017 s
[13-01 22:01:32] [info] [] Send responce code 200 and body [{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","reactions":{"counts":[[2,1]],"receiver_reaction":2},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513},{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","reactions":{"counts":[],"receiver_reaction":null},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}]
[13-01 22:01:32] [info] [] Server::handleGetMessagesFromChat took 0.059 s
[13-01 22:01:32] [info] [] Server::handleGetMessagesFromChat took 0.059 s
[13-01 22:01:35] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"message_id":7416890578660540416,"reaction_id":2,"receiver_id":7416880777901654016}
[13-01 22:01:35] [info] [RabbitMQClient::subscribe] [rabbit] Received event: delete_message_reaction
[13-01 22:01:35] [info] [Controller::subscribeToDeleteMessageReaction] Getted event in onDeleteMessageReaction: delete_message_reaction and payload {"message_id":7416890578660540416,"reaction_id":2,"receiver_id":7416880777901654016}
[13-01 22:01:35] [info] [SqlExecutor::execute] Execute DELETE FROM messages_reaction WHERE message_id = ? AND receiver_id = ?
[13-01 22:01:35] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: DELETE FROM messages_reaction WHERE message_id = ? AND receiver_id = ?
[13-01 22:01:35] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'DELETE FROM messages_reaction WHERE message_id = ? AND receiver_id = ?'
[13-01 22:01:35] [info] [] SqlExecutor::execute took 0.003 s
[13-01 22:01:35] [info] [DeleteQuery<Reaction>::execute] query DELETE FROM messages_reaction WHERE message_id = ? AND receiver_id = ? succeed
[13-01 22:01:35] [info] [RabbitMQClient::publish] Publish: app.events | message_reaction_deleted
[13-01 22:01:35] [info] [RabbitMQClient::declareExchange] app.events already exist
[13-01 22:01:35] [info] [RabbitMQClient::subscribe] [rabbit] Received payload: {"message_id":7416890578660540416,"reaction_id":1,"receiver_id":7416880777901654016}
[13-01 22:01:35] [info] [RabbitMQClient::subscribe] [rabbit] Received event: save_message_reaction
[13-01 22:01:35] [info] [Controller::subscribeToSaveMessageReaction] Getted event in onSaveMessageReaction: save_message_reaction and payload {"message_id":7416890578660540416,"reaction_id":1,"receiver_id":7416880777901654016}
[13-01 22:01:35] [info] [GenericRepository::save] Builded sql INSERT OR REPLACE INTO messages_reaction (message_id, receiver_id, reaction_id) VALUES (?, ?, ?); 
[13-01 22:01:35] [info] [SqlExecutor::execute] Execute INSERT OR REPLACE INTO messages_reaction (message_id, receiver_id, reaction_id) VALUES (?, ?, ?); 
[13-01 22:01:35] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: INSERT OR REPLACE INTO messages_reaction (message_id, receiver_id, reaction_id) VALUES (?, ?, ?); 
[13-01 22:01:35] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'INSERT OR REPLACE INTO messages_reaction (message_id, receiver_id, reaction_id) VALUES (?, ?, ?); '
[13-01 22:01:35] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"message_id":7416890578660540416,"reaction_id":2,"receiver_id":7416880777901654016}' to exchange 'app.events' with key 'direct'
[13-01 22:01:35] [info] [] SqlExecutor::execute took 0.001 s
[13-01 22:01:35] [info] [GenericRepository::save] Save succeed for json: {"message_id":7416890578660540416,"reaction_id":1,"receiver_id":7416880777901654016}
[13-01 22:01:35] [info] [RedisCache::set] Set entity_cache:messages_reaction:7416890578660540416, 7416880777901654016 - {"message_id":7416890578660540416,"reaction_id":1,"receiver_id":7416880777901654016} for 881072 seconds
[13-01 22:01:35] [info] [RabbitMQClient::publish] Publish: app.events | message_reaction_saved
[13-01 22:01:35] [info] [RabbitMQClient::declareExchange] app.events already exist
[13-01 22:01:35] [info] [RabbitMQClient::publish] [rabbit] Published message '{"message_id":7416890578660540416,"reaction_id":2,"receiver_id":7416880777901654016}' to exchange 'app.events' with key 'direct'
[13-01 22:01:35] [info] [RabbitMQClient::publish] [rabbit] Try to publish message '{"message_id":7416890578660540416,"reaction_id":1,"receiver_id":7416880777901654016}' to exchange 'app.events' with key 'direct'
[13-01 22:01:35] [info] [RabbitMQClient::publish] [rabbit] Published message '{"message_id":7416890578660540416,"reaction_id":1,"receiver_id":7416880777901654016}' to exchange 'app.events' with key 'direct'
[13-01 22:01:35] [info] [Controller::getMessageById] getMessageById 7416890578660540416
[13-01 22:01:35] [info] [GenericRepository::findOne] Id in dindOne 7416890578660540416
[13-01 22:01:35] [info] [SelectQuery<Message>::execute] Start select::execute
[13-01 22:01:35] [info] [SelectQuery<Message>::execute] Start select::execute for sql SELECT * FROM messages WHERE id = ? LIMIT 1
[13-01 22:01:35] [info] [SelectQuery<Message>::execute] cache_key query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1613107140:params=2128590752
[13-01 22:01:35] [info] [Controller::getMessageById] getMessageById 7416890578660540416
[13-01 22:01:35] [info] [GenericRepository::findOne] Id in dindOne 7416890578660540416
[13-01 22:01:35] [info] [SelectQuery<Message>::execute] Start select::execute
[13-01 22:01:35] [info] [SelectQuery<Message>::execute] Start select::execute for sql SELECT * FROM messages WHERE id = ? LIMIT 1
[13-01 22:01:35] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1613107140:params=2128590752'
[13-01 22:01:35] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 22:01:35] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1613107140:params=2128590752
[13-01 22:01:35] [info] [] SelectQuery<Message>::execute took 0.001 s
[13-01 22:01:35] [info] [] Send responce code 200 and body {"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513}
[13-01 22:01:35] [info] [] Server::handleGetMessage took 0.001 s
[13-01 22:01:35] [info] [SelectQuery<Message>::execute] cache_key query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1613107140:params=2128590752
[13-01 22:01:35] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1613107140:params=2128590752'
[13-01 22:01:35] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 22:01:35] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages WHERE id = ? LIMIT 1:gen=-1613107140:params=2128590752
[13-01 22:01:35] [info] [] SelectQuery<Message>::execute took 0.001 s
[13-01 22:01:35] [info] [] Send responce code 200 and body {"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513}
[13-01 22:01:35] [info] [] Server::handleGetMessage took 0.001 s
[13-01 22:01:41] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 22:01:41] [info] [Controller::getMessagesFromChat] Get messages from chat with id 7416880792917278720
[13-01 22:01:41] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 22:01:41] [info] [JwtUtils::verifyTokenAndGetUserId] Token is verified, id is '7416880777901654016'
[13-01 22:01:41] [info] [Controller::getMessagesFromChat] Token is valid use_id 7416880777901654016
[13-01 22:01:41] [info] [Controller::getMessagesFromChat] Chat_id is valid 7416880792917278720
[13-01 22:01:41] [info] [Controller::getMessagesFromChat] Pack is formed
[13-01 22:01:41] [info] [Controller::getMessagesFromChat] Token is valid use_id 7416880777901654016
[13-01 22:01:41] [info] [Controller::getMessagesFromChat] Chat_id is valid 7416880792917278720
[13-01 22:01:41] [info] [MessageManager::getChatMessages] Start MessageManager::getChatMessages
[13-01 22:01:41] [info] [Controller::getMessagesFromChat] Pack is formed
[13-01 22:01:41] [info] [MessageManager::getChatMessages] Start MessageManager::getChatMessages
[13-01 22:01:41] [info] [MessageManager::getChatMessages] Query to select fully created
[13-01 22:01:41] [info] [MessageManager::getChatMessages] Query to select fully created
[13-01 22:01:41] [info] [SelectQuery<Message>::execute] Start select::execute
[13-01 22:01:41] [info] [SelectQuery<Message>::execute] Start select::execute
[13-01 22:01:41] [info] [SelectQuery<Message>::execute] Start select::execute for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 22:01:41] [info] [SelectQuery<Message>::execute] Start select::execute for sql SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20
[13-01 22:01:41] [info] [SelectQuery<Message>::execute] cache_key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830
[13-01 22:01:41] [info] [SelectQuery<Message>::execute] cache_key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830
[13-01 22:01:41] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830'
[13-01 22:01:41] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '2'
[13-01 22:01:41] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830
[13-01 22:01:41] [info] [] SelectQuery<Message>::execute took 0.005 s
[13-01 22:01:41] [info] [MessageManager::getChatMessages] Query executed
[13-01 22:01:41] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830'
[13-01 22:01:41] [info] [] MessageManager::getChatMessages took 0.005 s
[13-01 22:01:41] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 2 messages
[13-01 22:01:41] [info] [SelectQuery<Message>::tryLoadFromCache] [QueryCache] Parsed successfully: '2'
[13-01 22:01:41] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 22:01:41] [info] [SelectQuery<Message>::execute] Hit cache for key query_cache:SELECT * FROM messages JOIN messages_status ON id = messages_status.message_id WHERE chat_id = ? AND messages_status.receiver_id = ? ORDER BY timestamp DESC LIMIT 20:gen=341362770:params=-1576370830
[13-01 22:01:41] [info] [] SelectQuery<Message>::execute took 0.005 s
[13-01 22:01:41] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 22:01:41] [info] [MessageManager::getChatMessages] Query executed
[13-01 22:01:41] [info] [] MessageManager::getChatMessages took 0.005 s
[13-01 22:01:41] [info] [Controller::getMessagesFromChat] For 7416880792917278720 chat finded 2 messages
[13-01 22:01:41] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 22:01:41] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 22:01:41] [info] [SelectQuery<MessageStatus>::execute] cache_key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001
[13-01 22:01:41] [info] [SelectQuery<MessageStatus>::execute] cache_key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001
[13-01 22:01:41] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001'
[13-01 22:01:41] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 22:01:41] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001
[13-01 22:01:41] [info] [] SelectQuery<MessageStatus>::execute took 0.001 s
[13-01 22:01:41] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 22:01:41] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 22:01:41] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001'
[13-01 22:01:41] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 22:01:41] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=1007282001
[13-01 22:01:41] [info] [] SelectQuery<MessageStatus>::execute took 0.001 s
[13-01 22:01:41] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 22:01:41] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 22:01:41] [info] [SelectQuery<Reaction>::execute] cache_key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=1344655491:params=2128590752
[13-01 22:01:41] [info] [SelectQuery<Reaction>::execute] cache_key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=1344655491:params=2128590752
[13-01 22:01:41] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=1344655491:params=2128590752'
[13-01 22:01:41] [info] [SelectQuery<Reaction>::execute] Not hit cache for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 22:01:41] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 22:01:41] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 22:01:41] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=1344655491:params=2128590752'
[13-01 22:01:41] [info] [SelectQuery<Reaction>::execute] Not hit cache for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 22:01:41] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 22:01:41] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 22:01:41] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_reaction WHERE message_id = ?'
[13-01 22:01:41] [info] [] SqlExecutor::execute took 0.001 s
[13-01 22:01:41] [info] [SelectQuery<Reaction>::execute] query SELECT * FROM messages_reaction WHERE message_id = ? succeed
[13-01 22:01:41] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_reaction WHERE message_id = ?'
[13-01 22:01:41] [info] [] SqlExecutor::execute took 0.000 s
[13-01 22:01:41] [info] [SelectQuery<Reaction>::execute] query SELECT * FROM messages_reaction WHERE message_id = ? succeed
[13-01 22:01:41] [info] [SqlBuilder::buildResults] Select {"message_id":7416890578660540416,"reaction_id":1,"receiver_id":7416880777901654016}
[13-01 22:01:41] [info] [SqlBuilder::buildResults] Select {"message_id":7416890578660540416,"reaction_id":1,"receiver_id":7416880777901654016}
[13-01 22:01:41] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=1344655491:params=2128590752 - [{"message_id":7416890578660540416,"reaction_id":1,"receiver_id":7416880777901654016}] for 1177396 seconds
[13-01 22:01:41] [info] [SelectQuery<Reaction>::execute] Results has 1 size
[13-01 22:01:41] [info] [] SelectQuery<Reaction>::execute took 0.007 s
[13-01 22:01:41] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 22:01:41] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 22:01:41] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=1344655491:params=2128590752 - [{"message_id":7416890578660540416,"reaction_id":1,"receiver_id":7416880777901654016}] for 481737 seconds
[13-01 22:01:41] [info] [SelectQuery<Reaction>::execute] Results has 1 size
[13-01 22:01:41] [info] [] SelectQuery<Reaction>::execute took 0.007 s
[13-01 22:01:41] [info] [SelectQuery<MessageStatus>::execute] Start select::execute
[13-01 22:01:41] [info] [SelectQuery<MessageStatus>::execute] Start select::execute for sql SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?
[13-01 22:01:41] [info] [SelectQuery<MessageStatus>::execute] cache_key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194
[13-01 22:01:41] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194'
[13-01 22:01:41] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 22:01:41] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194
[13-01 22:01:41] [info] [] SelectQuery<MessageStatus>::execute took 0.001 s
[13-01 22:01:41] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 22:01:41] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 22:01:41] [info] [SelectQuery<MessageStatus>::execute] cache_key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194
[13-01 22:01:41] [info] [SelectQuery<Reaction>::execute] cache_key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=1344655491:params=-610360561
[13-01 22:01:41] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] MISS for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=1344655491:params=-610360561'
[13-01 22:01:41] [info] [SelectQuery<Reaction>::execute] Not hit cache for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 22:01:41] [info] [SqlExecutor::execute] Execute SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 22:01:41] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194'
[13-01 22:01:41] [info] [SelectQuery<MessageStatus>::tryLoadFromCache] [QueryCache] Parsed successfully: '1'
[13-01 22:01:41] [info] [SelectQuery<MessageStatus>::execute] Hit cache for key query_cache:SELECT * FROM messages_status WHERE message_id = ? AND is_read = ?:gen=-1954465682:params=-1723272194
[13-01 22:01:41] [info] [] SelectQuery<MessageStatus>::execute took 0.002 s
[13-01 22:01:41] [info] [SelectQuery<Reaction>::execute] Start select::execute
[13-01 22:01:41] [info] [SqlExecutor::execute] [SqlExecutor] Executing SQL: SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 22:01:41] [info] [SelectQuery<Reaction>::execute] Start select::execute for sql SELECT * FROM messages_reaction WHERE message_id = ?
[13-01 22:01:41] [info] [SqlExecutor::execute] [SqlExecutor] Exec succeed: 'SELECT * FROM messages_reaction WHERE message_id = ?'
[13-01 22:01:41] [info] [] SqlExecutor::execute took 0.000 s
[13-01 22:01:41] [info] [SelectQuery<Reaction>::execute] query SELECT * FROM messages_reaction WHERE message_id = ? succeed
[13-01 22:01:41] [info] [SelectQuery<Reaction>::execute] cache_key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=1344655491:params=-610360561
[13-01 22:01:41] [info] [RedisCache::set] Set query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=1344655491:params=-610360561 - [] for 1093472 seconds
[13-01 22:01:41] [info] [SelectQuery<Reaction>::execute] Results has 0 size
[13-01 22:01:41] [info] [] SelectQuery<Reaction>::execute took 0.003 s
[13-01 22:01:41] [info] [] Send responce code 200 and body [{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","reactions":{"counts":[[1,1]],"receiver_reaction":1},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513},{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","reactions":{"counts":[],"receiver_reaction":null},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}]
[13-01 22:01:41] [info] [] Server::handleGetMessagesFromChat took 0.022 s
[13-01 22:01:41] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] HIT for key 'query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=1344655491:params=-610360561'
[13-01 22:01:41] [info] [SelectQuery<Reaction>::tryLoadFromCache] [QueryCache] Parsed successfully: '0'
[13-01 22:01:41] [info] [SelectQuery<Reaction>::execute] Hit cache for key query_cache:SELECT * FROM messages_reaction WHERE message_id = ?:gen=1344655491:params=-610360561
[13-01 22:01:41] [info] [] SelectQuery<Reaction>::execute took 0.003 s
[13-01 22:01:41] [info] [] Send responce code 200 and body [{"chat_id":7416880792917278720,"id":7416890578660540416,"local_id":"{b390152e-8659-4982-a56c-2b5597bb0731}","reactions":{"counts":[[1,1]],"receiver_reaction":1},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"oooo","timestamp":1768324513},{"chat_id":7416880792917278720,"id":7416890526504370176,"local_id":"{59e7229b-6d7b-4fe1-b22f-1075b5330ca0}","reactions":{"counts":[],"receiver_reaction":null},"read":{"count":1,"receiver_read_status":true},"sender_id":7416880777901654016,"text":"ooo","timestamp":1768324500}]
[13-01 22:01:41] [info] [] Server::handleGetMessagesFromChat took 0.025 s
